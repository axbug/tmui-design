var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,d=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,i=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))a.call(t,r)&&d(e,r,t[r]);return e},u=(e,o)=>t(e,r(o));import{d as n,O as s,c as p,r as c,at as b,o as f,a as m,w as x,M as h,K as v,m as y,aB as g,Q as w,b as $,N as _,u as S,n as j,g as B,k as O,h as C,i as N}from"./index-6b165856.js";import{c as G,u as I,d as k,h as z}from"./tm-app.d6cf2f93.js";import{t as K}from"./tm-sheet.3639b36a.js";import{_ as P}from"./tm-badge.vue_vue_type_script_setup_true_lang.9b09555f.js";const E=n({__name:"tm-grid",props:u(i({},G),{round:{type:Number,default:2},width:{type:Number,default:750},col:{type:Number,default:5},showBorder:{type:Boolean,default:!1},color:{type:String,default:"white"},transprent:{type:Boolean,default:!1}}),setup(e,{expose:t}){const r=e;s("tmuiSysInfo",p((()=>({bottom:0,height:750,width:v(750),top:0,isCustomHeader:!1,sysinfo:null}))));let o=c([]);const l=p((()=>Math.ceil(r.width/r.col-1)));function a(){let e=o.value.length;o.value=o.value.map(((t,o)=>{let l=o+1;return l<=r.col?(t.type=4,(l==e&&1==e||1==l)&&(t.type=1)):l%r.col==1?t.type=3:t.type=2,t}))}return b("tmGridItemWidth",l.value+(r.showBorder?1:0)),b("tmGridshowBorder",p((()=>r.showBorder))),b("tmGridshowCachList",p((()=>o.value))),t({pushKey:function(e){let t=o.value.findIndex((t=>t.id==e.id));-1==t?o.value.push(e):o.value.splice(t,1,e),a()},delKey:function(e){o.value.findIndex((t=>t.id==e.id)),a()},keyName:"tmGrid"}),(e,t)=>(f(),m(K,{round:r.round,width:r.width,transprent:r.transprent,color:r.color,margin:[0,0],padding:[0,0],_class:"flex flex-row flex-row-top-start",contStyle:"flex-wrap:wrap;"},{default:x((()=>[h(e.$slots,"default")])),_:3},8,["round","width","transprent","color"]))}}),L=n({__name:"tm-grid-item",props:u(i({},G),{height:{type:Number,default:100},transprent:{type:Boolean,default:!0},dot:{type:[Boolean,String],default:!1},icon:{type:[String],default:""},count:{type:[Number,String],default:0},maxCount:{type:[Number,String],default:999},bgColor:{type:String,default:"white"},color:{type:String,default:"red"},url:{type:String,default:""}}),emits:["click"],setup(e,{emit:t}){var r,o,l;const a=e,d=I(),n=null!=(o=null==(r=B())?void 0:r.proxy)?o:null,b=p((()=>d.tmStore)),v=p((()=>k(a,b.value))),G=p((()=>z(u(i({},a),{color:a.bgColor}),v.value,b.value))),E=s("tmGridItemWidth",0),L=s("tmGridshowBorder",p((()=>!1))),M=s("tmGridshowCachList",p((()=>[]))),W=c({id:uni.$tm.u.getUid(1),type:""});let D=null==n?void 0:n.$parent;for(;D&&"tmGrid"!=(null==D?void 0:D.keyName)&&D;)D=null!=(l=null==D?void 0:D.$parent)?l:void 0;y((()=>{(null==D?void 0:D.pushKey)&&D.pushKey(W.value)})),g((()=>{D.delKey(W.value)}));let H=c(`width:${E}'rpx'`);function J(e){if(t("click",e),""!==a.url)try{C({url:a.url})}catch(r){}}return w([M,L],(()=>{O((()=>function(){let e=M.value.filter((e=>e.id==W.value.id));1==e.length&&(W.value=e[0]);if(!L.value)return void(H.value=`box-sizing: border-box;border:0rpx solid rgba(0,0,0,0);width:${E}rpx`);1==W.value.type&&(H.value=`box-sizing: border-box;border:1rpx solid ${G.value.border};width:${E-1}rpx`);2==W.value.type&&(H.value=`box-sizing: border-box;border-bottom:1rpx solid ${G.value.border};border-right:1rpx solid ${G.value.border};border-left:1rpx solid rgba(0,0,0,0);border-top:1rpx solid rgba(0,0,0,0);width:${E-1}rpx`);3==W.value.type&&(H.value=`box-sizing: border-box;border-top:1rpx solid rgba(0,0,0,0);border-bottom:1rpx solid ${G.value.border};border-right:1rpx solid ${G.value.border};border-left:1rpx solid ${G.value.border};width:${E-1}rpx`);4==W.value.type&&(H.value=`box-sizing: border-box;border-left:1rpx solid rgba(0,0,0,0);border-bottom:1rpx solid ${G.value.border};border-top:1rpx solid ${G.value.border};border-right:1rpx solid ${G.value.border};width:${E-1}rpx`)}()))}),{deep:!0}),(e,t)=>{const r=N;return f(),m(r,{style:j(S(H))},{default:x((()=>[$(K,{color:a.bgColor,text:a.text,border:0,"hover-class":"opacity-6",transprent:a.transprent,height:a.height,width:S(E)-.5,margin:[0,0],padding:[0,0],_class:"flex-col flex",onClick:J},{default:x((()=>[$(r,{class:"flex-1 flex flex-col-center-center"},{default:x((()=>[$(P,{top:0,userInteractionEnabled:!0,fontSize:20,dot:a.dot,count:a.count,"max-count":a.maxCount,icon:a.icon,color:a.color},{default:x((()=>[$(r,{class:_(["flex-col flex-col-center-center flex px-10 my-5",[a.dot?"":"py-5 "]])},{default:x((()=>[h(e.$slots,"default")])),_:3},8,["class"])])),_:3},8,["dot","count","max-count","icon","color"])])),_:3})])),_:3},8,["color","text","transprent","height","width"])])),_:3},8,["style"])}}});export{E as _,L as a};
