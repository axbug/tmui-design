var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,d=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{d as n,r as s,c as u,Q as f,o as i,a as m,w as Y,b as c,U as p,j as D,e as y,f as M,u as b,F as w,i as v,N as h}from"./index-6b165856.js";import{c as k,t as g}from"./tm-app.d6cf2f93.js";import{t as x}from"./tm-sheet.3639b36a.js";import{t as O}from"./tm-text.6c910eb0.js";import{t as j}from"./tm-icon.65b53dc0.js";import{i as V,d as _}from"./index.1a9a795c.js";import{i as N}from"./index.758a781a.js";const C=n({__name:"tm-weekbar",props:(S=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&d(e,t,a[t]);if(o)for(var t of o(a))r.call(a,t)&&d(e,t,a[t]);return e})({},k),I={padding:{type:Array,default:[12,24]},margin:{type:Array,default:[32,32]},followTheme:{type:[Boolean,String],default:!0},transprent:{type:Boolean,default:!1},round:{type:Number,default:3},shadow:{type:Number,default:3},defaultValue:{type:[String,Date,Number],default:()=>""},modelValue:{type:[String,Date,Number],default:()=>""},color:{type:String,default:"white"},activeColor:{type:String,default:"primary"},model:{type:String,default:"week"},dayNumber:{type:Number,default:4},showArrow:{type:Boolean,default:!0}},a(S,t(I))),emits:["change","update:modelValue"],setup(e,{emit:a}){const t=e,o=_;o.extend(N),o.extend(V);const l=s(o(t.defaultValue).isValid()?o(t.defaultValue).format("YYYY-MM-DD"):o().format("YYYY-MM-DD")),r=s(S("now",l.value)),d=u((()=>function(e,a){let t=[],l=[],r=o(a),d=o(e);for(;d.isSameOrBefore(r);){t.push({date:d.format("YYYY-MM-DD"),str:d.format("MM/DD")});let e=d.get("day")||0;d.isSame(o(),"date")?l.push("今天"):l.push(k[e]),d=d.add(1,"day")}return n.value=l,t}(r.value[0],r.value[1]))),n=s(["周一","周二","周三","周四","周五","周六","周日"]),k={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"};function g(){r.value=S("next")}function C(){r.value=S("prev")}function S(e="next",a=""){let d=o(l.value);if("next"==e){if("custom"==t.model){let e=d.add(1,"day");return l.value=e.format("YYYY-MM-DD"),[e.format("YYYY-MM-DD"),e.add(t.dayNumber-1,"day").format("YYYY-MM-DD")]}{let e=o(r.value[1]).add(1,"week");return[e.startOf("isoWeek").format("YYYY-MM-DD"),e.format("YYYY-MM-DD")]}}if("prev"==e){if("custom"==t.model){let e=d.subtract(1,"day");return l.value=e.format("YYYY-MM-DD"),[e.format("YYYY-MM-DD"),e.add(t.dayNumber-1,"day").format("YYYY-MM-DD")]}{let e=o(r.value[0]).subtract(1,"week");return[e.format("YYYY-MM-DD"),e.endOf("isoWeek").format("YYYY-MM-DD")]}}return"custom"==t.model?o(a).isValid()?[o(a).subtract(2,"day").format("YYYY-MM-DD"),o(a).add(t.dayNumber-3,"day").format("YYYY-MM-DD")]:[o().subtract(1,"day").format("YYYY-MM-DD"),o().add(t.dayNumber-2,"day").format("YYYY-MM-DD")]:o(a).isValid()?[o(a).startOf("isoWeek").format("YYYY-MM-DD"),o(a).endOf("isoWeek").format("YYYY-MM-DD")]:[o().startOf("isoWeek").format("YYYY-MM-DD"),o().endOf("isoWeek").format("YYYY-MM-DD")]}return f((()=>t.modelValue),(()=>{o(t.modelValue).isValid()&&(l.value=o(t.modelValue).format("YYYY-MM-DD"),r.value=S("now",l.value))})),(o,r)=>{const s=v;return i(),m(x,{"follow-dark":t.followDark,"follow-theme":t.followTheme,dark:t.dark,shadow:t.shadow,round:t.round,margin:t.margin,padding:t.padding,color:t.color},{default:Y((()=>[c(s,{class:"flex flex-row flex-row-center-center"},{default:Y((()=>[e.showArrow?(i(),m(s,{key:0,onClick:p(C,["stop"]),class:"opacity-7"},{default:Y((()=>[c(j,{"font-size":28,userInteractionEnabled:!1,name:"tmicon-angle-left"})])),_:1},8,["onClick"])):D("v-if",!0),c(s,{class:"flex-1 flex flex-row",style:{width:"0px"}},{default:Y((()=>[(i(!0),y(w,null,M(b(d),((e,o)=>(i(),m(s,{onClick:p((t=>{return o=e.date,l.value=o,a("update:modelValue",o),void a("change",o);var o}),["stop"]),class:h([[e.date==l.value?"":"opacity-7"],"flex-1 flex flex-col flex-col-center-center"]),key:o},{default:Y((()=>[c(O,{followTheme:!1,color:e.date==l.value?t.activeColor:"",userInteractionEnabled:!1,"font-size":23,label:n.value[o]},null,8,["color","label"]),c(O,{followTheme:!1,color:e.date==l.value?t.activeColor:"",userInteractionEnabled:!1,"font-size":23,label:e.str},null,8,["color","label"])])),_:2},1032,["onClick","class"])))),128))])),_:1}),e.showArrow?(i(),m(s,{key:1,onClick:p(g,["stop"]),class:"opacity-7"},{default:Y((()=>[c(j,{"font-size":28,userInteractionEnabled:!1,name:"tmicon-angle-right"})])),_:1},8,["onClick"])):D("v-if",!0)])),_:1})])),_:1},8,["follow-dark","follow-theme","dark","shadow","round","margin","padding","color"])}}});var S,I;const P=n({__name:"weekbar",setup:e=>(s(""),s(!1),(e,a)=>(i(),m(g,null,{default:Y((()=>[c(x,null,{default:Y((()=>[c(O,{"font-size":24,_class:"font-weight-b",label:"基础示例,更多见文档"})])),_:1}),c(C),c(C,{followTheme:!1,activeColor:"white",color:"red"}),c(C,{followTheme:!1,activeColor:"black",color:"yellow",linear:"bottom"}),c(C,{model:"custom",dayNumber:7})])),_:1})))});export{P as default};
