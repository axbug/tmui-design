import{d as t,P as e,c as o,r as a,M as n,p as l,ax as i,R as s,o as u,a as r,n as p,u as c,w as f,b as d,O as v,N as y,V as h,k as m,aA as g,g as b,L as x,j as w,_ as C}from"./index-5c06cf16.js";import{c as O,u as k,f as N,g as B}from"./tm-app.20954b06.js";const I=C(t({__name:"tm-overlay",props:{...O,align:{type:String,default:"flex-col-center-center"},bgColor:{type:String,default:"rgba(0,0,0,0.24)"},zIndex:{type:[Number,String],default:999},show:{type:Boolean,default:!1},overlayClick:{type:Boolean,default:!0},transprent:{type:[Boolean,String],default:!1},duration:{type:Number,default:300},contentAnimation:{type:Boolean,default:!1},inContent:{type:Boolean,default:!1},teleport:{type:Boolean,default:!0}},emits:["click","open","close","update:show"],setup(t,{expose:C,emit:O}){var I;const T=t,_=k();null==(I=b())||I.proxy;const A=N(T),S=B(T),z=e("tmuiSysInfo",o((()=>({bottom:0,height:750,width:x(750),top:0,isCustomHeader:!1,sysinfo:null})))),j=o((()=>z.value.width)),P=o((()=>z.value.height)),$=o((()=>z.value.top));a(!1),uni.$tm.u.getUid(1);let D=NaN;a(null);const H=a(!1),L=a(!1);n((()=>clearTimeout(D)));const M=o((()=>T.align)),R=o((()=>!T.bgColor||T.transprent?"rgba(0,0,0,0)":T.bgColor||"rgba(0,0,0,0.24)")),U=a(T.inContent),V=a(!1);let q=!1;function E(t){try{t.stopPropagation(),t.stopImmediatePropagation()}catch(e){}O("click",t),D&&(clearTimeout(D),D=NaN),T.overlayClick&&F(!1)}function F(t){1==t&&i(),function(t=!1){if(H.value==t)return;!function(t,e=500,o=!0){o?q||(q=!0,"function"==typeof t&&t(),setTimeout((()=>{q=!1}),e)):q||(q=!0,setTimeout((()=>{q=!1,"function"==typeof t&&t()}),e))}((function(){0==t?(L.value=!1,setTimeout((function(){H.value=t,O("close"),O("update:show",!1)}),T.duration+10)):(H.value=!0,setTimeout((function(){L.value=!0}),10),O("open"),setTimeout((function(){O("update:show",!0)}),T.duration))}),T.duration+10,!0)}(t)}return l((()=>{T.show&&F(T.show)})),s((()=>T.show),(t=>{F(t)})),C({close:function(){D&&(clearTimeout(D),D=NaN),F(!1)},open:F}),(e,o)=>{const a=w;return u(),r(g,{to:"body",disabled:!T.teleport},[H.value?(u(),r(a,{key:0,class:"l-0 t-0",style:p([U.value&&!V.value?{width:"100%",height:"100%",top:"0px",position:"absolute"}:{width:c(j)+"px",height:c(P)+"px",top:c($)+"px",position:"fixed"},t.zIndex?{zIndex:t.zIndex}:""])},{default:f((()=>{var t,o;return[d(a,{ref:"overlay",class:v([c(R)&&!T.transprent&&L.value?"blurOnOpacity":"blurOffOpacity","overlay",(null==(t=c(_).tmuiConfig)?void 0:t.themeConfig.overflowBlur)&&c(R)&&!T.transprent&&L.value?"blurOn":"",(null==(o=c(_).tmuiConfig)?void 0:o.themeConfig.overflowBlur)&&c(R)&&!T.transprent&&!L.value?"blurOff":""]),style:p([c(R)&&!T.transprent?{backgroundColor:H.value?c(R):""}:"",U.value&&!V.value?{width:"100%",height:"100%"}:{width:c(j)+"px",height:c(P)+"px"},{transitionDuration:T.duration+"ms"}])},null,8,["class","style"]),d(a,{onClick:h(E,["stop"]),class:v([c(M)," absolute flex flex-col  l-0 t-0 ",c(S),T.contentAnimation?"overlay":"",T.contentAnimation&&L.value?"blurOnOpacity ":"",T.contentAnimation&&!L.value?"blurOffOpacity overlay":""]),style:p([U.value&&!V.value?{width:"100%",height:"100%",top:"0px"}:{width:c(j)+"px",height:c(P)+"px"},c(A)])},{default:f((()=>[y(e.$slots,"default",{},void 0,!0)])),_:3},8,["onClick","class","style"])]})),_:3},8,["style"])):m("v-if",!0)],8,["disabled"])}}}),[["__scopeId","data-v-726f7ea2"]]);export{I as t};
