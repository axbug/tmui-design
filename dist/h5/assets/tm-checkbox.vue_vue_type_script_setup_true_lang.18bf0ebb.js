var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;import{d as i,r as u,O as s,c as d,Q as f,o as c,a as m,w as p,b as v,u as y,j as h,M as b,N as k,g as x,q as w,t as g,v as z,i as B}from"./index-6b165856.js";import{t as C}from"./tm-sheet.3639b36a.js";import{t as S}from"./tm-icon.65b53dc0.js";import{t as j}from"./tm-text.6c910eb0.js";import{t as _}from"./tm-translate.1f1c80c0.js";import{c as O}from"./tm-app.d6cf2f93.js";const V=i({__name:"tm-checkbox",props:(D=((e,t)=>{for(var l in t||(t={}))o.call(t,l)&&r(e,l,t[l]);if(a)for(var l of a(t))n.call(t,l)&&r(e,l,t[l]);return e})({},O),P={followTheme:{type:[Boolean,String],default:!0},size:{type:Number,default:42},custom:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},transprent:{type:Boolean,default:!1},round:{type:Number,default:2},border:{type:Number,default:2},value:{type:[String,Number,Boolean],default:!0},modelValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number],default:""},defaultChecked:{type:[Boolean],default:!1},beforChecked:{type:[Function,String,Boolean],default:()=>!1},disabled:{type:Boolean,default:!1},fontSize:{type:Number,default:28},indeterminate:{type:[Boolean,String],default:!1},closeAni:{type:[Boolean,String],default:!0},icon:{type:String,default:"tmicon-check"},disabledClass:{type:String,default:"opacity-5"},margin:{type:Array,default:()=>[16,8]}},t(D,l(P))),emits:["update:modelValue","change","click"],setup(e,{expose:t,emit:l}){var a,o,n,r;const i=e;u(null);const O=null!=(o=null==(a=x())?void 0:a.proxy)?o:null,V=u(null!=(n=i.defaultChecked)&&n),D=s("tmCheckedBoxVal",d((()=>[]))),P=s("tmCheckedBoxDisabled",d((()=>!1))),N=s("tmCheckedBoxMax",d((()=>!1))),A=s("tmCheckedBoxDir",d((()=>"row"))),I=d((()=>i.disabled||P.value));function T(e){let t=!1,l=void 0===e?D.value:e;return i.modelValue===i.value&&void 0!==i.value&&""!==i.value&&""!==i.modelValue&&(t=!0),l.includes(i.value)&&(t=!0),t}function E(){return e=this,t=null,a=function*(){if(l("click"),!I.value)if(!N.value||V.value){if("function"==typeof i.beforChecked){g({title:"...",mask:!0});let e=yield i.beforChecked();if("function"==typeof e&&(e=yield e()),z(),!e)return}V.value=!V.value,V.value?(l("update:modelValue",i.value),K&&K.addKey(i.value)):(l("update:modelValue",!1),K&&K.delKey(i.value)),l("change",V.value)}else w({title:"超最大选择",icon:"error"})},new Promise(((l,o)=>{var n=e=>{try{i(a.next(e))}catch(t){o(t)}},r=e=>{try{i(a.throw(e))}catch(t){o(t)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,r);i((a=a.apply(e,t)).next())}));var e,t,a}T()&&(V.value=!0,l("update:modelValue",i.value)),f([()=>i.modelValue,()=>i.value,()=>D.value],(()=>{V.value=T()}),{deep:!0}),D.value;let K=null==O?void 0:O.$parent;for(;K&&"tmCheckBoxGroup"!=(null==K?void 0:K.checkBoxkeyId)&&K;)K=null!=(r=null==K?void 0:K.$parent)?r:void 0;return K&&K.pushKey(i.value),t({hanlerClick:E}),(e,t)=>{const l=B;return c(),m(l,{class:k(["flex",[y(I)?i.disabledClass:"","row"==y(A)?"flex-row":"","customCol"==y(A)?"flex-1":""]])},{default:p((()=>[v(l,{onClick:E,class:"flex flex-row flex-row-center-start flex-1"},{default:p((()=>[i.custom?(c(),m(C,{key:0,parenClass:"flex-shrink",class:"flex-shrink",eventPenetrationEnabled:!0,linear:i.linear,linearDeep:i.linearDeep,followTheme:i.followTheme,followDark:i.followDark,dark:i.dark,shadow:i.shadow,width:i.size,height:i.size,text:(!i.indeterminate&&!V.value||y(I))&&!i.outlined,border:i.border,borderStyle:i.borderStyle,transprent:i.transprent,padding:[0,0],margin:i.margin,color:y(I)?"white":i.color,round:i.round,_class:"flex-row flex-row-center-center",outlined:i.outlined,_style:"transition:background-color 0.24s"},{default:p((()=>[i.closeAni?h("v-if",!0):(c(),m(l,{key:0},{default:p((()=>[V.value&&!i.indeterminate?(c(),m(_,{key:0,duration:100,name:"zoom",style:{"line-height":"1"}},{default:p((()=>[v(S,{"font-size":.6*i.size,name:i.icon},null,8,["font-size","name"])])),_:1})):h("v-if",!0),i.indeterminate?(c(),m(_,{key:1,duration:100,name:"zoom",style:{"line-height":"1"}},{default:p((()=>[v(S,{"font-size":.6*i.size,name:"tmicon-minus"},null,8,["font-size"])])),_:1})):h("v-if",!0)])),_:1})),i.closeAni?(c(),m(l,{key:1},{default:p((()=>[V.value&&!i.indeterminate?(c(),m(S,{key:0,"font-size":.6*i.size,name:i.icon},null,8,["font-size","name"])):h("v-if",!0),i.indeterminate?(c(),m(S,{key:1,"font-size":.6*i.size,name:"tmicon-minus"},null,8,["font-size"])):h("v-if",!0)])),_:1})):h("v-if",!0)])),_:1},8,["linear","linearDeep","followTheme","followDark","dark","shadow","width","height","text","border","borderStyle","transprent","margin","color","round","outlined"])):h("v-if",!0),v(l,{class:"flex-1"},{default:p((()=>[b(e.$slots,"default",{checked:{checked:V.value}},(()=>[v(j,{userInteractionEnabled:!1,"font-size":i.fontSize,label:i.label},null,8,["font-size","label"])]))])),_:3})])),_:3})])),_:3},8,["class"])}}});var D,P;export{V as _};
