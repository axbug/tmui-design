import{d as e,c as l,r as a,R as o,o as t,a as r,w as u,e as s,f as n,u as c,F as d,N as f,k as i,V as m,g as p,j as y,O as v,b,_ as g}from"./index-5c06cf16.js";import{t as k}from"./tm-icon.5716c798.js";import{c as V,u as w,d as _}from"./tm-app.20954b06.js";import{t as N}from"./tm-text.fdd4f0a8.js";const h=g(e({__name:"tm-rate",props:{...V,count:{type:Number,default:5},modelValue:{type:Number,default:0},defaultValue:{type:Number,default:0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:"tmicon-collection-fill"},size:{type:Number,default:42},color:{type:[Array,String],default:"orange"},gutter:{type:Number,default:16},followTheme:{type:[Boolean,String],default:!0},dark:{type:[Boolean,String],default:!1},followDark:{type:[Boolean,String],default:!0},label:{type:String,default:""},showLabel:{type:Boolean,default:!1}},emits:["click","change","update:modelValue"],setup(e,{emit:g}){var V;const h=e,x=w();null==(V=p())||V.proxy;let S=NaN;const B=l((()=>h.count)),j=a(h.defaultValue),z=l((()=>x.tmStore)),A=l((()=>_(h,z.value))),T=l((()=>h.followTheme&&z.value.color?z.value.color:"string"==typeof h.color?h.color:Array.isArray(h.color)?h.color[j.value-1]?h.color[j.value-1]:h.color[h.color.length-1]:"grey-2")),C=a(!1),I=l((()=>""!=h.label?h.label:j.value+".0"));return o((()=>h.modelValue),(()=>{let e=h.modelValue>=B.value?B.value:h.modelValue;j.value=e<=0?0:e})),(l,a)=>{const o=y;return t(),r(o,{class:"flex flex-row flex-row-center-start",onClick:a[0]||(a[0]=m((()=>{}),["stop"]))},{default:u((()=>[(t(!0),s(d,null,n(c(B),((l,a)=>(t(),r(o,{key:l,class:v([`pr-${e.gutter}`,h.disabled?"opacity-6":""])},{default:u((()=>[b(o,{class:v([C.value&&a==j.value-1?"rateOn":""])},{default:u((()=>[b(k,{ref_for:!0,ref:"nvueElAni","follow-dark":!1,color:l<=j.value?c(T):"grey-2",onClick:e=>function(e){h.disabled||(h.readonly?g("click",e-1):(j.value=e,g("change",j.value),g("update:modelValue",j.value),g("click",e-1),C.value=!1,clearTimeout(S),S=setTimeout((()=>{C.value=!0}),50)))}(l),"font-size":h.size,name:h.icon},null,8,["color","onClick","font-size","name"])])),_:2},1032,["class"])])),_:2},1032,["class"])))),128)),f(l.$slots,"default",{},(()=>[e.showLabel?(t(),r(N,{key:0,dark:c(A),color:c(T),label:c(I)},null,8,["dark","color","label"])):i("v-if",!0)]),!0)])),_:3})}}}),[["__scopeId","data-v-feff537f"]]);export{h as t};
