var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,i=(e,t)=>{for(var l in t||(t={}))o.call(t,l)&&r(e,l,t[l]);if(a)for(var l of a(t))n.call(t,l)&&r(e,l,t[l]);return e},u=(e,a)=>t(e,l(a));import{d as c,H as d,c as s,r as p,at as f,Q as v,o as m,a as b,w as y,j as h,b as x,u as g,n as w,M as S,K as _,i as T,_ as C,O as k,L as I,N as z,g as j,k as N}from"./index-6b165856.js";import{c as B,u as D,t as O}from"./tm-app.d6cf2f93.js";import{t as P}from"./tm-sheet.3639b36a.js";import{t as $}from"./tm-text.6c910eb0.js";import{_ as U}from"./tm-badge.vue_vue_type_script_setup_true_lang.9b09555f.js";import{t as A}from"./tm-icon.65b53dc0.js";const K=C(c({__name:"tm-tabbar",props:u(i({},B),{transprent:{type:[Boolean],default:!1},color:{type:[String],default:"white"},text:{type:[Boolean],default:!1},round:{type:[Number],default:0},shadow:{type:[Number],default:0},width:{type:[Number],default:0},bottom:{type:[Number],default:0},showSafe:{type:[Boolean],default:!1},active:{type:Number,default:-1},autoSelect:{type:Boolean,default:!0},zIndex:{type:[Number],default:200}}),emits:["change","update:active"],setup(e,{expose:t,emit:l}){var a,o;const n=e;D();let r=d();const i=s((()=>_(n.width)||(null==r?void 0:r.windowWidth)||750)),u=s((()=>n.blur)),c=p(""),C=p(""),k=p([]),I=p(n.showSafe),z=p(n.active);(null!=(o=null==(a=null==r?void 0:r.safeAreaInsets)?void 0:a.bottom)?o:0)>0&&(I.value=!0);const j=s((()=>I.value?90:75)),N=s((()=>I.value?75:60));return t({tmTabbarId:"tmTabbarId",setNowurl:function(e,t){c.value=e,C.value=String(t)},pushKey:function(e){k.value=[...new Set([...k.value,e])]},delKey:function(e){k.value=k.value.filter((t=>t!=e))}}),f("tmTabbarUrl",s((()=>c.value))),f("tmTabbarUid",s((()=>C.value))),f("tmTabbarWidth",s((()=>Math.ceil(i/k.value.length)))),f("tmTabbarItemList",s((()=>k.value))),f("tmTabbarItemActive",s((()=>z.value))),f("tmTabbarItemSafe",I.value),f("tmTabbarItemAutoSelect",s((()=>n.autoSelect))),v((()=>n.active),(()=>{n.active!=z.value&&(z.value=n.active)})),v(z,(()=>{l("change",z.value),l("update:active",z.value)})),(e,t)=>{const l=T;return m(),b(l,{class:"fixed l-0 b-0 flex tabbar",style:w({width:g(i)+"px",height:g(j)+"px",transform:`translateY(${n.bottom}rpx)`,zIndex:n.zIndex})},{default:y((()=>[h(" \t\t\t@click=\"emits('click', $event)\"    "),x(l,{class:"relative",style:{top:"15px"}},{default:y((()=>[x(P,{blur:g(u),color:n.color,parenClass:"relative",class:"relative",followTheme:n.followTheme,dark:n.dark,round:n.round,shadow:n.shadow,outlined:n.outlined,border:0,borderDirection:"top",text:n.text,transprent:!1,linear:n.linear,linearDeep:n.linearDeep,margin:[0,0],padding:[0,0],height:g(N),width:g(i),unit:"px"},null,8,["blur","color","followTheme","dark","round","shadow","outlined","text","linear","linearDeep","height","width"])])),_:1}),x(l,{class:"absolute flex flex-col l-0",style:w({width:g(i)+"px",height:g(j)+"px"})},{default:y((()=>[x(l,{class:"relative barcont flex flex-row flex-row-top-center flex-around flex-1",style:w({width:g(i)+"px"})},{default:y((()=>[S(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["style"])])),_:3},8,["style"])}}}),[["__scopeId","data-v-3592a317"]]),L=C(c({__name:"tm-tabbar-item",props:u(i({},B),{followTheme:{type:[Boolean,String],default:!0},transprent:{type:Boolean,default:!0},color:{type:String,default:"white"},fontColor:{type:String,default:"grey-darken-1"},linear:{type:String,default:""},activeColor:{type:String,default:"primary"},active:{type:Boolean,default:!1},btnTop:{type:Boolean,default:!1},text:{type:String,default:""},icon:{type:String,default:""},unicon:{type:String,default:""},textSize:{type:Number,default:20},iconSize:{type:Number,default:38},dot:{type:[Boolean],default:!1},dotColor:{type:[String],default:"red"},dotIcon:{type:[String],default:""},count:{type:[Number,String],default:0},maxCount:{type:[Number],default:99},url:{type:[String],default:""},openType:{type:String,default:"navigate"},beforeClick:{type:[Function,Boolean],default:()=>!1},load:{type:[Boolean,String],default:!1},data:{type:[Object,String,Number],default:()=>{}},disabled:{type:Boolean,default:!1},customicon:{type:Boolean,default:!1}}),emits:["click","beforeClick"],setup(e,{emit:t}){var l,a,o;const n=e,r=D(),i=null!=(a=null==(l=j())?void 0:l.proxy)?a:null,u=s((()=>n.btnTop)),c=s((()=>!0!==u.value)),d=s((()=>!0!==u.value?"top:15px":"top:0px")),f=s((()=>[0,0])),w=s((()=>n.disabled)),_=p(n.load),C=p(!1),B=s((()=>({dotColor:n.dotColor,text:n.text,icon:n.icon,textSize:n.textSize,iconSize:n.iconSize,unicon:n.unicon}))),O=uni.$tm.u.getUid(1),K=k("tmTabbarWidth",s((()=>50))),L=s((()=>!0===u.value?60:K.value));k("tmTabbarUrl",s((()=>"")));const W=k("tmTabbarItemList",s((()=>[]))),E=k("tmTabbarUid",s((()=>"")));k("tmTabbarItemSafe",!1);const H=k("tmTabbarItemActive",s((()=>-1))),M=k("tmTabbarItemAutoSelect",s((()=>!1))),F=s((()=>!0!==C.value||u.value?n.fontColor:r.tmStore.color&&n.followTheme?r.tmStore.color:n.activeColor));let J=null==i?void 0:i.$parent;for(;J&&"tmTabbarId"!=(null==J?void 0:J.tmTabbarId)&&J;)J=null!=(o=null==J?void 0:J.$parent)?o:void 0;function Q(){E.value==O?C.value=!0:C.value=!1}function V(){return e=this,l=null,a=function*(){if(!_.value&&!w.value){if("function"==typeof n.beforeClick){_.value=!0;let e=yield n.beforeClick(n.data);if("function"==typeof e&&(e=yield e(n.data)),_.value=!1,!e)return}t("click"),N((()=>{M.value&&(J&&J.setNowurl(n.url,O),Q()),""!=n.url&&uni.$tm.u.routerTo(n.url,n.openType)}))}},new Promise(((t,o)=>{var n=e=>{try{i(a.next(e))}catch(t){o(t)}},r=e=>{try{i(a.throw(e))}catch(t){o(t)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,r);i((a=a.apply(e,l)).next())}));var e,l,a}return J&&J.pushKey(O),I((()=>{J&&J.delKey(O)})),M.value?C.value=n.active||!1:W.value[H.value]==O?C.value=!0:C.value=!1,v([E,()=>n.active],(()=>{M.value&&Q()})),v(H,(()=>{M.value||(W.value[H.value]==O?N((()=>{C.value=!0})):N((()=>{C.value=!1})))})),v([()=>n.load],(()=>{_.value=n.load})),(e,t)=>{const l=T;return m(),b(l,{class:"flex flex-col flex-col-top-center",style:{height:"75px"}},{default:y((()=>[x(P,{height:60,width:g(L),round:24,unit:"px",_class:"flex-center flex ",parenClass:"relative",class:"relative",_style:g(d),followTheme:g(u)&&n.followTheme,transprent:g(c),color:n.color,margin:[0,0],padding:g(f),shadow:n.shadow,outlined:n.outlined,border:n.border,borderStyle:n.borderStyle,borderDirection:n.borderDirection,linear:n.linear,linearDeep:n.linearDeep,onClick:V},{default:y((()=>[x(U,{fontSize:20,color:g(B).dotColor,eventPenetrationEnabled:!0,dot:n.dot,count:n.count,icon:n.dotIcon,maxCount:n.maxCount},{default:y((()=>[x(l,{class:z([[C.value?"anifun":""],"flex flex-col flex-col-center-center"]),style:{width:"65px",height:"30px"}},{default:y((()=>[S(e.$slots,"default",{},(()=>[_.value?h("v-if",!0):(m(),b(A,{key:0,customicon:n.customicon,_style:"line-height: 0px;",color:g(F),"font-size":g(B).iconSize,name:C.value?g(B).icon:g(B).unicon||g(B).icon},null,8,["customicon","color","font-size","name"]))]),!0),_.value?(m(),b(A,{key:0,spin:"",_style:"line-height: 0px;",color:g(F),"font-size":g(B).iconSize,name:"tmicon-shuaxin"},null,8,["color","font-size"])):h("v-if",!0)])),_:3},8,["class"])])),_:3},8,["color","dot","count","icon","maxCount"]),""!==g(B).text?(m(),b($,{key:0,color:g(F),_class:"pb-0","font-size":g(B).textSize,label:g(B).text},null,8,["color","font-size","label"])):h("v-if",!0)])),_:3},8,["width","_style","followTheme","transprent","color","padding","shadow","outlined","border","borderStyle","borderDirection","linear","linearDeep"])])),_:3})}}}),[["__scopeId","data-v-07282cf5"]]),W=c({__name:"tabbar",setup(e){const t=p(1);function l(e){return new Promise((t=>{setTimeout((function(){console.log("选中了：",e),t(!0)}),2e3)}))}return(e,a)=>(m(),b(O,null,{default:y((()=>[x(P,null,{default:y((()=>[x($,{label:"点击中间+按钮可以体验异步加载动态效果."})])),_:1}),x(K,{autoSelect:!1,active:t.value,"onUpdate:active":a[5]||(a[5]=e=>t.value=e)},{default:y((()=>[x(L,{onClick:a[0]||(a[0]=e=>t.value=0),activeColor:"orange",count:"HOT","open-type":"reLaunch",text:"首页",icon:"tmicon-collection-fill"}),x(L,{onClick:a[1]||(a[1]=e=>t.value=1),activeColor:"orange",text:"表单",icon:"tmicon-cog-fill"}),x(L,{onClick:a[2]||(a[2]=e=>t.value=2),shadow:2,beforeClick:l,data:"中间项","btn-top":"",fontColor:"white",activeColor:"white",linear:"top",linearDeep:"accent",color:"yellow",icon:"tmicon-plus"}),x(L,{onClick:a[3]||(a[3]=e=>t.value=3),activeColor:"orange",url:"/pages/fankui/index",text:"反馈分类",unicon:"tmicon-like",icon:"tmicon-heart-fill"}),x(L,{onClick:a[4]||(a[4]=e=>t.value=4),activeColor:"orange",count:8,url:"/pages/chart/index",active:"",text:"图表中心",unicon:"tmicon-account",icon:"tmicon-userplus-fill"})])),_:1},8,["active"])])),_:1}))}});export{W as default};
