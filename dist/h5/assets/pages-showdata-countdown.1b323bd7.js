import{d as e,r as t,c as a,Q as l,m as r,o,a as n,w as s,M as u,b as i,u as c,i as f}from"./index-6b165856.js";import{t as m}from"./tm-app.d6cf2f93.js";import{t as d}from"./tm-sheet.3639b36a.js";import{t as p}from"./tm-text.6c910eb0.js";import{_ as v}from"./tm-divider.vue_vue_type_script_setup_true_lang.cbbfcb4c.js";import{t as g}from"./tm-button.80fc9b3b.js";import"./tm-icon.65b53dc0.js";const _=e({__name:"tm-countdown",props:{time:{type:Number,default:1e4},format:{type:String,default:"DD天HH小时MM分SS秒MS毫秒"},autoStart:{type:Boolean,default:!0},color:{type:String,default:""}},emits:["start","end","change"],setup(e,{expose:m,emit:d}){const v=e;let g,_=t(0),S=a((()=>b(v.time-_.value)));const h=t(!0);l((()=>_.value),(()=>{_.value!=v.time&&0!==_.value||(h.value=!0)}));const M=a((()=>{let e=v.format;return e=e.replace(/(DD)/g,String(S.value.day)),e=e.replace(/(MM)/g,String(S.value.minutes)),e=e.replace(/(HH)/g,String(S.value.hour)),e=e.replace(/(SS)/g,String(S.value.seconds)),e=e.replace(/(MS)/g,String(S.value.millisecond)),e}));function b(e){var t=Math.floor(e/1e3/60/60/24),a=Math.floor(e/1e3/60/60%24),l=Math.floor(e/1e3/60%60),r=Math.floor(e/1e3%60),o=Math.floor(e%1e3);return{day:t>9?t:"0"+t,hour:a>9?a:"0"+a,minutes:l>9?l:"0"+l,seconds:r>9?r:"0"+r,millisecond:o>9?o:"00"+o}}function x(){clearInterval(g),d("start"),g=setInterval((()=>{let e=_.value+50;if(e>v.time)return clearInterval(g),h.value=!0,void d("end");h.value=!1,_.value=e,d("change",S)}),50)}return r((()=>{b(v.time),v.autoStart&&x()})),m({finish:h,start:x,stop:function(){clearInterval(g),_.value=v.time,d("end")},pause:function(){clearInterval(g)},resinit:function(){clearInterval(g),_.value=0,h.value=!0}}),(e,t)=>{const a=f;return o(),n(a,{class:"flex flex-row"},{default:s((()=>[u(e.$slots,"default",{data:{data:c(S),finish:h.value}},(()=>[i(p,{color:v.color,label:c(M)},null,8,["color","label"])]))])),_:3})}}}),S=e({__name:"countdown",setup(e){const a=t(null);function l(e){a.value[e]()}return(e,t)=>{const r=f;return o(),n(m,null,{default:s((()=>[i(d,null,{default:s((()=>[i(p,{"font-size":24,_class:"font-weight-b",label:"基础示例,默认是精确到毫秒级"}),i(v),i(r,null,{default:s((()=>[i(_,{ref_key:"cu",ref:a,autoStart:!1},null,512)])),_:1}),i(r,{class:"mt-32 flex flex-row flex-around"},{default:s((()=>[i(g,{onClick:t[0]||(t[0]=e=>l("resinit")),size:"small",label:"重置"}),i(g,{onClick:t[1]||(t[1]=e=>l("start")),size:"small",width:140,"font-size":22,label:"开始/继续",color:"green"}),i(g,{onClick:t[2]||(t[2]=e=>l("pause")),size:"small",label:"暂停",color:"orange"}),i(g,{onClick:t[3]||(t[3]=e=>l("stop")),size:"small",label:"结束",color:"red"})])),_:1})])),_:1})])),_:1})}}});export{S as default};
