var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;import{d as s,r as i,at as c,c as u,o as f,a as d,w as p,M as m,i as v,_ as g,O as y,ad as h,m as b,az as _,K as w,b as x,n as k,u as I,j as C,N as S,g as D,e as z,f as j,F as N,X as K}from"./index-6b165856.js";import{c as O,t as P}from"./tm-app.d6cf2f93.js";import{t as H}from"./tm-sheet.3639b36a.js";import{t as $}from"./tm-text.6c910eb0.js";import{t as A}from"./tm-icon.65b53dc0.js";import{_ as T}from"./tm-image.vue_vue_type_script_setup_true_lang.b0e5c126.js";import"./tm-translate.1f1c80c0.js";const B=g(s({__name:"tm-collapse",props:{activeKey:{type:[Array],default:()=>[]},defaultActiveKey:{type:[Array],default:()=>[]},accordion:{type:[Boolean,String],default:!1},border:{type:[Number,String],default:2},iconPos:{type:String,default:"left"},openIcon:{type:String,default:"tmicon-angle-up"},closeIcon:{type:String,default:"tmicon-angle-down"}},emits:["change","update:active-key"],setup(e,{expose:t,emit:l}){const a=e,o=i([...a.activeKey,...a.defaultActiveKey]);a.accordion&&o.value.length>0&&(o.value=[o.value[0]]);const n=i([]);return l("update:active-key",o.value),t({tmCollapse:"tmCollapse",setKey:function(e){let t=o.value.findIndex((t=>String(t)==String(e)));a.accordion?o.value=t>-1?[]:[e]:t>-1?o.value.splice(t,1):o.value.push(e),l("update:active-key",o.value),l("change",o.value)},pushKey:function(e){n.value=[...new Set([...n.value,e])]},border:a.border}),c("tmCollapseKeyList",u((()=>o.value))),c("tmCollapseIconPos",u((()=>a.iconPos))),c("tmCollapseopenIcon",u((()=>a.openIcon))),c("tmCollapsecloseIcon",u((()=>a.closeIcon))),(e,t)=>{const l=v;return f(),d(l,{class:"col",style:{"box-sizing":"border-box"}},{default:p((()=>[m(e.$slots,"default",{},void 0,!0)])),_:3})}}}),[["__scopeId","data-v-d42a81bf"]]),E=s({__name:"tm-collapse-item",props:(L=((e,t)=>{for(var l in t||(t={}))o.call(t,l)&&r(e,l,t[l]);if(a)for(var l of a(t))n.call(t,l)&&r(e,l,t[l]);return e})({},O),J={transprent:{type:Boolean,default:!1},color:{type:String,default:"white"},title:{type:String,default:""},titleSize:{type:Number,default:30},height:{type:[Number],default:88},contentHeight:{type:[Number,String],default:0},name:{type:[Number,String],default:""},activeColor:{type:[String],default:"primary"},margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[24,0]},disabled:{type:[Boolean,String],default:!1},leftIcon:{type:[String],default:""},leftIconColor:{type:[String],default:""}},t(L,l(J))),emits:["click"],setup(e,{expose:t,emit:l}){var a,o,n,r;const s=e,c=null!=(o=null==(a=D())?void 0:a.proxy)?o:null,g=y("tmCollapseKeyList",u((()=>[]))),z=y("tmCollapseIconPos",u((()=>"left"))),j=y("tmCollapsecloseIcon",u((()=>"tmicon-caret-right"))),N=y("tmCollapseopenIcon",u((()=>"tmicon-sort-down"))),K=u((()=>s.leftIcon)),O=i(G(s.contentHeight)),P=i(0);i(!1);const T=i(!1);let B=NaN;u((()=>s.contentHeight?"string"==typeof s.contentHeight?s.contentHeight:w(s.contentHeight)+"px":0));let E=null==c?void 0:c.$parent;for(;E&&"tmCollapse"!=(null==E?void 0:E.tmCollapse)&&E;)E=null!=(n=null==E?void 0:E.$parent)?n:void 0;E&&(null==E||E.pushKey(s.name));let L=null==c?void 0:c.$parent;for(;L&&"tmCollapseItem"!=(null==L?void 0:L.tmCollapseItem)&&L;)L=null!=(r=null==L?void 0:L.$parent)?r:void 0;const J=i(s.border?s.border:null==E?void 0:E.border),q=u((()=>g.value.findIndex((e=>e==s.name))>-1)),F=u((()=>s.leftIconColor?s.leftIconColor:""===s.leftIconColor&&""!==s.activeColor&&q.value?s.activeColor:""));function G(e=0,t="rpx"){return e?"string"==typeof e?(e.indexOf("rpx")?P.value=w(Number(e)):P.value=Number(e),e):"rpx"==t?(P.value=w(Number(e)),w(Number(e))+"px"):(P.value=Number(e),Number(e)+"px"):0}function M(e=0){s.contentHeight?O.value=G(s.contentHeight,"rpx"):uni.$tm.u.quereyDom(c,"#contentIds").then((t=>{t&&(O.value=G(t.height+e,"px"))}))}function U(e){l("click",e),s.disabled||null==E||E.setKey(s.name)}return h((()=>{q.value?setTimeout((function(){T.value=!0,M()}),20):T.value=!1,clearTimeout(B),B=setTimeout((function(){L&&(null==L||L.updateHeight())}),60)})),b((()=>{M()})),_((()=>{M()})),t({tmCollapseItem:"tmCollapseItem",updateHeight:M}),(t,l)=>{const a=v;return f(),d(a,{class:S(["flex col overflow",[e.disabled?"opacity-7":""]])},{default:p((()=>[x(H,{transprent:s.transprent,onClick:U,color:s.color,text:e.disabled,border:I(q)?0:J.value,linear:s.linear,linearDeep:s.linearDeep,dark:s.dark,followDark:s.followDark,followTheme:s.followTheme,borderDirection:"bottom",margin:s.margin,padding:s.padding},{default:p((()=>[x(a,{style:k({height:s.height+"rpx"}),userInteractionEnabled:!1,class:"flex-row-center-start flex-row"},{default:p((()=>["left"==I(z)?(f(),d(a,{key:0,class:"pr-16 flex-center"},{default:p((()=>[x(A,{dark:s.dark,followDark:s.followDark,color:I(q)?s.activeColor:"grey-1",name:I(q)?I(N):I(j),"font-size":20},null,8,["dark","followDark","color","name"])])),_:1})):C("v-if",!0),m(t.$slots,"icon",{},(()=>[I(K)?(f(),d(a,{key:0,class:"flex flex-center pr-16"},{default:p((()=>[x(A,{style:{"line-height":"0px"},color:I(F),"font-size":24,name:I(K)},null,8,["color","name"])])),_:1})):C("v-if",!0)]),!0),x(a,{class:"flex flex-1",style:{width:"0px"}},{default:p((()=>[m(t.$slots,"title",{data:{isActive:I(q)}},(()=>[x($,{_class:"",dark:s.dark,followDark:s.followDark,fontSize:s.titleSize,color:I(q)?s.activeColor:"",label:s.title},null,8,["dark","followDark","fontSize","color","label"])]),!0)])),_:3}),m(t.$slots,"rightLabel",{},void 0,!0),"right"==I(z)?(f(),d(a,{key:1,class:"pl-16 flex-center"},{default:p((()=>[x(A,{dark:s.dark,followDark:s.followDark,color:I(q)?s.activeColor:"grey-1",name:I(q)?I(N):I(j),"font-size":20},null,8,["dark","followDark","color","name"])])),_:1})):C("v-if",!0)])),_:3},8,["style"])])),_:3},8,["transprent","color","text","border","linear","linearDeep","dark","followDark","followTheme","margin","padding"]),x(a,{class:"flex overflow content col",style:k([T.value?{height:O.value}:{height:"0px",overflow:"hidden"}])},{default:p((()=>[x(a,{ref:"contentIds",id:"contentIds",class:"flex col flex-1 on"},{default:p((()=>[m(t.$slots,"default",{},void 0,!0)])),_:3},512)])),_:3},8,["style"])])),_:3},8,["class"])}}});var L,J;const q=g(E,[["__scopeId","data-v-b35dacfd"]]),F=s({__name:"collapse",setup(e){const t=i(["https://picsum.photos/200/300?id=43335","https://picsum.photos/200/300?id=433","https://picsum.photos/200/300?id=439","https://picsum.photos/200/300?id=459"]);return(e,l)=>{const a=v,o=K;return f(),d(P,null,{default:p((()=>[x(H,{margin:[0,32]},{default:p((()=>[x($,{"font-size":24,_class:"font-weight-b",label:"可展开多个,不建议嵌套使用,尽管兼容,但影响性能."})])),_:1}),x(B,{defaultActiveKey:["2"]},{default:p((()=>[x(q,{title:"面板标题1",name:"1"},{default:p((()=>[x(a,{class:"pa-24"},{default:p((()=>[x($,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1}),x(q,{title:"面板标题2",name:"2"},{default:p((()=>[x(a,{class:"pa-24"},{default:p((()=>[x($,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"}),(f(!0),z(N,null,j(t.value,((e,t)=>(f(),d(o,{src:e,key:t},null,8,["src"])))),128))])),_:1})])),_:1}),x(q,{"left-icon":"tmicon-check-circle-fill",title:"面板标题3，允许嵌套使用，展开嵌套面板",name:"3"},{default:p((()=>[x(a,{class:"pa-24"},{default:p((()=>[x(T,{width:300,height:200,src:"https://img1.baidu.com/it/u=275574909,2468810396&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=750"})])),_:1})])),_:1})])),_:1}),x(H,{margin:[0,32]},{default:p((()=>[x($,{"font-size":24,_class:"font-weight-b",label:"只允许单个展开"})])),_:1}),x(B,{accordion:!0,defaultActiveKey:["1"]},{default:p((()=>[x(q,{title:"只能展开一个1",name:"1"},{default:p((()=>[x(a,{class:"pa-24"},{default:p((()=>[x($,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1}),x(q,{color:"primary",linear:"right",activeColor:"white",title:"随便更改背景",name:"2"},{default:p((()=>[x(a,{class:"pa-24"},{default:p((()=>[x($,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1}),x(q,{title:"只能展开一个3",name:"3"},{default:p((()=>[x(a,{class:"pa-24"},{default:p((()=>[x($,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1})])),_:1})])),_:1})}}});export{F as default};
