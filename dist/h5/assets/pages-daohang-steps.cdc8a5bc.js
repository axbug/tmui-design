var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,l,o)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[l]=o;import{d as i,r as u,c as s,Q as c,at as f,o as d,a as p,w as v,b as y,M as m,N as b,n as h,u as w,g,K as k,i as x,L as _,O as C,j as S,U as D,t as j,v as O,e as P,f as $,F as z}from"./index-6b165856.js";import{c as N,t as E}from"./tm-app.d6cf2f93.js";import{t as I}from"./tm-sheet.3639b36a.js";import{t as K}from"./tm-text.6c910eb0.js";import{t as B}from"./tm-icon.65b53dc0.js";import{_ as M}from"./tm-divider.vue_vue_type_script_setup_true_lang.cbbfcb4c.js";const L=i({__name:"tm-steps",props:{direction:{type:String,default:"horizontal"},current:{type:[Number],default:0},defaultCurrent:{type:Number,default:0},status:{type:String,default:""},showLine:{type:Boolean,default:!0},changeable:{type:Boolean,default:!1},beforeStepChange:{type:[Function,Boolean],default:()=>!1},color:{type:String,default:"grey-3"},activeColor:{type:String,default:"primary"},type:{type:String,default:"dot"}},emits:["change","update:current","step-click"],setup(e,{expose:t,emit:l}){var o,r;const a=e;null==(o=g())||o.proxy;const n=u(null!=(r=a.defaultCurrent)?r:-1),i=u(-1),_=u(0),C=s((()=>Math.ceil(k(_.value))+"px"));return c((()=>a.current),(()=>{n.value=a.current,l("change",n.value)})),f("tmStepsCureent",s((()=>n.value))),f("tmStepsCountCureent",s((()=>i.value))),f("tmStepsCountActiveColor",s((()=>a.activeColor))),f("tmStepsCountColor",s((()=>a.color))),t({pushKey:function(e=150){return i.value+=1,_.value+=e,i.value},compoenentName:"tmSteps",steplick:function(e){n.value=e,l("step-click",e),l("update:current",n.value)},delKey:function(e=150){return i.value-=1,_.value-=e,i.value}}),(e,t)=>{const l=x;return d(),p(l,{class:"flex flex-row flex-row-center-center"},{default:v((()=>[y(l,{class:b(["flex relative",["horizontal"==a.direction?"flex-row flex-row-top-center":""]]),style:h({width:w(C)}),ref:"contentbody"},{default:v((()=>[m(e.$slots,"default")])),_:3},8,["style","class"])])),_:3})}}}),T=i({__name:"tm-steps-item",props:(A=((e,t)=>{for(var l in t||(t={}))r.call(t,l)&&n(e,l,t[l]);if(o)for(var l of o(t))a.call(t,l)&&n(e,l,t[l]);return e})({},N),F={transprent:{type:Boolean,default:!1},color:{type:String,default:""},activeColor:{type:String,default:""},title:{type:String,default:""},label:{type:String,default:""},icon:{type:String,default:""},size:{type:Number,default:32},width:{type:Number,default:150}},t(A,l(F))),setup(e){var t,l,o,r;const a=e,n=null!=(l=null==(t=g())?void 0:t.proxy)?l:null;let i=null==n?void 0:n.$parent;for(;i&&"tmSteps"!=(null==i?void 0:i.compoenentName)&&i;)i=null!=(o=null==i?void 0:i.$parent)?o:void 0;u(!1);const c=u(null!=(r=null==i?void 0:i.pushKey(a.width))?r:0);_((()=>{i&&(c.value=null==i?void 0:i.delKey(a.width))}));const f=C("tmStepsCountCureent",s((()=>1))),P=C("tmStepsCureent",s((()=>-1))),$=C("tmStepsCountActiveColor",s((()=>"primary"))),z=C("tmStepsCountColor",s((()=>"grey-3"))),N=s((()=>a.activeColor?a.activeColor:$.value)),E=s((()=>i.$props.type)),L=s((()=>"dot"!=E.value?a.size:20)),T={wait:{color:N.value,icon:"tmicon-clock-fill"},process:{color:"grey-2",icon:"tmicon-loading"},finish:{color:"green",icon:"tmicon-check"},error:{color:"red",icon:"tmicon-times"}},A=s((()=>F.value&&T.hasOwnProperty(i.$props.status)?T[String(i.$props.status)]:null)),F=s((()=>c.value===P.value)),J=s((()=>c.value<P.value)),Q=s((()=>A.value&&F.value?A.value.color:J.value?N.value:a.color?a.color:z.value)),U=s((()=>a.icon));s((()=>i.$props.showLine));const V=s((()=>Math.ceil(k(a.width))+"px")),q=s((()=>Math.ceil(k(a.width-L.value-16)/2)+"px"));function G(){return e=this,t=null,l=function*(){if(i.$props.changeable){if("function"==typeof i.$props.beforeStepChange){j({title:"...",mask:!0});let e=yield i.$props.beforeStepChange();if("function"==typeof e&&(e=yield e()),O(),!e)return}null==i||i.steplick(c.value)}},new Promise(((o,r)=>{var a=e=>{try{i(l.next(e))}catch(t){r(t)}},n=e=>{try{i(l.throw(e))}catch(t){r(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,n);i((l=l.apply(e,t)).next())}));var e,t,l}return(e,t)=>{const l=x;return d(),p(l,{class:b(["relative flex-1","flex flex-col flex-col-center-center overflow",c.value<w(f)?"flex-1":""]),style:h({width:w(V)})},{default:v((()=>[S(" 线 "),y(l,{class:"flex-1 flex-row flex-row-center-between absolute",style:h({width:w(V),top:w(L)/2+"rpx"})},{default:v((()=>[y(l,{style:h({width:w(q)})},{default:v((()=>[c.value>0?(d(),p(M,{key:0,border:2,color:w(Q),followDark:a.followDark,dark:a.dark,margin:[0,0]},null,8,["color","followDark","dark"])):S("v-if",!0)])),_:1},8,["style"]),y(l,{style:h({width:w(q)})},{default:v((()=>[c.value<w(f)?(d(),p(M,{key:0,border:2,color:w(Q),followDark:a.followDark,dark:a.dark,margin:[0,0]},null,8,["color","followDark","dark"])):S("v-if",!0)])),_:1},8,["style"])])),_:1},8,["style"]),S(" 内容 区域。 "),y(l,{onClick:D(G,["stop"]),class:"flex flex-col relative",style:{"justify-content":"flex-start","align-items":"center"}},{default:v((()=>[y(I,{eventPenetrationEnabled:!0,"no-level":"",followTheme:a.followTheme,followDark:a.followDark,dark:a.dark,shadow:a.shadow,outlined:a.outlined,borderStyle:a.borderStyle,borderDirection:a.borderDirection,text:!w(J)&&!w(A),linearDeep:a.linearDeep,linear:a.linear,color:w(Q),round:24,_class:"flex-center",margin:[0,0],padding:[0,0],width:w(L),height:w(L)},{default:v((()=>[w(U)||w(A)||"dot"==w(E)?S("v-if",!0):(d(),p(K,{key:0,userInteractionEnabled:!1,"font-size":22,label:c.value+1},null,8,["label"])),w(A)&&w(F)&&"dot"!=w(E)?(d(),p(B,{key:1,"font-size":22,name:w(A).icon},null,8,["name"])):S("v-if",!0),!w(A)&&w(U)&&"dot"!=w(E)?(d(),p(B,{key:2,"font-size":22,name:w(U)},null,8,["name"])):S("v-if",!0)])),_:1},8,["followTheme","followDark","dark","shadow","outlined","borderStyle","borderDirection","text","linearDeep","linear","color","width","height"]),y(l,{eventPenetrationEnabled:!0,style:{width:"120rpx"},class:"flex flex-col flex-col-center-center mt-12"},{default:v((()=>[m(e.$slots,"default",{},(()=>[a.title?(d(),p(K,{key:0,userInteractionEnabled:!1,color:w(J)?w(N):"",_class:"text-overflow-2","font-size":24,label:a.title},null,8,["color","label"])):S("v-if",!0),a.label?(d(),p(K,{key:1,userInteractionEnabled:!1,color:w(J)?w(N):"",_class:"text-overflow-2 opacity-5","font-size":22,label:a.label},null,8,["color","label"])):S("v-if",!0)]))])),_:3})])),_:3},8,["onClick"])])),_:3},8,["class","style"])}}});var A,F;const J=i({__name:"steps",setup(e){const t=u([{title:"开始",label:"33"},{title:"投放中",label:""},{title:"审核",label:""},{title:"最后审查",label:""},{title:"完成",label:""}]),l=u([{title:"开始"},{title:"投放中"},{title:"审核"}]);function o(){console.log(11)}return(e,r)=>(d(),p(E,null,{default:v((()=>[y(I,null,{default:v((()=>[y(K,{fontSize:24,_class:"font-weight-b",label:"基础属性,更多玩法请前往文档。"})])),_:1}),y(I,{padding:[0,24],margin:[0,0]},{default:v((()=>[y(L,{color:"primary",defaultCurrent:1},{default:v((()=>[(d(!0),P(z,null,$(t.value,((e,t)=>(d(),p(T,{label:e.label,width:150,title:e.title,key:t},null,8,["label","title"])))),128))])),_:1})])),_:1}),y(I,{padding:[0,24],margin:[0,0]},{default:v((()=>[y(L,{type:"number",activeColor:"green",defaultCurrent:2},{default:v((()=>[(d(!0),P(z,null,$(l.value,((e,t)=>(d(),p(T,{width:200,title:e.title,key:t},null,8,["title"])))),128))])),_:1})])),_:1}),y(I,{padding:[0,24],margin:[0,0]},{default:v((()=>[y(L,{changeable:"",onStepClick:o,activeColor:"green",status:"error",defaultCurrent:1},{default:v((()=>[(d(!0),P(z,null,$(l.value,((e,t)=>(d(),p(T,{title:e.title,key:t},null,8,["title"])))),128))])),_:1})])),_:1})])),_:1}))}});export{J as default};
