import{d as e,c as t,P as n,R as a,aw as s,p as o,o as r,a as i,w as l,u,O as c,n as f,k as p,g as m,X as g,i as d,j as h,_ as y}from"./index-5c06cf16.js";import{c as S,u as z,f as x,g as v,d as b,h as H,i as k}from"./tm-app.20954b06.js";const w=y(e({__name:"tm-icon",props:{...S,fontSize:{type:[Number],default:34},color:{type:String,default:""},name:{type:String,default:""},spin:{type:[Boolean],default:!1},unit:{type:String,default:"rpx"},lineHeight:{type:[Number],default:-1},rotate:{type:Boolean,default:!1},rotateDeg:{type:Number,default:0},customicon:{type:Boolean,default:!1}},emits:["click","longpress"],setup(e,{emit:y}){var S;const w=e,_=z(),C=t((()=>w.rotateDeg));null==(S=m())||S.proxy;const B=t((()=>_.tmStore)),j=t((()=>x(w))),I=t((()=>v(w))),N=t((()=>b(w,B.value)));function D(e){y("click",e)}t((()=>H(w,N.value,B.value)));const L=n("appTextColor",t((()=>{}))),M=t((()=>{if(w.followTheme&&_.tmStore.color)return _.tmStore.color;let e=k.isCssColor(w.color);if(e)return w.color;if(w.color&&!e){return k.getColor(w.color).csscolor}return L.value?L.value:"rgba(34, 34, 34, 1.0)"})),O=t((()=>{if(w.fontSize<24&&"rpx"==w.unit)return{transform:"scale(0.8)",fontSize:(w.fontSize||30)+w.unit,lineHeight:w.lineHeight>-1?w.lineHeight+w.unit:(w.fontSize||30)+w.unit};let e={fontSize:(w.fontSize||30)+w.unit,lineHeight:w.lineHeight>-1?w.lineHeight+w.unit:(w.fontSize||30)+w.unit};return 0==w.lineHeight&&delete e.lineHeight,e})),R=t((()=>"."==w.name[0]||"@"==w.name[0]||"/"==w.name[0]||"~"==w.name[0]||"data:"==w.name.substring(0,5)||"http"==w.name.substring(0,4)||"https"==w.name.substring(0,5)||"ftp"==w.name.substring(0,3))),T=t((()=>{var e;return null==(e=w.name.split("-"))?void 0:e[0]})),$=t((()=>{if(R.value)return w.name;if(w.customicon)try{let e=w.name.split("-");if(/^e[0-9|a-z|A-Z]{3}/.test(e[e.length-1])){return w.name.substring(0,w.name.lastIndexOf("-"))}}catch(e){}return w.name})),A=t((()=>w.spin)),P=n("custom_space_size",[0,0]);return t((()=>Math.ceil(w.fontSize||34)+P[0])),t((()=>Math.ceil(w.fontSize||34)+P[1])),a(A,(()=>{})),s((()=>{})),o((()=>{})),(e,t)=>{const n=g,a=d,s=h;return r(),i(s,{"render-whole":!0,class:"flex flex-row flex-row-center-center",style:f([{marginRight:u(P)[0]+"rpx",marginBottom:u(P)[1]+"rpx"}])},{default:l((()=>[u(R)?p("v-if",!0):(r(),i(n,{key:0,onClick:D,onLongpress:t[0]||(t[0]=e=>y("longpress",e)),class:c([w.rotate?"ani":"",u(A)?"spin":"","text-size-n d-inline-block",u(T),u($),u(I)]),style:f([{transform:`rotate(${u(C)}deg)`},u(O),{color:u(M)},u(j)])},null,8,["class","style"])),u(R)?(r(),i(a,{key:1,"render-whole":!0,onClick:D,onLongpress:t[1]||(t[1]=e=>y("longpress",e)),ref:"icon",src:u($),class:c([w.rotate?"ani":"",u(A)?"spin":"",u(I)]),style:f([{transform:`rotate(${u(C)}deg)`},{width:(w.fontSize||30)+w.unit,height:(w.fontSize||30)+w.unit},u(j)])},null,8,["src","class","style"])):p("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-2ba6e4e4"]]);export{w as t};
