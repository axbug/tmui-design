import{d as e,r as a,c as t,R as o,o as l,a as r,w as d,b as u,V as s,k as f,e as n,f as m,u as i,F as Y,j as c,O as D}from"./index-5c06cf16.js";import{c as p,t as M}from"./tm-app.20954b06.js";import{t as y}from"./tm-sheet.2873fe67.js";import{t as w}from"./tm-text.fdd4f0a8.js";import{t as b}from"./tm-icon.5716c798.js";import{i as v,d as k}from"./index.1a9a795c.js";import{i as h}from"./index.758a781a.js";const g=e({__name:"tm-weekbar",props:{...p,padding:{type:Array,default:[12,24]},margin:{type:Array,default:[32,32]},followTheme:{type:[Boolean,String],default:!0},transprent:{type:Boolean,default:!1},round:{type:Number,default:3},shadow:{type:Number,default:3},defaultValue:{type:[String,Date,Number],default:()=>""},modelValue:{type:[String,Date,Number],default:()=>""},color:{type:String,default:"white"},activeColor:{type:String,default:"primary"},model:{type:String,default:"week"},dayNumber:{type:Number,default:4},showArrow:{type:Boolean,default:!0}},emits:["change","update:modelValue"],setup(e,{emit:p}){const M=e,g=k;g.extend(h),g.extend(v);const x=a(g(M.defaultValue).isValid()?g(M.defaultValue).format("YYYY-MM-DD"):g().format("YYYY-MM-DD")),V=a(S("now",x.value)),_=t((()=>function(e,a){let t=[],o=[],l=g(a),r=g(e);for(;r.isSameOrBefore(l);){t.push({date:r.format("YYYY-MM-DD"),str:r.format("MM/DD")});let e=r.get("day")||0;r.isSame(g(),"date")?o.push("今天"):o.push(N[e]),r=r.add(1,"day")}return C.value=o,t}(V.value[0],V.value[1]))),C=a(["周一","周二","周三","周四","周五","周六","周日"]),N={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"};function j(){V.value=S("next")}function O(){V.value=S("prev")}function S(e="next",a=""){let t=g(x.value);if("next"==e){if("custom"==M.model){let e=t.add(1,"day");return x.value=e.format("YYYY-MM-DD"),[e.format("YYYY-MM-DD"),e.add(M.dayNumber-1,"day").format("YYYY-MM-DD")]}{let e=g(V.value[1]).add(1,"week");return[e.startOf("isoWeek").format("YYYY-MM-DD"),e.format("YYYY-MM-DD")]}}if("prev"==e){if("custom"==M.model){let e=t.subtract(1,"day");return x.value=e.format("YYYY-MM-DD"),[e.format("YYYY-MM-DD"),e.add(M.dayNumber-1,"day").format("YYYY-MM-DD")]}{let e=g(V.value[0]).subtract(1,"week");return[e.format("YYYY-MM-DD"),e.endOf("isoWeek").format("YYYY-MM-DD")]}}return"custom"==M.model?g(a).isValid()?[g(a).subtract(2,"day").format("YYYY-MM-DD"),g(a).add(M.dayNumber-3,"day").format("YYYY-MM-DD")]:[g().subtract(1,"day").format("YYYY-MM-DD"),g().add(M.dayNumber-2,"day").format("YYYY-MM-DD")]:g(a).isValid()?[g(a).startOf("isoWeek").format("YYYY-MM-DD"),g(a).endOf("isoWeek").format("YYYY-MM-DD")]:[g().startOf("isoWeek").format("YYYY-MM-DD"),g().endOf("isoWeek").format("YYYY-MM-DD")]}return o((()=>M.modelValue),(()=>{g(M.modelValue).isValid()&&(x.value=g(M.modelValue).format("YYYY-MM-DD"),V.value=S("now",x.value))})),(a,t)=>{const o=c;return l(),r(y,{"follow-dark":M.followDark,"follow-theme":M.followTheme,dark:M.dark,shadow:M.shadow,round:M.round,margin:M.margin,padding:M.padding,color:M.color},{default:d((()=>[u(o,{class:"flex flex-row flex-row-center-center"},{default:d((()=>[e.showArrow?(l(),r(o,{key:0,onClick:s(O,["stop"]),class:"opacity-7"},{default:d((()=>[u(b,{"font-size":28,userInteractionEnabled:!1,name:"tmicon-angle-left"})])),_:1},8,["onClick"])):f("v-if",!0),u(o,{class:"flex-1 flex flex-row",style:{width:"0px"}},{default:d((()=>[(l(!0),n(Y,null,m(i(_),((e,a)=>(l(),r(o,{onClick:s((a=>{return t=e.date,x.value=t,p("update:modelValue",t),void p("change",t);var t}),["stop"]),class:D([[e.date==x.value?"":"opacity-7"],"flex-1 flex flex-col flex-col-center-center"]),key:a},{default:d((()=>[u(w,{followTheme:!1,color:e.date==x.value?M.activeColor:"",userInteractionEnabled:!1,"font-size":23,label:C.value[a]},null,8,["color","label"]),u(w,{followTheme:!1,color:e.date==x.value?M.activeColor:"",userInteractionEnabled:!1,"font-size":23,label:e.str},null,8,["color","label"])])),_:2},1032,["onClick","class"])))),128))])),_:1}),e.showArrow?(l(),r(o,{key:1,onClick:s(j,["stop"]),class:"opacity-7"},{default:d((()=>[u(b,{"font-size":28,userInteractionEnabled:!1,name:"tmicon-angle-right"})])),_:1},8,["onClick"])):f("v-if",!0)])),_:1})])),_:1},8,["follow-dark","follow-theme","dark","shadow","round","margin","padding","color"])}}}),x=e({__name:"weekbar",setup:e=>(a(""),a(!1),(e,a)=>(l(),r(M,null,{default:d((()=>[u(y,null,{default:d((()=>[u(w,{"font-size":24,_class:"font-weight-b",label:"基础示例,更多见文档"})])),_:1}),u(g),u(g,{followTheme:!1,activeColor:"white",color:"red"}),u(g,{followTheme:!1,activeColor:"black",color:"yellow",linear:"bottom"}),u(g,{model:"custom",dayNumber:7})])),_:1})))});export{x as default};
