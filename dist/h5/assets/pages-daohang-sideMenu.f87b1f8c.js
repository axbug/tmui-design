import{d as e,L as t,c as l,r as o,R as a,o as n,e as r,k as i,b as u,w as s,u as d,n as c,F as f,f as v,a as m,N as p,j as g,$ as y,O as h,m as x}from"./index-5c06cf16.js";import{t as _}from"./tm-text.fdd4f0a8.js";import{_ as b}from"./tm-divider.vue_vue_type_script_setup_true_lang.0bd9a5e3.js";import{t as w}from"./tm-sheet.2873fe67.js";import{t as C}from"./tm-app.20954b06.js";import{t as B}from"./tm-icon.5716c798.js";import{_ as S}from"./tm-badge.vue_vue_type_script_setup_true_lang.03b3afc8.js";const k=e({__name:"tm-side-menu",props:{...{height:{type:Number,default:500},width:{type:Number,default:750},sideWidth:{type:Number,default:190},itemHeight:{type:Number,default:100},fontSize:{type:Number,default:26},active:{type:Number,default:0},menuFontColor:{type:String,default:"grey"},menuActiveFontColor:{type:String,default:"primary"},menuActiveBgColor:{type:String,default:"white"},menuBarBgColor:{type:String,default:"grey-4"},bodyBgColor:{type:String,default:"white"},unit:{type:String,default:"rpx"},list:{type:Array,default:()=>[],required:!0},refresh:{type:Boolean,default:!1},load:{type:Function,default:()=>null},firstLoad:{type:Boolean,default:!0},disabledBottom:{type:Boolean,default:!1},rangKey:{type:String,default:"text"},isScroll:{type:Boolean,default:!1}}},emits:["click","change","update:active","load","restore"],setup(e,{emit:b}){const C=e;t(C.sideWidth);const k=l((()=>C.list.map((e=>({...e,text:(null==e?void 0:e.text)??e[C.rangKey]??"",dotCount:(null==e?void 0:e.dotCount)??0,icon:(null==e?void 0:e.icon)??""}))))),F=o(!0),z=o(!1),A=o(""),N=o(C.active),j=o("px"==C.unit?uni.$tm.u.torpx(C.sideWidth):C.sideWidth),$=o("px"==C.unit?uni.$tm.u.torpx(C.itemHeight):C.itemHeight);l((()=>"px"==C.unit?uni.$tm.u.torpx(C.width):C.width));const H=l((()=>"px"==C.unit?uni.$tm.u.torpx(C.height):C.height));a((()=>C.active),(()=>{C.active!=N.value&&(N.value=C.active)})),a(N,(()=>{b("update:active",N.value),b("change",N.value)}));async function I(){z.value?F.value=!1:(b("restore"),b("load","loading"),z.value=!0,A.value="pull",await E("pull"),F.value=!0,setTimeout((function(){z.value=!1,F.value=!1}),300))}async function R(){z.value||C.disabledBottom||(b("load","loading"),z.value=!0,A.value="bottom",await E("bottom"),b("load","success"),z.value=!1)}async function E(e,t=null,l=NaN){let o=C.load,a=!0;"function"==typeof o&&(a=await o(e,t,l),"function"==typeof a&&await a(e,t,l))}function W(){F.value=!1}function U(){F.value=!1}return(e,t)=>{const l=g,o=y;return n(),r(f,null,[i(" 侧边栏菜单 导航 。 "),u(l,{class:"flex flex-row"},{default:s((()=>[u(w,{color:C.menuBarBgColor,height:d(H),width:j.value,unit:C.unit,margin:[0,0],padding:[0,0]},{default:s((()=>[u(o,{"show-scrollbar":!1,"scroll-y":"",style:c({height:d(H)+"rpx",width:j.value+"rpx"})},{default:s((()=>[(n(!0),r(f,null,v(d(k),((e,t)=>(n(),m(w,{key:t,margin:[0,0],padding:[0,0],color:C.menuActiveBgColor,transprent:N.value-1!==t&&N.value+1!==t,"no-level":""},{default:s((()=>[u(w,{"no-level":"",onClick:l=>(async(e,t)=>{N.value=t,x((async()=>{b("click",e,t),b("load","loading"),z.value=!0,A.value="menu",await E("menu",e,t),z.value=!1,b("load","success")}))})(e,t),color:N.value===t?C.menuActiveBgColor:C.menuBarBgColor,isDisabledRoundAndriod:!0,_class:"flex flex-row flex-row-center-center relative",margin:[0,0],height:$.value,padding:[0,0],width:j.value,class:h((N.value-1===t?"round-br-6":"")+" "+(N.value+1===t?"round-tr-6":"")),parenClass:(N.value-1===t?"round-br-6":"")+" "+(N.value+1===t?"round-tr-6":""),borderDirection:"bottom"},{default:s((()=>[u(l,{userInteractionEnabled:!1,class:"absolute l-6",style:c({top:($.value-30)/2+"rpx"})},{default:s((()=>[N.value==t?(n(),m(w,{key:0,round:2,height:30,margin:[0,0],padding:[0,0],color:C.menuActiveFontColor,width:6},null,8,["color"])):i("v-if",!0)])),_:2},1032,["style"]),e.icon?i("v-if",!0):(n(),m(S,{key:0,userInteractionEnabled:!1,color:"red",count:e.dotCount},{default:s((()=>[u(l,{class:"flex flex-col flex-col-center-center py-10",style:c({width:j.value-28+"rpx"})},{default:s((()=>[u(_,{_class:"text-align-center "+(N.value==t?"text-weight-b":""),color:N.value==t?C.menuActiveFontColor:C.menuFontColor,"font-size":C.fontSize,label:e.text},null,8,["_class","color","font-size","label"])])),_:2},1032,["style"])])),_:2},1032,["count"])),e.icon?(n(),m(S,{key:1,userInteractionEnabled:!1,color:"red",count:e.dotCount},{default:s((()=>[u(l,{class:"flex flex-row flex-row-center-center py-10",style:c({width:j.value-28+"rpx"})},{default:s((()=>[e.icon?(n(),m(B,{key:0,color:N.value==t?C.menuActiveFontColor:C.menuFontColor,"font-size":C.fontSize,name:e.icon},null,8,["color","font-size","name"])):i("v-if",!0),u(l,{userInteractionEnabled:!1,class:"px-10"},{default:s((()=>[u(_,{_class:"text-align-center "+(N.value==t?"text-weight-b":""),color:N.value==t?C.menuActiveFontColor:C.menuFontColor,"font-size":C.fontSize,label:e.text},null,8,["_class","color","font-size","label"])])),_:2},1024)])),_:2},1032,["style"])])),_:2},1032,["count"])):i("v-if",!0)])),_:2},1032,["onClick","color","height","width","class","parenClass"])])),_:2},1032,["color","transprent"])))),128))])),_:1},8,["style"])])),_:1},8,["color","height","width","unit"]),u(w,{"no-level":"",class:"flex-1",parenClass:"flex-1","show-scrollbar":!1,margin:[0,0],padding:[0,0],color:C.bodyBgColor},{default:s((()=>[C.isScroll?i("v-if",!0):(n(),m(o,{key:0,"refresher-triggered":F.value,onScrolltolower:R,onRefresherrefresh:I,onRefresherrestore:U,onRefresherabort:W,"refresher-enabled":"","scroll-y":"",class:"flex-1",style:c({height:d(H)+"rpx"})},{default:s((()=>[p(e.$slots,"default"),"bottom"==A.value&&z.value?(n(),m(l,{key:0,class:"my-40 flex flex-row flex-row-center-center"},{default:s((()=>[u(B,{spin:"",name:"tmicon-shuaxin","font-size":22,color:"primary"}),u(_,{"font-size":22,color:"grey",_class:"pl-20",label:"加载中..."})])),_:1})):i("v-if",!0)])),_:3},8,["refresher-triggered","style"])),C.isScroll?(n(),m(l,{key:1},{default:s((()=>[p(e.$slots,"default")])),_:3})):i("v-if",!0)])),_:3},8,["color"])])),_:3})],2112)}}}),F=e({__name:"sideMenu",setup(e){const t=o(3),l=o([{text:"广东",id:1},{text:"北京",id:2},{text:"江苏",id:3,dotCount:6},{text:"南昌",id:4,icon:"tmicon-md-chatboxes"},{text:"上海",id:5},{text:"吃菠菜吃菠菜吃菠菜",id:6,dotCount:6},{text:"Hellow",id:7},{text:"Github",id:8,dotCount:1},{text:"Vue",id:9},{text:"Uniapp",id:10}]);return(e,o)=>(n(),m(C,null,{default:s((()=>[u(k,{active:t.value,"onUpdate:active":o[0]||(o[0]=e=>t.value=e),itemHeight:100,list:l.value},{default:s((()=>[u(_,{_class:"pa-32",label:"这边是你的内容区域"})])),_:1},8,["active","list"]),u(w,{margin:[0,32],_class:"flex flex-row flex-row-center-start"},{default:s((()=>[u(b,{color:"yellow",vertical:"",height:30,realColor:"",border:8}),u(_,{label:"可以根据自己的需求更新你的配色方案"})])),_:1}),u(k,{active:t.value,"onUpdate:active":o[1]||(o[1]=e=>t.value=e),menuActiveFontColor:"yellow",menuFontColor:"black",menuBarBgColor:"yellow",itemHeight:100,list:l.value},{default:s((()=>[u(_,{_class:"pa-32",label:"这边是你的内容区域"})])),_:1},8,["active","list"])])),_:1}))}});export{F as default};
