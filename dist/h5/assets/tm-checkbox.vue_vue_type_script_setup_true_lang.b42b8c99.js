import{d as e,r as l,P as t,c as a,R as o,o as n,a as i,w as r,b as u,u as d,k as s,N as f,O as m,g as c,t as p,v,x as y,j as h}from"./index-5c06cf16.js";import{t as k}from"./tm-sheet.2873fe67.js";import{t as b}from"./tm-icon.5716c798.js";import{t as x}from"./tm-text.fdd4f0a8.js";import{t as w}from"./tm-translate.4fbb7927.js";import{c as g}from"./tm-app.20954b06.js";const z=e({__name:"tm-checkbox",props:{...g,followTheme:{type:[Boolean,String],default:!0},size:{type:Number,default:42},custom:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},transprent:{type:Boolean,default:!1},round:{type:Number,default:2},border:{type:Number,default:2},value:{type:[String,Number,Boolean],default:!0},modelValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number],default:""},defaultChecked:{type:[Boolean],default:!1},beforChecked:{type:[Function,String,Boolean],default:()=>!1},disabled:{type:Boolean,default:!1},fontSize:{type:Number,default:28},indeterminate:{type:[Boolean,String],default:!1},closeAni:{type:[Boolean,String],default:!0},icon:{type:String,default:"tmicon-check"},disabledClass:{type:String,default:"opacity-5"},margin:{type:Array,default:()=>[16,8]}},emits:["update:modelValue","change","click"],setup(e,{expose:g,emit:z}){var B;const C=e;l(null);const S=(null==(B=c())?void 0:B.proxy)??null,_=l(C.defaultChecked??!1),V=t("tmCheckedBoxVal",a((()=>[]))),D=t("tmCheckedBoxDisabled",a((()=>!1))),N=t("tmCheckedBoxMax",a((()=>!1))),j=t("tmCheckedBoxDir",a((()=>"row"))),A=a((()=>C.disabled||D.value));function T(e){let l=!1,t=void 0===e?V.value:e;return C.modelValue===C.value&&void 0!==C.value&&""!==C.value&&""!==C.modelValue&&(l=!0),t.includes(C.value)&&(l=!0),l}async function I(){if(z("click"),!A.value)if(!N.value||_.value){if("function"==typeof C.beforChecked){v({title:"...",mask:!0});let e=await C.beforChecked();if("function"==typeof e&&(e=await e()),y(),!e)return}_.value=!_.value,_.value?(z("update:modelValue",C.value),K&&K.addKey(C.value)):(z("update:modelValue",!1),K&&K.delKey(C.value)),z("change",_.value)}else p({title:"超最大选择",icon:"error"})}T()&&(_.value=!0,z("update:modelValue",C.value)),o([()=>C.modelValue,()=>C.value,()=>V.value],(()=>{_.value=T()}),{deep:!0}),V.value;let K=null==S?void 0:S.$parent;for(;K&&"tmCheckBoxGroup"!=(null==K?void 0:K.checkBoxkeyId)&&K;)K=(null==K?void 0:K.$parent)??void 0;return K&&K.pushKey(C.value),g({hanlerClick:I}),(e,l)=>{const t=h;return n(),i(t,{class:m(["flex",[d(A)?C.disabledClass:"","row"==d(j)?"flex-row":"","customCol"==d(j)?"flex-1":""]])},{default:r((()=>[u(t,{onClick:I,class:"flex flex-row flex-row-center-start flex-1"},{default:r((()=>[C.custom?(n(),i(k,{key:0,parenClass:"flex-shrink",class:"flex-shrink",eventPenetrationEnabled:!0,linear:C.linear,linearDeep:C.linearDeep,followTheme:C.followTheme,followDark:C.followDark,dark:C.dark,shadow:C.shadow,width:C.size,height:C.size,text:(!C.indeterminate&&!_.value||d(A))&&!C.outlined,border:C.border,borderStyle:C.borderStyle,transprent:C.transprent,padding:[0,0],margin:C.margin,color:d(A)?"white":C.color,round:C.round,_class:"flex-row flex-row-center-center",outlined:C.outlined,_style:"transition:background-color 0.24s"},{default:r((()=>[C.closeAni?s("v-if",!0):(n(),i(t,{key:0},{default:r((()=>[_.value&&!C.indeterminate?(n(),i(w,{key:0,duration:100,name:"zoom",style:{"line-height":"1"}},{default:r((()=>[u(b,{"font-size":.6*C.size,name:C.icon},null,8,["font-size","name"])])),_:1})):s("v-if",!0),C.indeterminate?(n(),i(w,{key:1,duration:100,name:"zoom",style:{"line-height":"1"}},{default:r((()=>[u(b,{"font-size":.6*C.size,name:"tmicon-minus"},null,8,["font-size"])])),_:1})):s("v-if",!0)])),_:1})),C.closeAni?(n(),i(t,{key:1},{default:r((()=>[_.value&&!C.indeterminate?(n(),i(b,{key:0,"font-size":.6*C.size,name:C.icon},null,8,["font-size","name"])):s("v-if",!0),C.indeterminate?(n(),i(b,{key:1,"font-size":.6*C.size,name:"tmicon-minus"},null,8,["font-size"])):s("v-if",!0)])),_:1})):s("v-if",!0)])),_:1},8,["linear","linearDeep","followTheme","followDark","dark","shadow","width","height","text","border","borderStyle","transprent","margin","color","round","outlined"])):s("v-if",!0),u(t,{class:"flex-1"},{default:r((()=>[f(e.$slots,"default",{checked:{checked:_.value}},(()=>[u(x,{userInteractionEnabled:!1,"font-size":C.fontSize,label:C.label},null,8,["font-size","label"])]))])),_:3})])),_:3})])),_:3},8,["class"])}}});export{z as _};
