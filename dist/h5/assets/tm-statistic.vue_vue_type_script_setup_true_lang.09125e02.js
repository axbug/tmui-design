import{d as e,r as t,R as l,p as a,aB as o,o as n,a as r,w as i,N as u,b as s,u as f,j as d}from"./index-5c06cf16.js";import{t as m}from"./tm-text.fdd4f0a8.js";let c=0;const p="webkit moz ms o".split(" ");let w=null,q=null,V="";w=window.requestAnimationFrame,q=window.cancelAnimationFrame;for(let y=0;y<p.length&&(!w||!q);y++)V=p[y],w=w||window[V+"RequestAnimationFrame"],q=q||window[V+"CancelAnimationFrame"]||window[V+"CancelRequestAnimationFrame"];w&&q||(w=function(e){const t=(new Date).getTime(),l=Math.max(0,16-(t-c)),a=setTimeout((()=>{e(t+l)}),l);return c=t+l,a},q=function(e){clearTimeout(e)});const b=e({__name:"tm-statistic",props:{followTheme:{type:[Boolean,String],default:!0},fontSize:{type:Number,default:30},color:{type:String,default:""},startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2021},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:e=>e>=0},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},isFrequent:{type:Boolean,required:!1,default:!1},frequentTime:{type:Number,required:!1,default:5e3}},emits:["mountedCallback","callback"],setup(e,{expose:c,emit:p}){const V=e;let b=V.startVal,y=t(A(V.startVal)),h=null,x=V.duration,T=null,g=null,z=null,S=null;const F=V.startVal>V.endVal;function N(e=0,t=0,l=0,a=0){return l*(1-Math.pow(2,-10*e/a))*1024/1023+t}function v(e){b=e||V.startVal,T=null,x=V.duration,z=w(k)}function k(e){T||(T=e),g=e;const t=g-T;h=V.useEasing?F?b-N(t,0,b-V.endVal,x)||0:N(t,b,V.endVal-b,x):F?b-(b-V.endVal)*(t/x):b+(V.endVal-b)*(t/x),h=F?h<V.endVal?V.endVal:h:h>V.endVal?V.endVal:h,y.value=A(h),t<x?z=w(k):p("callback")}function A(e){e=e.toFixed(V.decimals);const t=(e+="").split(".");let l=t[0];const a=t.length>1?V.decimal+t[1]:"",o=/(\d+)(\d{3})/;if(V.separator&&(n=V.separator,isNaN(parseFloat(n))))for(;o.test(l);)l=l.replace(o,"$1"+V.separator+"$2");var n;return l+a}return l([()=>V.startVal,()=>V.endVal],(()=>{v()})),a((()=>{V.autoplay&&v(),V.isFrequent&&V.frequentTime&&(S=setInterval((()=>{var e,t;v((e=0,t=V.endVal,Math.round(Math.random()*(t-e)+e)))}),V.frequentTime)),p("mountedCallback")})),o((()=>clearInterval(S))),c({start:v,reset:function(){T=null,q(z),y.val=A(V.startVal)},pause:function(){q(z)}}),(e,t)=>{const l=d;return n(),r(l,{class:"flex flex-row flex-row-bottom-center"},{default:i((()=>[u(e.$slots,"prefix",{},(()=>[s(m,{followTheme:V.followTheme,color:V.color,"font-size":.7*V.fontSize,label:V.prefix},null,8,["followTheme","color","font-size","label"])])),u(e.$slots,"default",{},(()=>[s(m,{followTheme:V.followTheme,_class:"px-12",color:V.color,"font-size":V.fontSize,label:f(y)},null,8,["followTheme","color","font-size","label"])])),u(e.$slots,"suffix",{},(()=>[s(m,{followTheme:V.followTheme,color:V.color,"font-size":.7*V.fontSize,label:V.suffix},null,8,["followTheme","color","font-size","label"])]))])),_:3})}}});export{b as _};
