var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,i=(e,t)=>{for(var l in t||(t={}))r.call(t,l)&&o(e,l,t[l]);if(a)for(var l of a(t))n.call(t,l)&&o(e,l,t[l]);return e},u=(e,a)=>t(e,l(a)),d=(e,t,l)=>new Promise(((a,r)=>{var n=e=>{try{i(l.next(e))}catch(t){r(t)}},o=e=>{try{i(l.throw(e))}catch(t){r(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,o);i((l=l.apply(e,t)).next())}));import{d as s,r as f,c,Q as m,o as p,a as h,w as b,b as g,N as x,u as y,n as v,t as N,v as w,k as S,i as I,a9 as _,_ as T}from"./index-6b165856.js";import{c as V,u as j,d as O,h as P}from"./tm-app.d6cf2f93.js";import{t as F}from"./tm-sheet.3639b36a.js";import{t as B}from"./tm-icon.65b53dc0.js";const C=T(s({__name:"tm-stepper",props:u(i({},V),{followTheme:{type:[Boolean,String],default:!0},width:{type:[Number],default:210},height:{type:[Number],default:52},disabled:{type:Boolean,default:!1},disabledInput:{type:[Boolean],default:!1},black:{type:[Boolean,String],default:null},step:{type:Number,default:1},fixed:{type:Number,default:0},color:{type:String,default:"grey-4"},bgColor:{type:String,default:"grey-4"},linear:{type:String,default:""},linearDeep:{type:String,default:"light"},round:{type:[String,Number],default:2},fontSize:{type:[String,Number],default:28},circular:{type:[Boolean],default:!1},max:{type:[Number],default:999},min:{type:[Number],default:0},beforeEnter:{type:[Function,Boolean],default:!0},modelValue:{type:Number,default:null},defaultValue:{type:Number,default:null}}),emits:["update:modelValue","change"],setup(e,{emit:t}){var l;const a=e,r=j(),n=f(null!=(l=a.defaultValue)?l:"0"),o=c((()=>r.tmStore)),s=c((()=>O(a,o.value))),T=c((()=>P(u(i({},a),{color:a.bgColor,text:!0}),s.value,o.value)));let V=NaN,C=NaN;const E=c((()=>n.value<=a.min)),k=c((()=>n.value>=a.max));function z(e){let t="";for(let l=0;l<e-1;l++)t+="0";return t}function D(e){return d(this,null,(function*(){if(!a.disabled){if("function"==typeof a.beforeEnter){N({title:"...",mask:!0});let t=yield a.beforeEnter(e);if("function"==typeof t&&(t=yield t(e)),w(),!t)return!1}var l=J(n.value);if(a.fixed>0){(l=l.toFixed(a.fixed))||(l="0."+z(a.fixed)+a.step),l=Number(l);let t="0."+z(a.fixed)+a.step;t=Number(String(t)),"+"==e?(l+=t)>a.max&&(l=a.max):(l-=t)<a.min&&(l=a.min)}else l=l.toFixed(a.fixed),l=parseInt(l),"+"==e?(l+=a.step,console.log(l,"+++"),l>a.max&&(l=a.max)):(l-=a.step)<a.min&&(l=a.min);(l=Number(l.toFixed(a.fixed)))<=a.min?(l=a.min,clearInterval(V)):l>=a.max&&(l=a.max,clearInterval(V)),S((function(){const e=l;n.value=Number(e||0);let a=isNaN(n.value)||void 0===n.value?"":n.value;t("update:modelValue",a),t("change",a)}))}}))}function $(e){var l=parseFloat(e.detail.value);clearTimeout(C),C=setTimeout((function(){!function(e){a.fixed>0?(e=Number(e.toFixed(a.fixed)),!isNaN(e)&&e||(e=Number("0."+z(a.fixed)+a.step))):0==a.fixed&&(e=Number(e.toFixed(0)));e<a.min&&(e=Number(a.min));e>a.max&&(e=Number(a.max));n.value&&0!=n.value?n.value=String(e):(n.value=null,S((()=>{n.value=String(e)})));t("update:modelValue",e),t("change",e)}(J(l))}),150)}function L(e){a.disabled||(clearInterval(V),V=setInterval((function(){return d(this,null,(function*(){yield D(e)}))}),250))}function A(e){clearInterval(V)}function J(e){let t=Number(e);return isNaN(t)?a.min:t}return m((()=>a.modelValue),(()=>{n.value=J(a.modelValue)})),(t,l)=>{const r=I,o=_;return p(),h(r,{class:"flex flex-row",style:v([{width:`${a.width}rpx`,height:`${a.height}rpx`}])},{default:b((()=>[g(F,{text:"",transprent:a.circular,followTheme:!1,_class:"flex flex-row",color:a.bgColor,margin:[0,0],padding:[0,0]},{default:b((()=>[g(r,{class:x([a.circular?"round-10":"","overflow",a.disabled||y(E)?"opacity-5":""])},{default:b((()=>[g(F,{followTheme:a.followTheme,round:a.circular?10:a.round,linear:a.linear,"linear-deep":a.linearDeep,onClick:l[0]||(l[0]=e=>D("-")),onLongpress:l[1]||(l[1]=e=>L("-")),onTouchend:l[2]||(l[2]=e=>A()),_class:"flex-center",color:a.color,margin:[0,0],padding:[0,0],height:e.height,width:a.height},{default:b((()=>[g(B,{userInteractionEnabled:!1,"font-size":22,name:"tmicon-minus"})])),_:1},8,["followTheme","round","linear","linear-deep","color","height","width"])])),_:1},8,["class"]),g(o,{disabled:a.disabledInput||a.disabled,onInput:$,modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=e=>n.value=e),"auto-blur":"",style:v([{height:`${a.height}rpx`,textAlign:"center",fontSize:a.fontSize+"rpx",width:a.width-120+"rpx",color:y(T).textColor}]),type:"number"},null,8,["disabled","modelValue","style"]),g(r,{class:x([a.circular?"round-10":"","overflow",a.disabled||y(k)?"opacity-5":""])},{default:b((()=>[g(F,{followTheme:a.followTheme,round:a.circular?10:a.round,linear:a.linear,"linear-deep":a.linearDeep,onClick:l[4]||(l[4]=e=>D("+")),onLongpress:l[5]||(l[5]=e=>L("+")),onTouchend:l[6]||(l[6]=e=>A()),_class:"flex-center",color:a.color,margin:[0,0],padding:[0,0],height:e.height,width:a.height},{default:b((()=>[g(B,{userInteractionEnabled:!1,"font-size":22,name:"tmicon-plus"})])),_:1},8,["followTheme","round","linear","linear-deep","color","height","width"])])),_:1},8,["class"])])),_:1},8,["transprent","color"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-ecc4b2f7"]]);export{C as t};
