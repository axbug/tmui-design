import{d as e,r as t,c as a,R as l,p as r,m as u,az as o,o as n,a as s,w as d,u as i,n as m,e as f,f as c,F as h,k as y,g as v,L as g,j as x,aG as S,aH as p,O as w,b as k,U as Y,a0 as b,X as D,_}from"./index-5c06cf16.js";import{u as H}from"./tm-app.20954b06.js";import{i as M,d as V}from"./index.1a9a795c.js";import{a as O,i as j}from"./index.bac9302e.js";const U={modelValue:{type:[Number,String,Date],default:""},modelStr:{type:[String],default:""},defaultValue:{type:[Number,String,Date],default:""},disabledDate:{type:Array,default:()=>[]},format:{type:String,default:"YYYY/MM/DD HH:mm:ss"},immediateChange:{type:Boolean,default:!1},showDetail:{type:Object,default:()=>({year:!0,month:!0,day:!0,hour:!1,minute:!1,second:!1})},showSuffix:{type:Object,default:()=>({year:"年",month:"月",day:"日",hour:"时",minute:"分",second:"秒"})},start:{type:[Number,String,Date],default:"2008/01/01 00:00:00"},end:{type:[Number,String,Date],default:""},height:{type:Number,default:300}};var C=(e=>(e.year="year",e.month="month",e.day="date",e.hour="hour",e.minute="minute",e.second="second",e))(C||{});const N=V;function I(e=0,t=0){let a=[];for(let l=e=e>=0?e:1;l<=t;l++)a.push(l);return a}function A(e,t,a,l){let r=N(t),u=N(a),o=N(e),n={year:[],month:[],date:[],hour:[],minute:[],second:[]};function s(e){let t=[];function a(e,a){let l=0,n=0,s=o;o.isSameOrBefore(r,a)?(s=r,l=r.get(e),n=r.endOf(a).get(e),s.isSame(u,a)&&(n=u.get(e))):o.isSameOrAfter(u,a)?(s=u,l=u.startOf(a).get(e),n=u.get(e),s.isSame(r,a)&&(l=r.get(e))):(l=o.startOf(a).get(e),n=o.endOf(a).get(e)),t=I(l,n)}"year"==e?t=I(r.get("year"),u.get("year")):"month"==e?a(C.month,C.year):"date"==e?a(C.day,C.month):"hour"==e?a(C.hour,C.day):"minute"==e?a(C.minute,C.hour):"second"==e&&a(C.second,C.minute),n[e]=t}let d="";for(d in l)"day"==d&&(d="date"),s(d);return n}function B(e,t,a){const l=N(t);return[...[[C.year,a.year],[C.month,a.month],[C.day,a.day],[C.hour,a.hour],[C.minute,a.minute],[C.second,a.second]].filter((e=>e[1])).map((t=>{const a=t[0],r=e[a].findIndex((e=>e===l.get(a)));return-1===r?0:r})),0,0,0,0,0,0].slice(0,6)}function q(e,t,a){const l=[[C.year,a.year],[C.month,a.month],[C.day,a.day],[C.hour,a.hour],[C.minute,a.minute],[C.second,a.second]];function r(a){const r=l.filter((e=>e[1])).findIndex((e=>e[0]===a));return-1!==r?e[a][t[r]]:e[a][e[a].length-1]}let u=r(C.year),o=r(C.month),n=r(C.day),s=r(C.hour),d=r(C.minute),i=r(C.second);return N(u+"/"+(o+1)+"/"+n+" "+s+":"+d+":"+i).format("YYYY/MM/DD HH:mm:ss")}function z(e,t,a){return e=N(e).isValid()?N(e):N(),t=N(t),a=N(a),e.isSameOrBefore(t)?t.format("YYYY/MM/DD HH:mm:ss"):e.isSameOrAfter(a)?a.format("YYYY/MM/DD HH:mm:ss"):e.format("YYYY/MM/DD HH:mm:ss")}N.extend(O),N.extend(M),N.extend(j);const F=_(e({__name:"tm-time-view",props:{...U},emits:["update:modelValue","update:modelStr","change"],setup(e,{emit:_}){var M;const O=e;null==(M=v())||M.proxy;const j=H(),U=V,C=t(U(z(O.defaultValue,O.start,O.end))),N=a((()=>C.value.format())),I=t(!0),F=a((()=>U(O.start).isValid()?U(O.start).format():U().subtract(3,"year").format())),G=a((()=>U(O.end).isValid()?U(O.end).format():U().add(1,"year").format())),L=a((()=>{var e,t,a,l,r,u;return{year:(null==(e=O.showDetail)?void 0:e.year)??!0,month:(null==(t=O.showDetail)?void 0:t.month)??!0,day:(null==(a=O.showDetail)?void 0:a.day)??!0,hour:(null==(l=O.showDetail)?void 0:l.hour)??!1,minute:(null==(r=O.showDetail)?void 0:r.minute)??!1,second:(null==(u=O.showDetail)?void 0:u.second)??!1}})),R=a((()=>{var e,t,a,l,r,u;return{year:(null==(e=O.showSuffix)?void 0:e.year)??"年",month:(null==(t=O.showSuffix)?void 0:t.month)??"月",hour:(null==(a=O.showSuffix)?void 0:a.hour)??"时",minute:(null==(l=O.showSuffix)?void 0:l.minute)??"分",second:(null==(r=O.showSuffix)?void 0:r.second)??"秒",date:(null==(u=O.showSuffix)?void 0:u.day)??"日"}})),X=a((()=>j.tmStore.dark));let E=t([0,0,0,0,0,0]);const J=t({year:[],month:[],date:[],hour:[],minute:[],second:[]});t(0),a((()=>(g(O.height)-50)/2));const K=a((()=>X.value?"background-image:linear-gradient(rgba(17, 17, 17, 1.0),rgba(106, 106, 106, 0.2)),linear-gradient(rgba(106, 106, 106, 0.2),rgba(17, 17, 17, 1.0))":"background-image:linear-gradient(rgba(255,255,255,0.95),rgba(255,255,255,0.6)),linear-gradient(rgba(255,255,255,0.6),rgba(255,255,255,0.95))"));function P(e){let t=q(J.value,e.detail.value,L.value);J.value=A(t,F.value,G.value,L.value),C.value=U(t),u((()=>{E.value=e.detail.value,t=q(J.value,e.detail.value,L.value),C.value=U(t),_("update:modelValue",C.value.format("YYYY/MM/DD HH:mm:ss")),_("update:modelStr",C.value.format(O.format)),_("change",C.value.format(O.format))}))}function Q(){u((function(){}))}return J.value=A(N.value,F.value,G.value,L.value),l((()=>O.modelValue),(()=>{if(!U(O.modelValue).isValid())return;let e=U(z(O.modelValue,O.start,O.end));U(e).isSame(C.value)||(C.value=e,_("update:modelStr",C.value.format(O.format)),J.value=A(e,F.value,G.value,L.value),E.value=B(J.value,C.value,L.value))})),r((()=>{Q(),u((()=>{_("update:modelValue",C.value.format("YYYY/MM/DD HH:mm:ss")),_("update:modelStr",C.value.format(O.format)),E.value=B(J.value,C.value,L.value)}))})),o((()=>Q())),(e,t)=>{const a=D,l=x,r=S,u=p;return n(),s(l,{class:"flex relative flex-col",style:m({height:O.height+"rpx"})},{default:d((()=>[I.value?(n(),s(u,{key:0,value:i(E),onChange:P,style:m({height:O.height+"rpx"}),"mask-style":i(K),immediateChange:O.immediateChange,"indicator-style":"height:50px"},{default:d((()=>[i(L).year?(n(),s(r,{key:0},{default:d((()=>[(n(!0),f(h,null,c(J.value.year,((e,t)=>(n(),s(l,{key:t,class:w(["flex itemcel flex-row flex-row-center-center",[i(E)[0]==t?"":"UnitemSelected"]])},{default:d((()=>[k(a,{style:m({color:i(j).tmStore.dark?"white":"black"})},{default:d((()=>[Y(b(e+i(R).year),1)])),_:2},1032,["style"])])),_:2},1032,["class"])))),128))])),_:1})):y("v-if",!0),i(L).month?(n(),s(r,{key:1},{default:d((()=>[(n(!0),f(h,null,c(J.value.month,((e,t)=>(n(),s(l,{key:t,class:w(["flex itemcel flex-row flex-row-center-center",[i(E)[1]==t?"":"UnitemSelected"]])},{default:d((()=>[k(a,{style:m({color:i(j).tmStore.dark?"white":"black"})},{default:d((()=>[Y(b(e+1+i(R).month),1)])),_:2},1032,["style"])])),_:2},1032,["class"])))),128))])),_:1})):y("v-if",!0),i(L).day?(n(),s(r,{key:2},{default:d((()=>[(n(!0),f(h,null,c(J.value.date,((e,t)=>(n(),s(l,{key:t,class:w(["flex itemcel flex-row flex-row-center-center",[i(E)[2]==t?"":"UnitemSelected"]])},{default:d((()=>[k(a,{style:m({color:i(j).tmStore.dark?"white":"black"})},{default:d((()=>[Y(b(e+i(R).date),1)])),_:2},1032,["style"])])),_:2},1032,["class"])))),128))])),_:1})):y("v-if",!0),i(L).hour?(n(),s(r,{key:3},{default:d((()=>[(n(!0),f(h,null,c(J.value.hour,((e,t)=>(n(),s(l,{key:t,class:w(["flex itemcel flex-row flex-row-center-center",[i(E)[3]==t?"":"UnitemSelected"]])},{default:d((()=>[k(a,{style:m({color:i(j).tmStore.dark?"white":"black"})},{default:d((()=>[Y(b(e+i(R).hour),1)])),_:2},1032,["style"])])),_:2},1032,["class"])))),128))])),_:1})):y("v-if",!0),i(L).minute?(n(),s(r,{key:4},{default:d((()=>[(n(!0),f(h,null,c(J.value.minute,((e,t)=>(n(),s(l,{key:t,class:w(["flex itemcel flex-row flex-row-center-center",[i(E)[4]==t?"":"UnitemSelected"]])},{default:d((()=>[k(a,{style:m({color:i(j).tmStore.dark?"white":"black"})},{default:d((()=>[Y(b(e+i(R).minute),1)])),_:2},1032,["style"])])),_:2},1032,["class"])))),128))])),_:1})):y("v-if",!0),i(L).second?(n(),s(r,{key:5},{default:d((()=>[(n(!0),f(h,null,c(J.value.second,((e,t)=>(n(),s(l,{key:t,class:w(["flex itemcel flex-row flex-row-center-center",[i(E)[5]==t?"":"UnitemSelected"]])},{default:d((()=>[k(a,{style:m({color:i(j).tmStore.dark?"white":"black"})},{default:d((()=>[Y(b(e+i(R).second),1)])),_:2},1032,["style"])])),_:2},1032,["class"])))),128))])),_:1})):y("v-if",!0)])),_:1},8,["value","style","mask-style","immediateChange"])):y("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-698f096a"]]);export{F as t};
