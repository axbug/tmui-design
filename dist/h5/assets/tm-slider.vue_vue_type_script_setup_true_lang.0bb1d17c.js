var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,o,l)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,n=(e,t)=>{for(var o in t||(t={}))a.call(t,o)&&i(e,o,t[o]);if(l)for(var o of l(t))r.call(t,o)&&i(e,o,t[o]);return e},u=(e,l)=>t(e,o(l)),s=(e,t,o)=>new Promise(((l,a)=>{var r=e=>{try{n(o.next(e))}catch(t){a(t)}},i=e=>{try{n(o.throw(e))}catch(t){a(t)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);n((o=o.apply(e,t)).next())}));import{d,c,o as h,a as f,w as m,b as p,u as x,n as v,N as w,K as y,i as b,U as g,e as z,j as T,F as N,f as M,r as S,ad as _,Q as k,O as V,g as L,P as j}from"./index-6b165856.js";import{t as C}from"./tm-sheet.3639b36a.js";import{t as P}from"./tm-text.6c910eb0.js";import{t as O}from"./tm-icon.65b53dc0.js";const X=d({__name:"slider-bar",props:{followTheme:{type:[Boolean,String],default:!0},size:{type:Number,default:6},x:{type:Number,dfault:0},width:{type:Number,dfault:0},color:{type:String,default:"primary"},direction:{type:String,default:"vertical"}},setup(e){const t=e,o=c((()=>y(t.size)));return(e,l)=>{const a=b;return h(),f(a,{style:v(["horizontal"==t.direction?{width:t.width+"px",height:t.size+"rpx",left:t.x+"px",top:-t.size+"rpx"}:{height:t.width+"px",width:t.size+"rpx",top:t.x+"px"}]),class:w(["relative","horizontal"==t.direction?"flex flex-col":"flex flex-row absolute"])},{default:m((()=>[p(C,{followTheme:t.followTheme,round:10,unit:"px",color:t.color,linear:"right",width:"horizontal"==t.direction?t.width:x(o),height:"horizontal"==t.direction?x(o):t.width,margin:[0,0],padding:[0,0]},null,8,["followTheme","color","width","height"])])),_:1},8,["style","class"])}}}),Y=d(u(n({},{data:()=>({hehe:9999}),mounted(){}}),{__name:"slider-button",props:{followTheme:{type:[Boolean,String],default:!0},size:{type:Number,default:40},x:{type:Number,dfault:0},color:{type:String,default:"primary"},direction:{type:String,default:"vertical"}},emits:["movestart","moveing","moveend"],setup(e,{emit:t}){const o=e,l=c((()=>o.x));let a=NaN;function r(e){let o=e.type.toLocaleLowerCase(),l=0,a=0;"mousedown"==o?(l=e.pageX,a=e.pageY):"touchstart"==o&&(l=e.changedTouches[0].pageX,a=e.changedTouches[0].pageY),t("movestart",{x:l,y:a})}function i(e){let o=e.type.toLocaleLowerCase(),l=0,r=0;"mousemove"==o?(l=e.pageX,r=e.pageY):"touchmove"==o&&(l=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY),function(e,t=500,o=!1){if(isNaN(a)||clearTimeout(a),o){var l=!a;a=setTimeout((()=>{a=NaN}),t),l&&"function"==typeof e&&e()}else a=setTimeout((()=>{"function"==typeof e&&e()}),t)}((()=>{t("moveing",{x:l,y:r})}),5,!1),e.preventDefault(),e.stopPropagation()}function n(e){let o=e.type.toLocaleLowerCase(),l=0,a=0;"mouseup"==o||"mouseleave"==o?(l=e.pageX,a=e.pageY):"touchend"==o&&(l=e.changedTouches[0].pageX,a=e.changedTouches[0].pageY),t("moveend",{x:l,y:a})}return(e,t)=>{const a=b;return h(),f(a,{onTouchstart:g(r,["stop"]),onMousedown:g(r,["stop"]),onTouchmove:g(i,["stop"]),onMousemove:g(i,["stop"]),onTouchend:g(n,["stop"]),onMouseup:g(n,["stop"]),onMouseleave:g(n,["stop"]),class:"absolute",style:v(["horizontal"==o.direction?{width:o.size+"rpx",height:o.size+"rpx",transform:`translateX(${x(l)}px)`,top:"0px"}:"","vertical"==o.direction?{width:o.size+"rpx",height:o.size+"rpx",transform:`translateY(${x(l)}px)`,left:"0rpx",top:"0px"}:""])},{default:m((()=>[p(C,{followTheme:o.followTheme,shadow:1,border:4,userInteractionEnabled:!1,color:o.color,round:24,width:o.size,height:o.size,margin:[0,0],padding:[0,0]},null,8,["followTheme","color","width","height"])])),_:1},8,["onTouchstart","onMousedown","onTouchmove","onMousemove","onTouchend","onMouseup","onMouseleave","style"])}}}));var $=0,F=0;const q={setDefaultXY:function(e,t){return e},lastLeft:F,touchstart:function(e,t){console.log(JSON.stringify(t.selectComponent(".movable")));var o=e.touches[0]||e.changedTouches[0];$=o.pageX,o.pageY},touchmove:function(e,t){var o=e.touches[0]||e.changedTouches[0],l=o.pageX;o.pageY;var a=l-$+F;return $=l,F=a,t.selectComponent(".movable").setStyle({left:a+"px"}),!1}},A=e=>{e.$wxs||(e.$wxs=[]),e.$wxs.push("test"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.test=q}})};A(Y);const B=d({__name:"slider-label",props:{direction:{type:String,default:"horizontal"},width:{type:Number,default:0},height:{type:Number,default:0},max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:0},size:{type:Number,default:32}},setup(e){const t=e,o=c((()=>{let e=[];if(0==t.step)return[];let o=t.max/t.step;for(let l=1;l<=t.step;l++)e.push(l*o);return[t.min,...e]}));return(l,a)=>{const r=b;return h(),z(N,null,[T(" 底部显示的标签 "),p(r,{class:w(["flex flex-between",["vertical"==t.direction?"flex-col":"flex-row"]]),style:v(["horizontal"==t.direction?{width:e.width+"rpx"}:{height:e.height+"rpx"}])},{default:m((()=>["horizontal"==t.direction?(h(!0),z(N,{key:0},M(x(o),((e,t)=>(h(),f(r,{class:w(["flex flex-row",[0==t?"flex-row-top-start":"",t==x(o).length-1?"flex-row-top-end":"",t<x(o).length-1&&t>0?"flex-row-top-center":""]]),style:{width:"80rpx"},key:t},{default:m((()=>[p(P,{"font-size":24,label:e},null,8,["label"])])),_:2},1032,["class"])))),128)):T("v-if",!0),"horizontal"!=t.direction?(h(!0),z(N,{key:1},M(x(o),((e,t)=>(h(),f(r,{class:"flex flex-row flex-row-center-start",style:{width:"80rpx"},key:t},{default:m((()=>[p(P,{"font-size":24,label:e},null,8,["label"])])),_:2},1024)))),128)):T("v-if",!0)])),_:1},8,["class","style"])],2112)}}}),I=d({__name:"slider-mask",props:{followTheme:{type:[Boolean,String],default:!0},direction:{type:String,default:"horizontal"},width:{type:Number,default:0},height:{type:Number,default:0},max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:0},size:{type:Number,default:32},color:{type:String,default:"primary"}},setup(e){const t=e,o=c((()=>{let e=[];if(0==t.step)return[];let o=t.max/t.step;for(let l=1;l<=t.step;l++)e.push(l*o);return[t.min,...e]}));return(l,a)=>{const r=b;return h(),z(N,null,[T(" 底部显示的标签 "),p(r,{class:w(["flex flex-between absolute",["vertical"==t.direction?"flex-col ":"flex-row"]]),style:v(["horizontal"==t.direction?{width:e.width+"rpx",top:(t.size-12)/2-2+"rpx"}:{height:e.height+"rpx",top:"0px",left:(t.size-12)/2+2+"rpx"}])},{default:m((()=>["horizontal"==t.direction?(h(!0),z(N,{key:0},M(x(o),((e,l)=>(h(),f(r,{class:w(["flex flex-row relative",[0==l?"flex-row-top-start":"",l==x(o).length-1?"flex-row-top-end":"",l<x(o).length-1&&l>0?"flex-row-top-center":""]]),style:{width:"80rpx"},key:l},{default:m((()=>[p(C,{followTheme:t.followTheme,color:t.color,round:6,margin:[0,0],padding:[0,0],width:12,height:12,text:"",border:1},null,8,["followTheme","color"])])),_:2},1032,["class"])))),128)):T("v-if",!0),"horizontal"!=t.direction?(h(!0),z(N,{key:1},M(x(o),((e,o)=>(h(),f(r,{translate:!0,class:"flex flex-row flex-row-center-start relative",style:{width:"80rpx"},key:o},{default:m((()=>[p(C,{followTheme:t.followTheme,round:6,margin:[0,0],padding:[0,0],width:12,height:12,color:"primary",text:"",border:1},null,8,["followTheme"])])),_:2},1024)))),128)):T("v-if",!0)])),_:1},8,["class","style"])],2112)}}}),E=d({__name:"tm-slider",props:{followTheme:{type:[Boolean,String],default:!0},width:{type:Number,default:500},height:{type:Number,default:8},buttonSize:{type:Number,default:52},direction:{type:String,default:"horizontal"},color:{type:String,default:"primary"},bgColor:{type:String,default:"grey-3"},max:{type:Number,default:100},min:{type:Number,default:0},defaultValue:{type:[Array,Number],default:0},modelValue:{type:[Array,Number],default:0},formart:{type:Function,default:()=>e=>e},showLabel:{type:Boolean,default:!1},step:{type:Number,default:5},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t}){var o,l,a;const r=e,i=S(null),d=S(null),g=null!=(l=null==(o=L())?void 0:o.proxy)?l:null,z=c((()=>y(r.width))),N=S(!1),M=c((()=>r.disabled)),$=S([{x:0,y:0},{x:0,y:0}]);let F=0,q=z.value;const A=S(!1),E=S({left:0,bottom:0}),D=c((()=>"horizontal"==r.direction?r.width+r.buttonSize:r.buttonSize)),R=c((()=>"horizontal"==r.direction?r.buttonSize:r.width+r.buttonSize)),J=S(0),K=S(!1),Q=c((()=>r.max-r.min)),U=c((()=>Math.abs($.value[0].x-$.value[1].x))),G=c((()=>Math.min(Math.abs($.value[0].x),Math.abs($.value[1].x)))),H=S(0),W=S(!1);"object"==typeof r.defaultValue&&Array.isArray(r.defaultValue)&&(W.value=!0),function(){if(W.value){let e=Number(r.defaultValue[0]);e=e>=Q.value?Q.value:e,e=e<=r.min?r.min:e;let t=Math.abs(e/Q.value*y(r.width));$.value[0].x=t;let o=Number(r.defaultValue[1]);o=o>=Q.value?Q.value:o,o=o<=r.min?r.min:o;let l=Math.abs(o/Q.value*y(r.width));$.value[1].x=l}else{let e=Number(r.defaultValue);e=e>=Q.value?Q.value:e,e=e<=r.min?r.min:e;let t=Math.abs(e/Q.value*y(r.width));$.value[0].x=t}}(),_((()=>{let e=Math.ceil(Math.abs($.value[J.value].x)/y(r.width)*Q.value+r.min);if("function"==typeof r.formart){let t=r.formart(e);"function"==typeof t&&(t=t(e)),e=t}H.value=e})),t("update:modelValue",ee());const Z=ee();function ee(){return W.value?[Math.ceil(Math.abs($.value[0].x)/y(r.width)*Q.value+r.min),Math.ceil(Math.abs($.value[1].x)/y(r.width)*Q.value+r.min)]:Math.ceil(Math.abs($.value[0].x)/y(r.width)*Q.value+r.min)}function te(e,t){r.disabled||(N.value=!0,F="horizontal"==r.direction?e.x-$.value[t].x:e.y-$.value[t].x,J.value=t)}function oe(e,t){if(r.disabled)return;if(!N.value)return;let o=e.x-F;"horizontal"!=r.direction&&(o=e.y-F),o<0?o=0:o>q&&(o=q),$.value[t].x=o,K.value=!0}function le(e,o){r.disabled||(N.value=!1,K.value=!1,t("update:modelValue",ee()),t("change",ee()),ne())}k((()=>r.modelValue),(()=>{W.value?($.value[0].x=Math.abs(Number(r.modelValue[0])/Q.value*y(r.width)),$.value[1].x=Math.abs(Number(r.modelValue[1])/Q.value*y(r.width))):$.value[0].x=Math.abs(Number(r.modelValue)/Q.value*y(r.width))}));const ae=V("tmFormItemRules",c((()=>[{message:"请选择",required:!1,validator:!1}])));let re=null==g?void 0:g.$parent;for(;re&&"tmFormComnameFormItem"!=(null==re?void 0:re.tmFormComnameFormItem)&&re;)re=null!=(a=null==re?void 0:re.$parent)?a:void 0;const ie=e=>{let t=(e=e.map((e=>"function"==typeof e.validator&&!0===e.required?e:"boolean"==typeof e.validator&&!0===e.required?u(n({},e),{validator:e=>Array.isArray(e)?0==e.reduce(((e,t)=>Number(e)+Number(t))):0==Number(e)}):u(n({},e),{validator:e=>!0})))).filter((e=>"function"==typeof e.validator&&!0===e.required)),o=ee(),l=t.map((e=>new Promise(((t,l)=>s(this,null,(function*(){if("function"==typeof e.validator){(yield e.validator(o))?t({message:String(e.message),validator:!0}):l({message:e.message,validator:!1})}else t({message:e.message,validator:!0})}))))));return Promise.all(l)};function ne(e=!0){return s(this,null,(function*(){if(re&&e){let e=ee();ie(j(ae.value)).then((t=>{re.pushCom({value:e,isRequiredError:!1,componentsName:"tm-slider",message:0==t.length?"":t[0].message})})).catch((t=>{re.pushCom({value:e,isRequiredError:!0,componentsName:"tm-slider",message:t.message})}))}}))}ne();const ue=V("tmFormFun",c((()=>"")));return k(ue,(()=>{"reset"==ue.value&&(t("update:modelValue",Z),ne(!1))})),(e,t)=>{const o=b;return h(),f(o,{class:w(["flex",["vertical"==r.direction?"flex-row":"flex-col",x(M)?"opacity-6":""]])},{default:m((()=>[p(o,{class:w(["relative flex flex-col",["horizontal"==r.direction?"flex-col-center-start":"flex-row-center-center"]]),style:v([{width:x(D)+"rpx",height:x(R)+"rpx"}])},{default:m((()=>[p(C,{noLevel:"",round:10,color:r.bgColor,height:"horizontal"==r.direction?r.height:x(R),width:"horizontal"==r.direction?x(D):r.height,margin:[0,0],padding:[0,0]},null,8,["color","height","width"]),p(X,{followTheme:r.followTheme,class:w(["horizontal"==r.direction?"flex-col-center-start":"flex-row-center-center"]),direction:r.direction,color:r.color,size:r.height,x:x(G),width:x(U)},null,8,["followTheme","class","direction","color","size","x","width"]),r.showLabel?(h(),f(I,{key:0,followTheme:r.followTheme,color:r.color,size:r.buttonSize,step:r.step,min:r.min,max:r.max,width:x(D),height:x(R),direction:r.direction},null,8,["followTheme","color","size","step","min","max","width","height","direction"])):T("v-if",!0),p(Y,{maxLeft:x(q),followTheme:r.followTheme,direction:r.direction,ref_key:"btn0",ref:i,color:r.color,x:$.value[0].x,onMovestart:t[0]||(t[0]=e=>te(e,0)),onMoveing:t[1]||(t[1]=e=>oe(e,0)),onMoveend:t[2]||(t[2]=e=>le()),size:r.buttonSize},null,8,["maxLeft","followTheme","direction","color","x","size"]),W.value?(h(),f(Y,{key:1,maxLeft:x(q),followTheme:r.followTheme,direction:r.direction,ref_key:"btn1",ref:d,color:r.color,x:$.value[1].x,onMovestart:t[3]||(t[3]=e=>te(e,1)),onMoveing:t[4]||(t[4]=e=>oe(e,1)),onMoveend:t[5]||(t[5]=e=>le()),size:r.buttonSize},null,8,["maxLeft","followTheme","direction","color","x","size"])):T("v-if",!0)])),_:1},8,["class","style"]),r.showLabel?(h(),f(o,{key:0,class:w(["vertical"==r.direction?"flex-col":"flex-row"])},{default:m((()=>[p(B,{size:r.buttonSize,step:r.step,min:r.min,max:r.max,width:x(D),height:x(R),direction:r.direction},null,8,["size","step","min","max","width","height","direction"])])),_:1},8,["class"])):T("v-if",!0),K.value?(h(),f(o,{key:1,class:w(["flex absolute",["horizontal"==r.direction?"flex-col flex-col-start-center":" flex-row "]]),style:v(["horizontal"==r.direction?{width:r.width+r.buttonSize+"rpx"}:{height:r.width+r.buttonSize+"rpx"}])},{default:m((()=>[p(o,{class:w([[A.value?"fixed":"absolute ","horizontal"==r.direction?A.value?"t-0":"b-0":"t-0 "],"mb-0 flex flex-col flex-col-bottom-center"]),style:v([A.value?{left:`${E.value.left}px`,top:`${E.value.bottom}px`}:"horizontal"==r.direction?{transform:`translateX(${$.value[J.value].x}px)`,left:-(100-r.buttonSize+24)/2+"rpx"}:{transform:`translateY(${$.value[J.value].x}px)`,top:"-70rpx",left:-(100-r.buttonSize+24)/2+"rpx"}])},{default:m((()=>[p(C,{_class:"flex-center",color:"grey-darken-5",border:2,margin:[0,0],padding:[10,6],width:100,round:3},{default:m((()=>[p(P,{label:H.value},null,8,["label"])])),_:1}),p(O,{color:"grey-darken-5",_class:"t--10","font-size":32,name:"tmicon-sort-down-nogap-copy"})])),_:1},8,["class","style"])])),_:1},8,["class","style"])):T("v-if",!0)])),_:1},8,["class"])}}});export{E as _};
