import{d as e,I as t,c as a,r as l,at as o,R as n,o as i,a as r,w as u,k as c,b as d,u as s,n as f,N as p,L as v,j as m,_ as b,P as y,M as x,O as h,g,m as w}from"./index-5c06cf16.js";import{c as S,u as _,t as T}from"./tm-app.20954b06.js";import{t as C}from"./tm-sheet.2873fe67.js";import{t as k}from"./tm-text.fdd4f0a8.js";import{_ as I}from"./tm-badge.vue_vue_type_script_setup_true_lang.03b3afc8.js";import{t as z}from"./tm-icon.5716c798.js";const N=b(e({__name:"tm-tabbar",props:{...S,transprent:{type:[Boolean],default:!1},color:{type:[String],default:"white"},text:{type:[Boolean],default:!1},round:{type:[Number],default:0},shadow:{type:[Number],default:0},width:{type:[Number],default:0},bottom:{type:[Number],default:0},showSafe:{type:[Boolean],default:!1},active:{type:Number,default:-1},autoSelect:{type:Boolean,default:!0},zIndex:{type:[Number],default:200}},emits:["change","update:active"],setup(e,{expose:b,emit:y}){var x;const h=e;_();let g=t();const w=a((()=>v(h.width)||(null==g?void 0:g.windowWidth)||750)),S=a((()=>h.blur)),T=l(""),k=l(""),I=l([]),z=l(h.showSafe),N=l(h.active);((null==(x=null==g?void 0:g.safeAreaInsets)?void 0:x.bottom)??0)>0&&(z.value=!0);const B=a((()=>z.value?90:75)),D=a((()=>z.value?75:60));return b({tmTabbarId:"tmTabbarId",setNowurl:function(e,t){T.value=e,k.value=String(t)},pushKey:function(e){I.value=[...new Set([...I.value,e])]},delKey:function(e){I.value=I.value.filter((t=>t!=e))}}),o("tmTabbarUrl",a((()=>T.value))),o("tmTabbarUid",a((()=>k.value))),o("tmTabbarWidth",a((()=>Math.ceil(w/I.value.length)))),o("tmTabbarItemList",a((()=>I.value))),o("tmTabbarItemActive",a((()=>N.value))),o("tmTabbarItemSafe",z.value),o("tmTabbarItemAutoSelect",a((()=>h.autoSelect))),n((()=>h.active),(()=>{h.active!=N.value&&(N.value=h.active)})),n(N,(()=>{y("change",N.value),y("update:active",N.value)})),(e,t)=>{const a=m;return i(),r(a,{class:"fixed l-0 b-0 flex tabbar",style:f({width:s(w)+"px",height:s(B)+"px",transform:`translateY(${h.bottom}rpx)`,zIndex:h.zIndex})},{default:u((()=>[c(" \t\t\t@click=\"emits('click', $event)\"    "),d(a,{class:"relative",style:{top:"15px"}},{default:u((()=>[d(C,{blur:s(S),color:h.color,parenClass:"relative",class:"relative",followTheme:h.followTheme,dark:h.dark,round:h.round,shadow:h.shadow,outlined:h.outlined,border:0,borderDirection:"top",text:h.text,transprent:!1,linear:h.linear,linearDeep:h.linearDeep,margin:[0,0],padding:[0,0],height:s(D),width:s(w),unit:"px"},null,8,["blur","color","followTheme","dark","round","shadow","outlined","text","linear","linearDeep","height","width"])])),_:1}),d(a,{class:"absolute flex flex-col l-0",style:f({width:s(w)+"px",height:s(B)+"px"})},{default:u((()=>[d(a,{class:"relative barcont flex flex-row flex-row-top-center flex-around flex-1",style:f({width:s(w)+"px"})},{default:u((()=>[p(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["style"])])),_:3},8,["style"])}}}),[["__scopeId","data-v-3592a317"]]),B=b(e({__name:"tm-tabbar-item",props:{...S,followTheme:{type:[Boolean,String],default:!0},transprent:{type:Boolean,default:!0},color:{type:String,default:"white"},fontColor:{type:String,default:"grey-darken-1"},linear:{type:String,default:""},activeColor:{type:String,default:"primary"},active:{type:Boolean,default:!1},btnTop:{type:Boolean,default:!1},text:{type:String,default:""},icon:{type:String,default:""},unicon:{type:String,default:""},textSize:{type:Number,default:20},iconSize:{type:Number,default:38},dot:{type:[Boolean],default:!1},dotColor:{type:[String],default:"red"},dotIcon:{type:[String],default:""},count:{type:[Number,String],default:0},maxCount:{type:[Number],default:99},url:{type:[String],default:""},openType:{type:String,default:"navigate"},beforeClick:{type:[Function,Boolean],default:()=>!1},load:{type:[Boolean,String],default:!1},data:{type:[Object,String,Number],default:()=>{}},disabled:{type:Boolean,default:!1},customicon:{type:Boolean,default:!1}},emits:["click","beforeClick"],setup(e,{emit:t}){var o;const f=e,v=_(),b=(null==(o=g())?void 0:o.proxy)??null,S=a((()=>f.btnTop)),T=a((()=>!0!==S.value)),N=a((()=>!0!==S.value?"top:15px":"top:0px")),B=a((()=>[0,0])),D=a((()=>f.disabled)),j=l(f.load),$=l(!1),U=a((()=>({dotColor:f.dotColor,text:f.text,icon:f.icon,textSize:f.textSize,iconSize:f.iconSize,unicon:f.unicon}))),A=uni.$tm.u.getUid(1),K=y("tmTabbarWidth",a((()=>50))),L=a((()=>!0===S.value?60:K.value));y("tmTabbarUrl",a((()=>"")));const P=y("tmTabbarItemList",a((()=>[]))),O=y("tmTabbarUid",a((()=>"")));y("tmTabbarItemSafe",!1);const W=y("tmTabbarItemActive",a((()=>-1))),M=y("tmTabbarItemAutoSelect",a((()=>!1))),E=a((()=>!0!==$.value||S.value?f.fontColor:v.tmStore.color&&f.followTheme?v.tmStore.color:f.activeColor));let F=null==b?void 0:b.$parent;for(;F&&"tmTabbarId"!=(null==F?void 0:F.tmTabbarId)&&F;)F=(null==F?void 0:F.$parent)??void 0;function H(){O.value==A?$.value=!0:$.value=!1}async function J(){if(!j.value&&!D.value){if("function"==typeof f.beforeClick){j.value=!0;let e=await f.beforeClick(f.data);if("function"==typeof e&&(e=await e(f.data)),j.value=!1,!e)return}t("click"),w((()=>{M.value&&(F&&F.setNowurl(f.url,A),H()),""!=f.url&&uni.$tm.u.routerTo(f.url,f.openType)}))}}return F&&F.pushKey(A),x((()=>{F&&F.delKey(A)})),M.value?$.value=f.active||!1:P.value[W.value]==A?$.value=!0:$.value=!1,n([O,()=>f.active],(()=>{M.value&&H()})),n(W,(()=>{M.value||(P.value[W.value]==A?w((()=>{$.value=!0})):w((()=>{$.value=!1})))})),n([()=>f.load],(()=>{j.value=f.load})),(e,t)=>{const a=m;return i(),r(a,{class:"flex flex-col flex-col-top-center",style:{height:"75px"}},{default:u((()=>[d(C,{height:60,width:s(L),round:24,unit:"px",_class:"flex-center flex ",parenClass:"relative",class:"relative",_style:s(N),followTheme:s(S)&&f.followTheme,transprent:s(T),color:f.color,margin:[0,0],padding:s(B),shadow:f.shadow,outlined:f.outlined,border:f.border,borderStyle:f.borderStyle,borderDirection:f.borderDirection,linear:f.linear,linearDeep:f.linearDeep,onClick:J},{default:u((()=>[d(I,{fontSize:20,color:s(U).dotColor,eventPenetrationEnabled:!0,dot:f.dot,count:f.count,icon:f.dotIcon,maxCount:f.maxCount},{default:u((()=>[d(a,{class:h([[$.value?"anifun":""],"flex flex-col flex-col-center-center"]),style:{width:"65px",height:"30px"}},{default:u((()=>[p(e.$slots,"default",{},(()=>[j.value?c("v-if",!0):(i(),r(z,{key:0,customicon:f.customicon,_style:"line-height: 0px;",color:s(E),"font-size":s(U).iconSize,name:$.value?s(U).icon:s(U).unicon||s(U).icon},null,8,["customicon","color","font-size","name"]))]),!0),j.value?(i(),r(z,{key:0,spin:"",_style:"line-height: 0px;",color:s(E),"font-size":s(U).iconSize,name:"tmicon-shuaxin"},null,8,["color","font-size"])):c("v-if",!0)])),_:3},8,["class"])])),_:3},8,["color","dot","count","icon","maxCount"]),""!==s(U).text?(i(),r(k,{key:0,color:s(E),_class:"pb-0","font-size":s(U).textSize,label:s(U).text},null,8,["color","font-size","label"])):c("v-if",!0)])),_:3},8,["width","_style","followTheme","transprent","color","padding","shadow","outlined","border","borderStyle","borderDirection","linear","linearDeep"])])),_:3})}}}),[["__scopeId","data-v-07282cf5"]]),D=e({__name:"tabbar",setup(e){const t=l(1);function a(e){return new Promise((t=>{setTimeout((function(){console.log("选中了：",e),t(!0)}),2e3)}))}return(e,l)=>(i(),r(T,null,{default:u((()=>[d(C,null,{default:u((()=>[d(k,{label:"点击中间+按钮可以体验异步加载动态效果."})])),_:1}),d(N,{autoSelect:!1,active:t.value,"onUpdate:active":l[5]||(l[5]=e=>t.value=e)},{default:u((()=>[d(B,{onClick:l[0]||(l[0]=e=>t.value=0),activeColor:"orange",count:"HOT","open-type":"reLaunch",text:"首页",icon:"tmicon-collection-fill"}),d(B,{onClick:l[1]||(l[1]=e=>t.value=1),activeColor:"orange",text:"表单",icon:"tmicon-cog-fill"}),d(B,{onClick:l[2]||(l[2]=e=>t.value=2),shadow:2,beforeClick:a,data:"中间项","btn-top":"",fontColor:"white",activeColor:"white",linear:"top",linearDeep:"accent",color:"yellow",icon:"tmicon-plus"}),d(B,{onClick:l[3]||(l[3]=e=>t.value=3),activeColor:"orange",url:"/pages/fankui/index",text:"反馈分类",unicon:"tmicon-like",icon:"tmicon-heart-fill"}),d(B,{onClick:l[4]||(l[4]=e=>t.value=4),activeColor:"orange",count:8,url:"/pages/chart/index",active:"",text:"图表中心",unicon:"tmicon-account",icon:"tmicon-userplus-fill"})])),_:1},8,["active"])])),_:1}))}});export{D as default};
