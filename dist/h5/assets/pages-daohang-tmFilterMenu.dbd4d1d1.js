var e=Object.defineProperty,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,l,o)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[l]=o,n=(e,n)=>{for(var u in n||(n={}))l.call(n,u)&&a(e,u,n[u]);if(t)for(var u of t(n))o.call(n,u)&&a(e,u,n[u]);return e};import{d as u,O as i,c as r,r as s,m as c,k as f,I as d,Q as p,at as m,o as v,a as h,w as x,j as _,b as g,u as y,e as b,f as k,F as w,U as C,n as N,N as I,M as S,g as z,K as V,P as j,i as M,_ as F,L as B,$ as E}from"./index-6b165856.js";import{u as H,t as P}from"./tm-app.d6cf2f93.js";import{t as T}from"./tm-sheet.3639b36a.js";import{t as O}from"./tm-text.6c910eb0.js";import{t as $}from"./tm-icon.65b53dc0.js";import{_ as K}from"./tm-divider.vue_vue_type_script_setup_true_lang.cbbfcb4c.js";import{_ as U}from"./tm-checkbox-group.vue_vue_type_script_setup_true_lang.f290cdb3.js";import{_ as A}from"./tm-checkbox.vue_vue_type_script_setup_true_lang.18bf0ebb.js";import{_ as D,a as L}from"./tm-radio.vue_vue_type_script_setup_true_lang.b4efeb1c.js";import{t as R}from"./tm-input.f9dbb6fc.js";import{_ as q}from"./tm-tag.vue_vue_type_script_setup_true_lang.d2d6f72e.js";import{t as J}from"./tm-button.80fc9b3b.js";import{t as Q}from"./tm-sticky.45d4222b.js";import"./tm-translate.1f1c80c0.js";const Y=F(u({__name:"tm-filterMenu",props:{width:{type:Number,default:750},height:{type:Number,default:70},color:{type:String,default:"white"},activeColor:{type:String,default:"primary"},modelValue:{type:Number,default:NaN},fixed:{type:Boolean,default:!1}},emits:["click","close","cancel","confirm","onButton","update:modelValue"],setup(e,{expose:t,emit:l}){var o,a;const u=e,F=null!=(a=null==(o=z())?void 0:o.proxy)?a:null,B=H(),E=i("tmuiSysInfo",r((()=>({bottom:0,height:750,width:V(750),top:0,isCustomHeader:!1,sysinfo:null})))),P=s(0),K=s(0),U=s([]),A=r((()=>Math.ceil(u.width/(U.value.length||1)))),D=s(u.modelValue),L=r((()=>u.fixed)),R=r((()=>{if(isNaN(D.value))return!1;let e=U.value[D.value];return!e||e.isButton}));function q(e,t){if(D.value===t)return R.value&&l("onButton",!1,t),D.value=NaN,l("update:modelValue",NaN),void l("cancel");D.value=t,l("click",e,t),R.value&&l("onButton",!0,t),l("update:modelValue",t)}function J(){D.value=NaN,l("close"),l("update:modelValue",NaN),l("cancel")}function Q(e){null==e||e.preventDefault(),null==e||e.stopPropagation()}return c((()=>{f((()=>{d().in(F).select("#filterMenu").boundingClientRect().exec((e=>{if(!e[0])return;let t=e[0];P.value=t.left,K.value=t.top}))}))})),p((()=>u.modelValue),(()=>{D.value=u.modelValue})),m("activeIndex",r((()=>D.value))),m("AllList",r((()=>U.value))),m("FilterMenuMaxHeight",r((()=>E.value.height+K.value))),t({FilterMenu:"FilterMenu",pushKey:function(e){let t=U.value.findIndex((t=>t.id==e.id));t>-1?U.value[t]=n({},e):U.value.push(n({},e))},delKey:function(e){let t=U.value.findIndex((t=>t.id==e));t>-1&&U.value.splice(t,1)},close:J,filterCancel:function(){D.value=NaN,l("update:modelValue",NaN),l("cancel")},filterConfirm:function(){D.value=NaN,l("update:modelValue",NaN),l("confirm",j(U.value[D.value]),j(D.value))}}),(e,t)=>{const l=M;return v(),h(l,{class:"relative",ref:"filterMenu",id:"filterMenu",style:N({width:u.width+"rpx"})},{default:x((()=>[_(" 静态菜单 "),g(T,{color:u.color,margin:[0,0],padding:[0,0],height:u.height,width:u.width,_class:"flex flex-row flex-row-center-center"},{default:x((()=>[isNaN(D.value)||y(R)?(v(!0),b(w,{key:0},k(U.value,((e,t)=>(v(),h(l,{onClick:l=>q(e,t),style:N({height:u.height+"rpx",width:y(A)+"rpx"}),class:"flex flex-row flex-row-center-center",key:t},{default:x((()=>[g(O,{userInteractionEnabled:!1,label:e.text,"font-size":e.fontSize,color:D.value==t?e.fontColor:y(B).tmStore.dark?"":e.unFontColor,_class:"pr-12"},null,8,["label","font-size","color"]),e.icon&&e.unIcon?(v(),h($,{key:0,userInteractionEnabled:!1,"font-size":e.fontSize-4,name:D.value==t?e.icon:e.unIcon,color:D.value==t?e.fontColor:y(B).tmStore.dark?"":e.unFontColor},null,8,["font-size","name","color"])):_("v-if",!0)])),_:2},1032,["onClick","style"])))),128)):_("v-if",!0)])),_:1},8,["color","height","width"]),_(" 背景遮罩,透明背景 "),g(l,{onClick:J,onTouchmove:C(Q,["stop"]),class:"bg fixed",style:N({left:(isNaN(D.value)||y(R)?"-10000":0)+"px",top:"0px",height:y(E).height+"px",width:y(E).width+"px"})},null,8,["onTouchmove","style"]),_(" 动态菜单及内容的背景 "),g(l,{onClick:J,onTouchmove:C(Q,["stop"]),class:I([[isNaN(D.value)?"bgAnioff":"bgAni"],"bgContent fixed"]),style:N({left:(isNaN(D.value)||y(R)?"-10000":P.value)+"px",top:y(L)?y(E).top+"px":K.value+y(E).top+"px",width:u.width+"rpx",height:y(E).height+K.value+"px"})},null,8,["onTouchmove","class","style"]),_(" 动态菜单及内容 "),g(l,{onClick:J,onTouchmove:C(Q,["stop"]),class:"content fixed",style:N({left:(isNaN(D.value)||y(R)?"-10000":P.value)+"px",top:y(L)?y(E).top+"px":K.value+y(E).top+"px",width:u.width+"rpx",height:y(E).height+K.value+"px"})},{default:x((()=>[g(T,{shadow:1,color:u.color,margin:[0,0],padding:[0,0],height:u.height,width:u.width,_class:"flex flex-row flex-row-center-center"},{default:x((()=>[(v(!0),b(w,null,k(U.value,((e,t)=>(v(),h(l,{onClick:C((l=>q(e,t)),["stop"]),style:N({height:u.height+"rpx",width:y(A)+"rpx"}),class:"flex flex-row flex-row-center-center",key:t},{default:x((()=>[g(O,{userInteractionEnabled:!1,label:e.text,"font-size":e.fontSize,color:D.value==t?e.fontColor:y(B).tmStore.dark?"":e.unFontColor,_class:"pr-12"},null,8,["label","font-size","color"]),e.icon&&e.unIcon?(v(),h($,{key:0,userInteractionEnabled:!1,"font-size":e.fontSize-4,name:D.value==t?e.icon:e.unIcon,color:D.value==t?e.fontColor:y(B).tmStore.dark?"":e.unFontColor},null,8,["font-size","name","color"])):_("v-if",!0)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["color","height","width"]),S(e.$slots,"default",{},void 0,!0)])),_:3},8,["onTouchmove","style"])])),_:3},8,["style"])}}}),[["__scopeId","data-v-f5e18046"]]),G=F(u({__name:"tm-filterMenu-item",props:{title:{type:String,default:"",require:!0},icon:{type:String,default:"tmicon-angle-up"},unIcon:{type:String,default:"tmicon-angle-down"},height:{type:Number,default:500},footerHeight:{type:Number,default:0},unit:{type:String,default:"rpx"},fontSize:{type:Number,default:28},fontColor:{type:String,default:"primary"},unFontColor:{type:String,default:"black"},isButton:{type:Boolean,default:!1},bgColor:{type:String,default:"white"},uuid:{type:[String,Number],default:""}},setup(e){var t,l,o;const a=e,n=null!=(l=null==(t=z())?void 0:t.proxy)?l:null,u=r((()=>a));let d=NaN;const m=i("activeIndex",r((()=>0))),b=i("FilterMenuMaxHeight",r((()=>0))),k=i("AllList",r((()=>[]))),w="filterItem_"+uni.$tm.u.getUid(1),I=r((()=>a.uuid)),V=s(!1);let j=null==n?void 0:n.$parent;for(;j&&"FilterMenu"!=(null==j?void 0:j.FilterMenu)&&j;)j=null!=(o=null==j?void 0:j.$parent)?o:void 0;function F(){return k.value.findIndex((e=>e.id==w))===m.value}function H(){j&&(null==j||j.pushKey({id:w,height:u.value.height,unit:u.value.unit,icon:u.value.icon,unIcon:u.value.unIcon,fontSize:u.value.fontSize,fontColor:u.value.fontColor,unFontColor:u.value.unFontColor,text:u.value.title,isButton:u.value.isButton,uuid:I.value}))}function P(e){null==e||e.preventDefault(),null==e||e.stopPropagation()}function O(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),j&&(null==j||j.close())}return H(),p((()=>u.value),(()=>{clearTimeout(d),d=setTimeout((function(){H()}),150)}),{deep:!0}),c((()=>{setTimeout((()=>{f((()=>{V.value=F(),p([()=>m.value,k],(()=>{V.value=F()}))}))}),200)})),B((()=>{j&&(null==j||j.delKey(w))})),(e,t)=>{const l=M,o=E;return V.value&&y(b)>0&&!y(u).isButton?(v(),h(l,{key:0,onClick:C(O,["stop"]),style:N({height:y(b)+"px"}),class:"overflow"},{default:x((()=>[g(l,{ref:"FilterMenuItemBody",class:"FilterMenuItemBody"},{default:x((()=>[g(K,{margin:[0,0]}),g(T,{eventPenetrationEnabled:!0,color:a.bgColor,margin:[0,0],padding:[24,24]},{default:x((()=>[g(o,{onClick:t[0]||(t[0]=C((()=>{}),["stop"])),"scroll-y":"",style:N({height:a.height+"rpx"})},{default:x((()=>[g(l,{onClick:C(P,["stop"])},{default:x((()=>[S(e.$slots,"default",{},void 0,!0)])),_:3},8,["onClick"])])),_:3},8,["style"]),a.footerHeight>0?(v(),h(l,{key:0,style:N({height:a.footerHeight+"rpx"}),onClick:C(P,["stop"])},{default:x((()=>[S(e.$slots,"footer",{},void 0,!0)])),_:3},8,["style","onClick"])):_("v-if",!0)])),_:3},8,["color"])])),_:3},512)])),_:3},8,["onClick","style"])):_("v-if",!0)}}}),[["__scopeId","data-v-39a34e48"]]),W=u({__name:"tmFilterMenu",setup(e){const t=s(null),l=s([]),o=s([]),a=s(""),n=s("");let u=s(0);u.value=uni.$tm.u.torpx(44);const i=s([{text:"测试项目1-1",id:"1"},{text:"测试项目2-1",id:"2"},{text:"测试项目3-1",id:"3"},{text:"测试项目4-1",id:"4"},{text:"测试项目5-1",id:"5"}]),r=s([{text:"哈哈1",id:"1"},{text:"哈哈2-1",id:"2"},{text:"哈哈3-1",id:"3"},{text:"哈哈4-1",id:"4"},{text:"哈哈5-1",id:"5"}]),c=s([{text:"radio1",id:"1"},{text:"radio12-1",id:"2"},{text:"radio13-1",id:"3"},{text:"radio14-1",id:"4"},{text:"radio15-1",id:"5"}]);return(e,s)=>{const f=M;return v(),h(P,null,{default:x((()=>[g(f,{class:"pa-24"},{default:x((()=>[g(O,{label:"展开第一个菜单，自动吸到到顶部并滚动屏幕后跟随页面滚动（需要把本组件放到fiexd或者tmSticky组件内才可实现跟随屏幕滚动）。下面第二个筛选菜单为静态展示，不跟随页面滚动"})])),_:1}),g(Q,{offset:y(u)},{sticky:x((()=>[g(Y,{fixed:!0},{default:x((()=>[g(G,{icon:"tmicon-filter-fill","un-icon":"tmicon-filter",height:450,title:"筛选"},{default:x((()=>[g(O,{"font-size":24,_class:"font-weight-b",label:"为了针对性的数据结构体设计问题.本下拉菜单过滤器,不提供数据结构,也不处理数据,全交由用户自行处理,我只处理动效."})])),_:1}),g(G,{title:"价格排序"},{default:x((()=>[g(O,{"font-size":24,_class:"font-weight-b",label:"数据由用户处理"})])),_:1}),g(G,{height:650,title:"更多","un-icon":"tmicon-stepmode",icon:"tmicon-menu"},{default:x((()=>[g(O,{"font-size":24,_class:"font-weight-b",label:"数据由用户处理"})])),_:1}),g(G,{isButton:"",title:"价格排序","un-icon":"tmicon-sort",icon:"tmicon-sort"})])),_:1})])),default:x((()=>[g(f,{style:{height:"2000px"}},{default:x((()=>[g(T,{margin:[0,24]},{default:x((()=>[g(O,{fontSize:24,_class:"font-weight-b",label:"下面是一个静态的示例."})])),_:1}),g(Y,{ref_key:"filter",ref:t},{default:x((()=>[g(G,{footerHeight:100,icon:"tmicon-filter-fill","un-icon":"tmicon-filter",height:450,title:"多选项"},{footer:x((()=>[g(f,{class:"flex flex-row flex-row-between"},{default:x((()=>[g(f,{class:"pl-24 pr-12 flex-1"},{default:x((()=>[g(J,{onClick:s[1]||(s[1]=e=>t.value.close()),shadow:0,text:"",outlined:!0,block:"",label:"取消"})])),_:1}),g(f,{class:"pr-24 pl-12 flex-1"},{default:x((()=>[g(J,{onClick:s[2]||(s[2]=e=>t.value.close()),block:"",border:1,label:"确认"})])),_:1})])),_:1})])),default:x((()=>[g(U,{direction:"customCol",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),"default-value":l.value},{default:x((()=>[(v(!0),b(w,null,k(i.value,((e,t)=>(v(),h(A,{value:e.id,key:t,custom:!1},{default:x((({checked:t})=>[g(f,{userInteractionEnabled:!1,"hover-class":"opactiy-7",class:"flex-1 flex-row flex flex-row-center-between",style:{height:"76rpx"}},{default:x((()=>[g(O,{color:t.checked?"primary":"",label:e.text},null,8,["color","label"]),t.checked?(v(),h($,{key:0,"font-size":24,color:"primary",name:"tmicon-check"})):_("v-if",!0)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","default-value"])])),_:1}),g(G,{footerHeight:100,title:"单选项"},{footer:x((()=>[g(f,{class:"flex flex-row flex-row-between"},{default:x((()=>[g(f,{class:"pl-24 pr-12 flex-1"},{default:x((()=>[g(J,{onClick:s[4]||(s[4]=e=>t.value.close()),shadow:0,text:"",outlined:!0,block:"",label:"取消"})])),_:1}),g(f,{class:"pr-24 pl-12 flex-1"},{default:x((()=>[g(J,{onClick:s[5]||(s[5]=e=>t.value.close()),block:"",border:1,label:"确认"})])),_:1})])),_:1})])),default:x((()=>[g(D,{direction:"customCol",modelValue:a.value,"onUpdate:modelValue":s[3]||(s[3]=e=>a.value=e),"default-value":a.value},{default:x((()=>[(v(!0),b(w,null,k(c.value,((e,t)=>(v(),h(L,{value:e.id,key:t,custom:!1},{default:x((({checked:t})=>[g(f,{userInteractionEnabled:!1,"hover-class":"opactiy-7",class:"flex-1 flex-row flex flex-row-center-between",style:{height:"76rpx"}},{default:x((()=>[g(O,{color:t.checked?"primary":"",label:e.text},null,8,["color","label"]),t.checked?(v(),h($,{key:0,"font-size":24,color:"primary",name:"tmicon-check"})):_("v-if",!0)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","default-value"])])),_:1}),g(G,{footerHeight:100,height:650,title:"杂类选项","un-icon":"tmicon-stepmode",icon:"tmicon-menu"},{footer:x((()=>[g(f,{class:"flex flex-row flex-row-between"},{default:x((()=>[g(f,{class:"pl-24 pr-12 flex-1"},{default:x((()=>[g(J,{onClick:s[8]||(s[8]=e=>t.value.close()),shadow:0,text:"",outlined:!0,block:"",label:"取消"})])),_:1}),g(f,{class:"pr-24 pl-12 flex-1"},{default:x((()=>[g(J,{onClick:s[9]||(s[9]=e=>t.value.close()),block:"",border:1,label:"确认"})])),_:1})])),_:1})])),default:x((()=>[g(O,{"font-size":28,_class:"font-weight-b",label:"可以随便放自己想要的组件作为过滤"}),g(K),g(O,{"font-size":32,_class:"font-weight-b py-24",label:"输入框"}),g(R,{modelValue:n.value,"onUpdate:modelValue":s[6]||(s[6]=e=>n.value=e)},null,8,["modelValue"]),g(O,{"font-size":32,_class:"font-weight-b py-24",label:"tag选项"}),g(U,{modelValue:o.value,"onUpdate:modelValue":s[7]||(s[7]=e=>o.value=e),"default-value":o.value},{default:x((()=>[(v(!0),b(w,null,k(r.value,((e,t)=>(v(),h(A,{value:e.id,key:t,custom:!1},{default:x((({checked:t})=>[g(q,{userInteractionEnabled:!1,label:e.text,border:1,shadow:0,text:!t.checked},null,8,["label","text"])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","default-value"])])),_:1}),g(G,{isButton:"",title:"按钮选项","un-icon":"tmicon-ios-radio-button-off",icon:"tmicon-ios-radio-button-on"})])),_:1},512)])),_:1})])),_:1},8,["offset"])])),_:1})}}});export{W as default};
