import{d as e,c as t,L as l,m as a,az as n,o as i,a as o,w as u,M as r,u as s,b as d,j as f,g as c,i as p,r as m,K as v,k as h,I as g,n as y,U as x,e as _,f as b,F as w,N as T,$ as k}from"./index-6b165856.js";import{t as I}from"./tm-app.d6cf2f93.js";import{t as $}from"./tm-sheet.3639b36a.js";import{t as N}from"./tm-text.6c910eb0.js";import{_ as j}from"./tm-divider.vue_vue_type_script_setup_true_lang.cbbfcb4c.js";import{_ as S}from"./tm-tag.vue_vue_type_script_setup_true_lang.d2d6f72e.js";import"./tm-icon.65b53dc0.js";import"./tm-translate.1f1c80c0.js";const z=e({__name:"tm-indexes-item",props:{margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[32,0]},height:{type:Number,default:100},title:{type:[String,Number],default:""},navTitle:{type:[String,Number],default:""},transprent:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0}},emits:["click","title-click"],setup(e,{emit:m}){var v,h,g;const y=e,x=null!=(h=null==(v=c())?void 0:v.proxy)?h:null,_=t((()=>y.title)),b=t((()=>y.navTitle)),w=uni.$tm.u.getUid(1);let T=x.$parent;for(;T&&"tmIndexesId"!=(null==T?void 0:T.compentNameId)&&T;)T=null!=(g=null==T?void 0:T.$parent)?g:void 0;function k(){m("click")}return T&&T.pushKey(0,w,String(_.value),String(b.value)),l((()=>T.delKey(0,w))),a((()=>{})),n((()=>{})),(e,t)=>{const l=p;return i(),o(l,{id:"id_"+s(w)},{default:u((()=>[r(e.$slots,"title",{},(()=>[""!==s(_)?(i(),o($,{key:0,"no-level":"",onClick:t[0]||(t[0]=e=>m("title-click")),transprent:y.transprent,color:"grey-3",height:50,_class:"flex flex-row flex-row-center-start",margin:[y.margin[0],0],padding:[y.padding[0],0]},{default:u((()=>[d(N,{userInteractionEnabled:!1,"font-size":24,_class:"text-weight-b opacity-6",label:s(_)},null,8,["label"])])),_:1},8,["transprent","margin","padding"])):f("v-if",!0)])),d($,{onClick:k,color:"white",border:y.showBorder?1:0,transprent:y.transprent,borderDirection:"bottom",margin:y.margin,padding:y.padding},{default:u((()=>[d(l,{eventPenetrationEnabled:!0,class:"flex-1"},{default:u((()=>[r(e.$slots,"default")])),_:3})])),_:3},8,["border","transprent","margin","padding"])])),_:3},8,["id"])}}}),C=e({__name:"tm-indexes",props:{followTheme:{type:Boolean,default:!0},width:{type:Number,default:0},height:{type:Number,default:700},margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[0,0]},color:{type:String,default:"primary"},unit:{type:String,default:"rpx"},menuItemHeight:{type:Number,default:40}},emits:["nav-click"],setup(e,{expose:l,emit:n}){var I,j;const S=e,z=null!=(j=null==(I=c())?void 0:I.proxy)?j:null,C=m(S.menuItemHeight),B=t((()=>S.margin)),K=t((()=>S.padding)),A=t((()=>S.height)),M=t((()=>S.width)),E=m(0),L=m(null),P=m(!1),U=m(!1);let Y=Number(uni.$tm.u.getUid(1)||12);const H=m(0),O=m([]),D=m(0),F=t((()=>O.value.filter((e=>""!==e.text)))),J=m(0),R=Math.ceil(v(C.value)),V=t((()=>F.value.length*C));function q(e){}function G(){g().in(z).select("#navlist").boundingClientRect().exec((e=>{J.value=e[0].top}))}function Q(e){0==J.value&&G()}function W(e){let t=function(e){let t=e.type.toLocaleLowerCase();return-1!==t.indexOf("mouse")}(e)?e.pageY:e.touches[0].pageY,l=Math.floor((t-J.value)/R),a=F.value[l];if(a)return O.value.findIndex((e=>e.id==E.value))!==l&&(a&&(L.value=a,E.value=a.id),void(U.value=!0))}function X(e){U.value=!1}return t((()=>Math.ceil(v(V.value)))),a((()=>{h((()=>{G()}))})),l({compentNameId:"tmIndexesId",pushKey:function(e,t,l,a){let n=O.value.findIndex((e=>e.id==t));-1==n?O.value.push({height:e,id:t,text:l,subText:a}):O.value.splice(n,1,{height:e,id:t,text:l,subText:a})},delKey:function(e,t){let l=O.value.findIndex((e=>e.id==t));l>-1&&O.value.splice(l,1)}}),(e,t)=>{const l=k,a=p;return i(),o(a,{ref:"tmIndexes",class:T(["overflow relative",`mx-${s(B)[0]} my-${s(K)[1]} px-${s(B)[0]} py-${s(K)[1]}`]),style:y([{height:`${s(A)}`+S.unit}])},{default:u((()=>[d(l,{"offset-accuracy":5,onScroll:q,"scroll-into-view":"id_"+E.value,"scroll-with-animation":!1,"scroll-top":D.value,"scroll-y":!0,style:y([s(M)?{width:s(M)+S.unit}:"",s(A)?{height:s(A)+S.unit}:""])},{default:u((()=>[r(e.$slots,"default")])),_:3},8,["scroll-into-view","scroll-top","style"]),d(a,{class:"absolute flex flex-col flex-center t-0 r-24",style:y([{height:`${s(A)}`+S.unit,width:"60rpx"}])},{default:u((()=>[d(a,{style:y([{height:s(F).length*C.value+"rpx",width:"60rpx"}]),onTouchstart:Q,onTouchmove:x(W,["stop","prevent"]),onTouchend:X,id:"navlist",ref:"navlist",class:"flex flex-col flex-center"},{default:u((()=>[d($,{eventPenetrationEnabled:!0,"no-level":"",round:10,color:"white",shadow:2,margin:[0,0],padding:[0,0],width:40},{default:u((()=>[(i(!0),_(w,null,b(s(F),((e,t)=>(i(),o(a,{onClick:x((t=>function(e){E.value!=e.id&&(E.value="",L.value=e,U.value=!0,clearTimeout(Y),Y=setTimeout((function(){U.value=!1}),800),h((()=>{E.value=e.id})),n("nav-click",e))}(e)),["stop"]),"hover-class":"opacity-5",class:"flex-center flex",key:t,style:y({width:"40rpx",height:`${C.value}rpx`})},{default:u((()=>[d(N,{followTheme:E.value==e.id&&S.followTheme,color:E.value==e.id?S.color:"","font-size":20,label:e.subText},null,8,["followTheme","color","label"])])),_:2},1032,["onClick","style"])))),128))])),_:1})])),_:1},8,["style","onTouchmove"])])),_:1},8,["style"]),U.value?(i(),o(a,{key:0,class:"absolute l-0 t-0 fulled",style:y([{top:(s(A)-70)/2+S.unit},P.value?{left:H.value+"px"}:{left:"calc(50% - 70rpx)"}])},{default:u((()=>[null!=L.value?(i(),o($,{key:0,_class:"flex flex-center",shadow:5,margin:[24,24],padding:[0,0],width:100,height:100,round:20},{default:u((()=>[d(N,{followTheme:S.followTheme,color:S.color,"font-size":36,label:L.value.subText},null,8,["followTheme","color","label"])])),_:1})):f("v-if",!0)])),_:1},8,["style"])):f("v-if",!0)])),_:3},8,["class","style"])}}}),B=e({__name:"indexes",setup:e=>(e,t)=>{const l=p;return i(),o(I,null,{default:u((()=>[d($,null,{default:u((()=>[d(N,{"font-size":30,_class:"font-weight-b",label:"基础示例,更多见文档"}),d(j),d(N,{"font-size":24,_class:"font-weight-b",label:"为了切实解决复杂索引布局,\r\n\t\t\t与官方(或者说同类索引组件)的拉开差距,我重新升级了,子项目不再要求设定高度,\r\n\t\t\t你可以随意的布局复杂的子项目来提供快速索引功能.\r\n\t\t\t请注意子项目:不一定是要列表型,可以随意表单啊,城市列表哈,单选,多选之类的复杂布局轻松应付\r\n\t\t\t"})])),_:1}),d(C,null,{default:u((()=>[d(z,{title:"热门热门",navTitle:"热"},{default:u((()=>[d(l,{class:"my-10 flex flex-row flex-wrap",style:{height:"150rpx"}},{default:u((()=>[d(S,{outlined:"",label:"北京"}),d(S,{outlined:"",label:"南昌"}),d(S,{outlined:"",label:"长沙"}),d(S,{outlined:"",label:"广东"}),d(S,{outlined:"",label:"福建"}),d(S,{outlined:"",label:"安徽"}),d(S,{outlined:"",label:"长沙"}),d(S,{outlined:"",label:"广东"}),d(S,{outlined:"",label:"福建"}),d(S,{label:"安徽"})])),_:1})])),_:1}),(i(),_(w,null,b(60,((e,t)=>d(z,{title:t%10==0?t:"",navTitle:t,key:t},{default:u((()=>[d(l,{class:"my-16"},{default:u((()=>[d(N,{label:"想要什么的.-"+t},null,8,["label"])])),_:2},1024)])),_:2},1032,["title","navTitle"]))),64))])),_:1})])),_:1})}});export{B as default};
