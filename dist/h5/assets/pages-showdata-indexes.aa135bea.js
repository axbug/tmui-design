import{d as e,c as t,M as l,p as a,az as n,o as i,a as o,w as u,N as r,u as s,b as d,k as f,g as c,j as p,r as m,L as v,m as h,J as g,n as y,V as x,e as _,f as b,F as w,O as T,$ as k}from"./index-5c06cf16.js";import{t as $}from"./tm-app.20954b06.js";import{t as I}from"./tm-sheet.2873fe67.js";import{t as N}from"./tm-text.fdd4f0a8.js";import{_ as j}from"./tm-divider.vue_vue_type_script_setup_true_lang.0bd9a5e3.js";import{_ as S}from"./tm-tag.vue_vue_type_script_setup_true_lang.bc11f60d.js";import"./tm-icon.5716c798.js";import"./tm-translate.4fbb7927.js";const z=e({__name:"tm-indexes-item",props:{margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[32,0]},height:{type:Number,default:100},title:{type:[String,Number],default:""},navTitle:{type:[String,Number],default:""},transprent:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0}},emits:["click","title-click"],setup(e,{emit:m}){var v;const h=e,g=(null==(v=c())?void 0:v.proxy)??null,y=t((()=>h.title)),x=t((()=>h.navTitle)),_=uni.$tm.u.getUid(1);let b=g.$parent;for(;b&&"tmIndexesId"!=(null==b?void 0:b.compentNameId)&&b;)b=(null==b?void 0:b.$parent)??void 0;function w(){m("click")}return b&&b.pushKey(0,_,String(y.value),String(x.value)),l((()=>b.delKey(0,_))),a((()=>{})),n((()=>{})),(e,t)=>{const l=p;return i(),o(l,{id:"id_"+s(_)},{default:u((()=>[r(e.$slots,"title",{},(()=>[""!==s(y)?(i(),o(I,{key:0,"no-level":"",onClick:t[0]||(t[0]=e=>m("title-click")),transprent:h.transprent,color:"grey-3",height:50,_class:"flex flex-row flex-row-center-start",margin:[h.margin[0],0],padding:[h.padding[0],0]},{default:u((()=>[d(N,{userInteractionEnabled:!1,"font-size":24,_class:"text-weight-b opacity-6",label:s(y)},null,8,["label"])])),_:1},8,["transprent","margin","padding"])):f("v-if",!0)])),d(I,{onClick:w,color:"white",border:h.showBorder?1:0,transprent:h.transprent,borderDirection:"bottom",margin:h.margin,padding:h.padding},{default:u((()=>[d(l,{eventPenetrationEnabled:!0,class:"flex-1"},{default:u((()=>[r(e.$slots,"default")])),_:3})])),_:3},8,["border","transprent","margin","padding"])])),_:3},8,["id"])}}}),C=e({__name:"tm-indexes",props:{followTheme:{type:Boolean,default:!0},width:{type:Number,default:0},height:{type:Number,default:700},margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[0,0]},color:{type:String,default:"primary"},unit:{type:String,default:"rpx"},menuItemHeight:{type:Number,default:40}},emits:["nav-click"],setup(e,{expose:l,emit:n}){var $;const j=e,S=(null==($=c())?void 0:$.proxy)??null,z=m(j.menuItemHeight),C=t((()=>j.margin)),B=t((()=>j.padding)),A=t((()=>j.height)),K=t((()=>j.width)),M=m(0),E=m(null),L=m(!1),O=m(!1);let P=Number(uni.$tm.u.getUid(1)||12);const Y=m(0),H=m([]),J=m(0),U=t((()=>H.value.filter((e=>""!==e.text)))),V=m(0),D=Math.ceil(v(z.value)),F=t((()=>U.value.length*z));function R(e){}function q(){g().in(S).select("#navlist").boundingClientRect().exec((e=>{V.value=e[0].top}))}function G(e){0==V.value&&q()}function Q(e){let t=function(e){let t=e.type.toLocaleLowerCase();return-1!==t.indexOf("mouse")}(e)?e.pageY:e.touches[0].pageY,l=Math.floor((t-V.value)/D),a=U.value[l];if(a)return H.value.findIndex((e=>e.id==M.value))!==l&&(a&&(E.value=a,M.value=a.id),void(O.value=!0))}function W(e){O.value=!1}return t((()=>Math.ceil(v(F.value)))),a((()=>{h((()=>{q()}))})),l({compentNameId:"tmIndexesId",pushKey:function(e,t,l,a){let n=H.value.findIndex((e=>e.id==t));-1==n?H.value.push({height:e,id:t,text:l,subText:a}):H.value.splice(n,1,{height:e,id:t,text:l,subText:a})},delKey:function(e,t){let l=H.value.findIndex((e=>e.id==t));l>-1&&H.value.splice(l,1)}}),(e,t)=>{const l=k,a=p;return i(),o(a,{ref:"tmIndexes",class:T(["overflow relative",`mx-${s(C)[0]} my-${s(B)[1]} px-${s(C)[0]} py-${s(B)[1]}`]),style:y([{height:`${s(A)}`+j.unit}])},{default:u((()=>[d(l,{"offset-accuracy":5,onScroll:R,"scroll-into-view":"id_"+M.value,"scroll-with-animation":!1,"scroll-top":J.value,"scroll-y":!0,style:y([s(K)?{width:s(K)+j.unit}:"",s(A)?{height:s(A)+j.unit}:""])},{default:u((()=>[r(e.$slots,"default")])),_:3},8,["scroll-into-view","scroll-top","style"]),d(a,{class:"absolute flex flex-col flex-center t-0 r-24",style:y([{height:`${s(A)}`+j.unit,width:"60rpx"}])},{default:u((()=>[d(a,{style:y([{height:s(U).length*z.value+"rpx",width:"60rpx"}]),onTouchstart:G,onTouchmove:x(Q,["stop","prevent"]),onTouchend:W,id:"navlist",ref:"navlist",class:"flex flex-col flex-center"},{default:u((()=>[d(I,{eventPenetrationEnabled:!0,"no-level":"",round:10,color:"white",shadow:2,margin:[0,0],padding:[0,0],width:40},{default:u((()=>[(i(!0),_(w,null,b(s(U),((e,t)=>(i(),o(a,{onClick:x((t=>function(e){M.value!=e.id&&(M.value="",E.value=e,O.value=!0,clearTimeout(P),P=setTimeout((function(){O.value=!1}),800),h((()=>{M.value=e.id})),n("nav-click",e))}(e)),["stop"]),"hover-class":"opacity-5",class:"flex-center flex",key:t,style:y({width:"40rpx",height:`${z.value}rpx`})},{default:u((()=>[d(N,{followTheme:M.value==e.id&&j.followTheme,color:M.value==e.id?j.color:"","font-size":20,label:e.subText},null,8,["followTheme","color","label"])])),_:2},1032,["onClick","style"])))),128))])),_:1})])),_:1},8,["style","onTouchmove"])])),_:1},8,["style"]),O.value?(i(),o(a,{key:0,class:"absolute l-0 t-0 fulled",style:y([{top:(s(A)-70)/2+j.unit},L.value?{left:Y.value+"px"}:{left:"calc(50% - 70rpx)"}])},{default:u((()=>[null!=E.value?(i(),o(I,{key:0,_class:"flex flex-center",shadow:5,margin:[24,24],padding:[0,0],width:100,height:100,round:20},{default:u((()=>[d(N,{followTheme:j.followTheme,color:j.color,"font-size":36,label:E.value.subText},null,8,["followTheme","color","label"])])),_:1})):f("v-if",!0)])),_:1},8,["style"])):f("v-if",!0)])),_:3},8,["class","style"])}}}),B=e({__name:"indexes",setup:e=>(e,t)=>{const l=p;return i(),o($,null,{default:u((()=>[d(I,null,{default:u((()=>[d(N,{"font-size":30,_class:"font-weight-b",label:"基础示例,更多见文档"}),d(j),d(N,{"font-size":24,_class:"font-weight-b",label:"为了切实解决复杂索引布局,\r\n\t\t\t与官方(或者说同类索引组件)的拉开差距,我重新升级了,子项目不再要求设定高度,\r\n\t\t\t你可以随意的布局复杂的子项目来提供快速索引功能.\r\n\t\t\t请注意子项目:不一定是要列表型,可以随意表单啊,城市列表哈,单选,多选之类的复杂布局轻松应付\r\n\t\t\t"})])),_:1}),d(C,null,{default:u((()=>[d(z,{title:"热门热门",navTitle:"热"},{default:u((()=>[d(l,{class:"my-10 flex flex-row flex-wrap",style:{height:"150rpx"}},{default:u((()=>[d(S,{outlined:"",label:"北京"}),d(S,{outlined:"",label:"南昌"}),d(S,{outlined:"",label:"长沙"}),d(S,{outlined:"",label:"广东"}),d(S,{outlined:"",label:"福建"}),d(S,{outlined:"",label:"安徽"}),d(S,{outlined:"",label:"长沙"}),d(S,{outlined:"",label:"广东"}),d(S,{outlined:"",label:"福建"}),d(S,{label:"安徽"})])),_:1})])),_:1}),(i(),_(w,null,b(60,((e,t)=>d(z,{title:t%10==0?t:"",navTitle:t,key:t},{default:u((()=>[d(l,{class:"my-16"},{default:u((()=>[d(N,{label:"想要什么的.-"+t},null,8,["label"])])),_:2},1024)])),_:2},1032,["title","navTitle"]))),64))])),_:1})])),_:1})}});export{B as default};
