var e=Object.defineProperty,l=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(l,o,t)=>o in l?e(l,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[o]=t,i=(e,l)=>{for(var o in l||(l={}))a.call(l,o)&&n(e,o,l[o]);if(t)for(var o of t(l))r.call(l,o)&&n(e,o,l[o]);return e},s=(e,t)=>l(e,o(t));import{d,r as u,H as f,c,Q as p,o as y,a as h,w as m,b as g,N as b,u as x,n as v,j as S,M as w,U as k,g as C,K as _,i as z,a9 as B,av as j,_ as P}from"./index-6b165856.js";import{t as $}from"./tm-sheet.3639b36a.js";import{t as H}from"./tm-icon.65b53dc0.js";import{t as N}from"./tm-text.6c910eb0.js";import{c as K,u as O,f as E,g as I,d as T,h as L}from"./tm-app.d6cf2f93.js";import{t as F}from"./tm-button.80fc9b3b.js";const V=P(d({__name:"tm-input",props:s(i({},K),{followTheme:{type:[Boolean,String],default:!0},color:{type:String,default:"grey-4"},searchFontColor:{type:String,default:""},prefixColor:{type:String,default:""},suffixColor:{type:String,default:""},focusColor:{type:String,default:"primary"},fontColor:{type:String,default:""},text:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},border:{type:Number,default:0},transprent:{type:Boolean,default:!1},round:{type:Number,default:3},shadow:{type:Number,default:0},margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[0,0]},height:{type:Number,default:64},prefix:{type:String,default:""},prefixLabel:{type:String,default:""},suffix:{type:String,default:""},suffixLabel:{type:String,default:""},fontSize:{type:Number,default:30},search:{type:String,default:""},searchLabel:{type:String,default:""},showClear:{type:Boolean,default:!1},password:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入内容"},errorLabel:{type:String,default:"请输入内容"},align:{type:String,default:"left"},modelValue:{type:[String,Number],default:""},inputPadding:{type:Array,default:()=>[24,0]},showCharNumber:{type:Boolean,default:!1},maxlength:{type:Number,default:-1},type:{type:String,default:"text"},cursorSpacing:{type:Number,default:24},confirmType:{type:String,default:"done"},confirmHold:{type:Boolean,default:!1},autoBlur:{type:Boolean,default:!0},holdKeyboard:{type:Boolean,default:!1},adjustPosition:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},cursor:{type:Number,default:0},showConfirmBar:{type:Boolean,default:!0},selectionStart:{type:Number,default:-1},selectionEnd:{type:Number,default:-1},disableDefaultPadding:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},placeholderStyle:{type:String,default:""},autoHeight:{type:Boolean,default:!1},readyOnly:{type:Boolean,default:!1},layoutAlign:{type:String,default:"flex-row-top-start"}}),emits:["focus","blur","confirm","input","update:modelValue","clear","search","keyboardheightchange","click"],setup(e,{emit:l}){var o,t,a;const r=e,n=O(),d=null!=(t=null==(o=C())?void 0:o.proxy)?t:null;let P=null==d?void 0:d.$parent;for(;P&&"tmFormComnameFormItem"!=(null==P?void 0:P.tmFormComnameFormItem)&&P;)P=null!=(a=null==P?void 0:P.$parent)?a:void 0;const K=u(!1);K.value="android"==f().osName;const V=c((()=>r.height)),D=c((()=>""!==r.search||""!==r.searchLabel?[4,0]:r.inputPadding));let A=NaN;function J(e,l=500,o=!1){if(isNaN(A)||clearTimeout(A),o){var t=!A;A=setTimeout((()=>{A=NaN}),l),t&&"function"==typeof e&&e()}else A=setTimeout((()=>{"function"==typeof e&&e(),A=NaN}),l)}const M=c((()=>s(i({},r),{fontSize_px:_(r.fontSize)})));r.modelValue;const Q=c((()=>n.tmStore));c((()=>E(r))),c((()=>I(r)));const U=c((()=>T(r,Q.value))),q=u(!1),G=u(r.focus||!1);p((()=>r.focus),(()=>{G.value=r.focus}));const R=c((()=>{let e=r.color;return G.value&&(e=r.followTheme&&n.tmStore.color?n.tmStore.color:r.focusColor),q.value&&(e="red"),e})),W=c((()=>{const e=s(i({},r),{color:R.value});return L(e,U.value,Q.value)})),X=u(M.value.password),Y=c((()=>r.password));u(r.errorLabel);const Z=u(r.modelValue),ee=c((()=>String(Z.value).split("").length));function le(){l("search",Z.value)}function oe(){Z.value="",l("update:modelValue",""),l("clear")}function te(){X.value=!X.value}function ae(e){G.value=!0,l("focus",e)}function re(e){G.value=!1,l("blur",e)}function ne(){l("confirm",Z.value)}function ie(e){return Z.value=e.detail.value,l("input",e.detail.value),l("update:modelValue",e.detail.value),e.detail.value}function se(e,o){J("ali"!=o?()=>l("click",e):()=>{l("click",e)},200,!0)}return p((()=>r.modelValue),(()=>Z.value=r.modelValue)),(e,o)=>{const t=z,a=B,n=j;return y(),h($,{eventPenetrationEnabled:!0,transprent:!0,margin:r.margin,padding:r.padding},{default:m((()=>[g($,{transprent:r.transprent,round:r.round,"no-level":"",margin:[0,0],padding:x(D),border:r.border,text:r.text,color:x(R),outlined:r.outlined,shadow:r.shadow,linear:r.linear,linearDeep:r.linearDeep,_style:"transition:border 0.24s"},{default:m((()=>[g(t,{class:b(["flex flex-row relative",["textarea"==x(M).type?x(M).layoutAlign:"flex-row-center-start"]]),onClick:o[7]||(o[7]=e=>se(e,"")),style:v([x(M).autoHeight&&"textarea"==x(M).type?{}:{height:`${x(V)}rpx`}])},{default:m((()=>[x(M).search||x(M).searchLabel?(y(),h(t,{key:0,class:"px-9"})):S("v-if",!0),w(e.$slots,"left",{},void 0,!0),x(M).prefix?(y(),h(t,{key:1,class:"pr-16"},{default:m((()=>[g(H,{_style:"transition:color 0.24s","font-size":x(M).fontSize,color:r.prefixColor,name:x(M).prefix},null,8,["font-size","color","name"])])),_:1})):S("v-if",!0),x(M).prefixLabel?(y(),h(t,{key:2,class:"pr-24"},{default:m((()=>[g(N,{_style:"transition:color 0.24s","font-size":x(M).fontSize,color:r.prefixColor,label:x(M).prefixLabel},null,8,["font-size","color","label"])])),_:1})):S("v-if",!0),K.value?S("v-if",!0):(y(),h(t,{key:3,onClick:o[2]||(o[2]=e=>se(e,"ali")),class:"flex-1 relative flex-row flex",style:v([{width:"0px"}])},{default:m((()=>[S(' <view @click.stop="emits(\'click\',$event)" class=" l-0 t-0 flex-1 " :style="{height: `${_height}rpx`,background:\'red\'}"></view> '),"textarea"!=x(M).type?(y(),h(a,{key:0,class:"flex-1",userInteractionEnabled:!1,value:Z.value,focus:x(M).focus,onFocus:ae,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:o[0]||(o[0]=e=>l("keyboardheightchange",e)),password:X.value,maxlength:x(M).maxlength,disabled:x(M).disabled,cursorSpacing:x(M).cursorSpacing,confirmType:x(M).confirmType,confirmHold:x(M).confirmHold,autoBlur:x(M).autoBlur,holdKeyboard:x(M).holdKeyboard,adjustPosition:x(M).adjustPosition,readonly:x(M).readyOnly,type:x(M).type,placeholder:x(M).placeholder,style:v([{height:`${x(V)}rpx`,color:x(M).fontColor?x(M).fontColor:x(W).textColor,"text-align":r.align,fontSize:`${x(M).fontSize_px}px`,transition:"color 0.24s"}]),"placeholder-style":`fontSize:${x(M).fontSize_px}px;${r.placeholderStyle}`,"ready-only":x(M).readyOnly},null,8,["value","focus","password","maxlength","disabled","cursorSpacing","confirmType","confirmHold","autoBlur","holdKeyboard","adjustPosition","readonly","type","placeholder","style","placeholder-style","ready-only"])):S("v-if",!0),"textarea"==x(M).type?(y(),h(n,{key:1,userInteractionEnabled:!1,value:Z.value,focus:x(M).focus,onFocus:ae,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:o[1]||(o[1]=e=>l("keyboardheightchange",e)),maxlength:x(M).maxlength,disabled:x(M).disabled,placeholder:x(M).placeholder,cursorSpacing:x(M).cursorSpacing,confirmHold:x(M).confirmHold,autoBlur:x(M).autoBlur,holdKeyboard:x(M).holdKeyboard,cursor:x(M).cursor,"show-confirm-bar":x(M).showConfirmBar,selectionStart:x(M).selectionStart,selectionEnd:x(M).selectionEnd,"disable-default-padding":x(M).disableDefaultPadding,fixed:x(M).fixed,autoHeight:x(M).autoHeight,readonly:x(M).readyOnly,adjustPosition:x(M).adjustPosition,type:x(M).type,style:v([x(M).autoHeight?{}:{height:`${x(V)}rpx`},{width:"auto","word-break":"break-word",color:x(M).fontColor?x(M).fontColor:x(W).textColor,"text-align":r.align,fontSize:`${x(M).fontSize_px}px`,transition:"color 0.24s"}]),class:"wrap flex-1","placeholder-style":`fontSize:${x(M).fontSize_px}px;${r.placeholderStyle}`,"ready-only":x(M).readyOnly},null,8,["value","focus","maxlength","disabled","placeholder","cursorSpacing","confirmHold","autoBlur","holdKeyboard","cursor","show-confirm-bar","selectionStart","selectionEnd","disable-default-padding","fixed","autoHeight","readonly","adjustPosition","type","style","placeholder-style","ready-only"])):S("v-if",!0)])),_:1})),K.value?(y(),h(t,{key:4,class:"flex-1 relative flex-row flex",style:v([{width:"0px"}])},{default:m((()=>[S(' <view @click.stop="emits(\'click\',$event)" class=" l-0 t-0 flex-1 " :style="{height: `${_height}rpx`,background:\'red\'}"></view> '),"textarea"!=x(M).type?(y(),h(a,{key:0,class:"flex-1",onClick:o[3]||(o[3]=k((e=>l("click",e)),["stop"])),userInteractionEnabled:!1,value:Z.value,focus:x(M).focus,onFocus:ae,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:o[4]||(o[4]=e=>l("keyboardheightchange",e)),password:X.value,disabled:x(M).disabled,cursorSpacing:x(M).cursorSpacing,confirmType:x(M).confirmType,confirmHold:x(M).confirmHold,autoBlur:x(M).autoBlur,holdKeyboard:x(M).holdKeyboard,adjustPosition:x(M).adjustPosition,maxlength:x(M).maxlength,type:x(M).type,readonly:x(M).readyOnly,placeholder:x(M).placeholder,style:v([{height:`${x(V)}rpx`,color:x(M).fontColor?x(M).fontColor:x(W).textColor,"text-align":r.align,fontSize:`${x(M).fontSize_px}px`}]),"placeholder-style":`fontSize:${x(M).fontSize_px}px;${r.placeholderStyle}`},null,8,["value","focus","password","disabled","cursorSpacing","confirmType","confirmHold","autoBlur","holdKeyboard","adjustPosition","maxlength","type","readonly","placeholder","style","placeholder-style"])):S("v-if",!0),"textarea"==x(M).type?(y(),h(n,{key:1,onClick:o[5]||(o[5]=k((e=>l("click",e)),["stop"])),userInteractionEnabled:!1,value:Z.value,focus:x(M).focus,onFocus:ae,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:o[6]||(o[6]=e=>l("keyboardheightchange",e)),disabled:x(M).disabled,placeholder:x(M).placeholder,cursorSpacing:x(M).cursorSpacing,confirmHold:x(M).confirmHold,autoBlur:x(M).autoBlur,holdKeyboard:x(M).holdKeyboard,adjustPosition:x(M).adjustPosition,maxlength:x(M).maxlength,autoHeight:x(M).autoHeight,cursor:x(M).cursor,"show-confirm-bar":x(M).showConfirmBar,selectionStart:x(M).selectionStart,selectionEnd:x(M).selectionEnd,"disable-default-padding":x(M).disableDefaultPadding,readonly:x(M).readyOnly,fixed:x(M).fixed,type:x(M).type,style:v([x(M).autoHeight?{}:{height:`${x(V)}rpx`},{width:"auto","word-break":"break-word",color:x(M).fontColor?x(M).fontColor:x(W).textColor,"text-align":r.align,fontSize:`${x(M).fontSize_px}px`}]),class:"wrap flex-1","placeholder-style":`fontSize:${x(M).fontSize_px}px;${r.placeholderStyle}`},null,8,["value","focus","disabled","placeholder","cursorSpacing","confirmHold","autoBlur","holdKeyboard","adjustPosition","maxlength","autoHeight","cursor","show-confirm-bar","selectionStart","selectionEnd","disable-default-padding","readonly","fixed","type","style","placeholder-style"])):S("v-if",!0)])),_:1})):S("v-if",!0),x(M).showClear&&x(ee)>0?(y(),h(t,{key:5,onClick:oe,class:"pl-16"},{default:m((()=>[g(H,{_style:"transition:color 0.24s",userInteractionEnabled:!1,"font-size":x(M).fontSize,name:"tmicon-times-circle-fill"},null,8,["font-size"])])),_:1})):S("v-if",!0),q.value?(y(),h(t,{key:6,class:"pl-16"},{default:m((()=>[g(H,{_style:"transition:color 0.24s","font-size":x(M).fontSize,name:"tmicon-exclamation-circle"},null,8,["font-size"])])),_:1})):S("v-if",!0),x(M).suffix?(y(),h(t,{key:7,class:"pl-16"},{default:m((()=>[g(H,{_style:"transition:color 0.24s","font-size":x(M).fontSize,color:r.suffixColor,name:x(M).suffix},null,8,["font-size","color","name"])])),_:1})):S("v-if",!0),x(M).suffixLabel?(y(),h(t,{key:8,class:"pl-16"},{default:m((()=>[g(N,{_style:"transition:color 0.24s","font-size":x(M).fontSize,color:r.suffixColor,label:x(M).suffixLabel},null,8,["font-size","color","label"])])),_:1})):S("v-if",!0),x(Y)?(y(),h(t,{key:9,onClick:te,class:"pl-16"},{default:m((()=>[S(" tmicon-eyeslash-fill "),g(H,{_style:"transition:color 0.24s",userInteractionEnabled:!1,"font-size":x(M).fontSize,name:X.value?"tmicon-eyeslash-fill":"tmicon-eye-fill"},null,8,["font-size","name"])])),_:1})):S("v-if",!0),x(M).showCharNumber&&x(ee)>0&&"textarea"!=x(M).type?(y(),h(t,{key:10,class:"pl-16 flex-row flex"},{default:m((()=>[g(N,{_style:"transition:color 0.24s",label:x(ee)},null,8,["label"]),x(M).maxlength>0?(y(),h(N,{key:0,_style:"transition:color 0.24s",label:"/"+x(M).maxlength},null,8,["label"])):S("v-if",!0)])),_:1})):S("v-if",!0),S(" 原因是支付宝小程序自带了计数器。会导致重叠。 "),x(M).showCharNumber&&x(ee)>0&&"textarea"==x(M).type?(y(),h(t,{key:11,class:b(["pl-16 flex-row flex absolute r-0",["b-12"]])},{default:m((()=>[g(N,{_style:"transition:color 0.24s",label:x(ee)},null,8,["label"]),x(M).maxlength>0?(y(),h(N,{key:0,_style:"transition:color 0.24s",label:"/"+x(M).maxlength},null,8,["label"])):S("v-if",!0)])),_:1})):S("v-if",!0),w(e.$slots,"right",{},(()=>[x(M).search||x(M).searchLabel?(y(),h(t,{key:0,class:"pl-16"},{default:m((()=>[g(F,{followTheme:r.followTheme,onClick:le,color:r.focusColor,"font-size":24,height:x(V)-11,padding:[16,0],block:"",margin:[0,0],fontColor:r.searchFontColor,icon:x(M).search,label:x(M).searchLabel},null,8,["followTheme","color","height","fontColor","icon","label"])])),_:1})):S("v-if",!0)]),!0)])),_:3},8,["class","style"])])),_:3},8,["transprent","round","padding","border","text","color","outlined","shadow","linear","linearDeep"])])),_:3},8,["margin","padding"])}}}),[["__scopeId","data-v-858433e4"]]);export{V as t};
