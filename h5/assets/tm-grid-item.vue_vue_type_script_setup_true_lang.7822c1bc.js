import{d as e,P as t,c as r,r as o,at as l,o as a,a as d,w as i,N as u,L as s,p as n,aB as p,R as c,b,O as f,u as x,n as m,g as h,m as v,h as y,j as g}from"./index-5c06cf16.js";import{c as w,u as $,d as _,h as S}from"./tm-app.20954b06.js";import{t as B}from"./tm-sheet.2873fe67.js";import{_ as C}from"./tm-badge.vue_vue_type_script_setup_true_lang.03b3afc8.js";const N=e({__name:"tm-grid",props:{...w,round:{type:Number,default:2},width:{type:Number,default:750},col:{type:Number,default:5},showBorder:{type:Boolean,default:!1},color:{type:String,default:"white"},transprent:{type:Boolean,default:!1}},setup(e,{expose:n}){const p=e;t("tmuiSysInfo",r((()=>({bottom:0,height:750,width:s(750),top:0,isCustomHeader:!1,sysinfo:null}))));let c=o([]);const b=r((()=>Math.ceil(p.width/p.col-1)));function f(){let e=c.value.length;c.value=c.value.map(((t,r)=>{let o=r+1;return o<=p.col?(t.type=4,(o==e&&1==e||1==o)&&(t.type=1)):o%p.col==1?t.type=3:t.type=2,t}))}return l("tmGridItemWidth",b.value+(p.showBorder?1:0)),l("tmGridshowBorder",r((()=>p.showBorder))),l("tmGridshowCachList",r((()=>c.value))),n({pushKey:function(e){let t=c.value.findIndex((t=>t.id==e.id));-1==t?c.value.push(e):c.value.splice(t,1,e),f()},delKey:function(e){c.value.findIndex((t=>t.id==e.id)),f()},keyName:"tmGrid"}),(e,t)=>(a(),d(B,{round:p.round,width:p.width,transprent:p.transprent,color:p.color,margin:[0,0],padding:[0,0],_class:"flex flex-row flex-row-top-start",contStyle:"flex-wrap:wrap;"},{default:i((()=>[u(e.$slots,"default")])),_:3},8,["round","width","transprent","color"]))}}),G=e({__name:"tm-grid-item",props:{...w,height:{type:Number,default:100},transprent:{type:Boolean,default:!0},dot:{type:[Boolean,String],default:!1},icon:{type:[String],default:""},count:{type:[Number,String],default:0},maxCount:{type:[Number,String],default:999},bgColor:{type:String,default:"white"},color:{type:String,default:"red"},url:{type:String,default:""}},emits:["click"],setup(e,{emit:l}){var s;const w=e,N=$(),G=(null==(s=h())?void 0:s.proxy)??null,I=r((()=>N.tmStore)),z=r((()=>_(w,I.value))),j=r((()=>S({...w,color:w.bgColor},z.value,I.value))),k=t("tmGridItemWidth",0),K=t("tmGridshowBorder",r((()=>!1))),L=t("tmGridshowCachList",r((()=>[]))),W=o({id:uni.$tm.u.getUid(1),type:""});let E=null==G?void 0:G.$parent;for(;E&&"tmGrid"!=(null==E?void 0:E.keyName)&&E;)E=(null==E?void 0:E.$parent)??void 0;n((()=>{(null==E?void 0:E.pushKey)&&E.pushKey(W.value)})),p((()=>{E.delKey(W.value)}));let H=o(`width:${k}'rpx'`);function J(e){if(l("click",e),""!==w.url)try{y({url:w.url})}catch(t){}}return c([L,K],(()=>{v((()=>function(){let e=L.value.filter((e=>e.id==W.value.id));1==e.length&&(W.value=e[0]);if(!K.value)return void(H.value=`box-sizing: border-box;border:0rpx solid rgba(0,0,0,0);width:${k}rpx`);1==W.value.type&&(H.value=`box-sizing: border-box;border:1rpx solid ${j.value.border};width:${k-1}rpx`);2==W.value.type&&(H.value=`box-sizing: border-box;border-bottom:1rpx solid ${j.value.border};border-right:1rpx solid ${j.value.border};border-left:1rpx solid rgba(0,0,0,0);border-top:1rpx solid rgba(0,0,0,0);width:${k-1}rpx`);3==W.value.type&&(H.value=`box-sizing: border-box;border-top:1rpx solid rgba(0,0,0,0);border-bottom:1rpx solid ${j.value.border};border-right:1rpx solid ${j.value.border};border-left:1rpx solid ${j.value.border};width:${k-1}rpx`);4==W.value.type&&(H.value=`box-sizing: border-box;border-left:1rpx solid rgba(0,0,0,0);border-bottom:1rpx solid ${j.value.border};border-top:1rpx solid ${j.value.border};border-right:1rpx solid ${j.value.border};width:${k-1}rpx`)}()))}),{deep:!0}),(e,t)=>{const r=g;return a(),d(r,{style:m(x(H))},{default:i((()=>[b(B,{color:w.bgColor,text:w.text,border:0,"hover-class":"opacity-6",transprent:w.transprent,height:w.height,width:x(k)-.5,margin:[0,0],padding:[0,0],_class:"flex-col flex",onClick:J},{default:i((()=>[b(r,{class:"flex-1 flex flex-col-center-center"},{default:i((()=>[b(C,{top:0,userInteractionEnabled:!0,fontSize:20,dot:w.dot,count:w.count,"max-count":w.maxCount,icon:w.icon,color:w.color},{default:i((()=>[b(r,{class:f(["flex-col flex-col-center-center flex px-10 my-5",[w.dot?"":"py-5 "]])},{default:i((()=>[u(e.$slots,"default")])),_:3},8,["class"])])),_:3},8,["dot","count","max-count","icon","color"])])),_:3})])),_:3},8,["color","text","transprent","height","width"])])),_:3},8,["style"])}}});export{N as _,G as a};
