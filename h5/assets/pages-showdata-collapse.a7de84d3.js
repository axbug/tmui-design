import{d as e,r as t,at as l,c as a,o,a as n,w as r,N as i,j as s,_ as c,P as u,ad as f,p as d,az as p,L as m,b as g,n as v,u as y,k as h,O as _,g as b}from"./index-5c06cf16.js";import{c as x,t as w}from"./tm-app.20954b06.js";import{t as k}from"./tm-sheet.2873fe67.js";import{t as I}from"./tm-text.fdd4f0a8.js";import{t as C}from"./tm-icon.5716c798.js";import{_ as S}from"./tm-image.vue_vue_type_script_setup_true_lang.f325e7c1.js";import"./tm-translate.4fbb7927.js";const D=c(e({__name:"tm-collapse",props:{activeKey:{type:[Array],default:()=>[]},defaultActiveKey:{type:[Array],default:()=>[]},accordion:{type:[Boolean,String],default:!1},border:{type:[Number,String],default:2},iconPos:{type:String,default:"left"},openIcon:{type:String,default:"tmicon-angle-up"},closeIcon:{type:String,default:"tmicon-angle-down"}},emits:["change","update:active-key"],setup(e,{expose:c,emit:u}){const f=e,d=t([...f.activeKey,...f.defaultActiveKey]);f.accordion&&d.value.length>0&&(d.value=[d.value[0]]);const p=t([]);return u("update:active-key",d.value),c({tmCollapse:"tmCollapse",setKey:function(e){let t=d.value.findIndex((t=>String(t)==String(e)));f.accordion?d.value=t>-1?[]:[e]:t>-1?d.value.splice(t,1):d.value.push(e),u("update:active-key",d.value),u("change",d.value)},pushKey:function(e){p.value=[...new Set([...p.value,e])]},border:f.border}),l("tmCollapseKeyList",a((()=>d.value))),l("tmCollapseIconPos",a((()=>f.iconPos))),l("tmCollapseopenIcon",a((()=>f.openIcon))),l("tmCollapsecloseIcon",a((()=>f.closeIcon))),(e,t)=>{const l=s;return o(),n(l,{class:"col",style:{"box-sizing":"border-box"}},{default:r((()=>[i(e.$slots,"default",{},void 0,!0)])),_:3})}}}),[["__scopeId","data-v-d42a81bf"]]),z=c(e({__name:"tm-collapse-item",props:{...x,transprent:{type:Boolean,default:!1},color:{type:String,default:"white"},title:{type:String,default:""},titleSize:{type:Number,default:30},height:{type:[Number],default:88},contentHeight:{type:[Number,String],default:0},name:{type:[Number,String],default:""},activeColor:{type:[String],default:"primary"},margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[24,0]},disabled:{type:[Boolean,String],default:!1},leftIcon:{type:[String],default:""},leftIconColor:{type:[String],default:""}},emits:["click"],setup(e,{expose:l,emit:c}){var x;const w=e,S=(null==(x=b())?void 0:x.proxy)??null,D=u("tmCollapseKeyList",a((()=>[]))),z=u("tmCollapseIconPos",a((()=>"left"))),N=u("tmCollapsecloseIcon",a((()=>"tmicon-caret-right"))),K=u("tmCollapseopenIcon",a((()=>"tmicon-sort-down"))),H=a((()=>w.leftIcon)),$=t(O(w.contentHeight)),A=t(0);t(!1);const j=t(!1);let P=NaN;a((()=>w.contentHeight?"string"==typeof w.contentHeight?w.contentHeight:m(w.contentHeight)+"px":0));let T=null==S?void 0:S.$parent;for(;T&&"tmCollapse"!=(null==T?void 0:T.tmCollapse)&&T;)T=(null==T?void 0:T.$parent)??void 0;T&&(null==T||T.pushKey(w.name));let L=null==S?void 0:S.$parent;for(;L&&"tmCollapseItem"!=(null==L?void 0:L.tmCollapseItem)&&L;)L=(null==L?void 0:L.$parent)??void 0;const B=t(w.border?w.border:null==T?void 0:T.border),E=a((()=>D.value.findIndex((e=>e==w.name))>-1)),J=a((()=>w.leftIconColor?w.leftIconColor:""===w.leftIconColor&&""!==w.activeColor&&E.value?w.activeColor:""));function O(e=0,t="rpx"){return e?"string"==typeof e?(e.indexOf("rpx")?A.value=m(Number(e)):A.value=Number(e),e):"rpx"==t?(A.value=m(Number(e)),m(Number(e))+"px"):(A.value=Number(e),Number(e)+"px"):0}function q(e=0){w.contentHeight?$.value=O(w.contentHeight,"rpx"):uni.$tm.u.quereyDom(S,"#contentIds").then((t=>{t&&($.value=O(t.height+e,"px"))}))}function G(e){c("click",e),w.disabled||null==T||T.setKey(w.name)}return f((()=>{E.value?setTimeout((function(){j.value=!0,q()}),20):j.value=!1,clearTimeout(P),P=setTimeout((function(){L&&(null==L||L.updateHeight())}),60)})),d((()=>{q()})),p((()=>{q()})),l({tmCollapseItem:"tmCollapseItem",updateHeight:q}),(t,l)=>{const a=s;return o(),n(a,{class:_(["flex col overflow",[e.disabled?"opacity-7":""]])},{default:r((()=>[g(k,{transprent:w.transprent,onClick:G,color:w.color,text:e.disabled,border:y(E)?0:B.value,linear:w.linear,linearDeep:w.linearDeep,dark:w.dark,followDark:w.followDark,followTheme:w.followTheme,borderDirection:"bottom",margin:w.margin,padding:w.padding},{default:r((()=>[g(a,{style:v({height:w.height+"rpx"}),userInteractionEnabled:!1,class:"flex-row-center-start flex-row"},{default:r((()=>["left"==y(z)?(o(),n(a,{key:0,class:"pr-16 flex-center"},{default:r((()=>[g(C,{dark:w.dark,followDark:w.followDark,color:y(E)?w.activeColor:"grey-1",name:y(E)?y(K):y(N),"font-size":20},null,8,["dark","followDark","color","name"])])),_:1})):h("v-if",!0),i(t.$slots,"icon",{},(()=>[y(H)?(o(),n(a,{key:0,class:"flex flex-center pr-16"},{default:r((()=>[g(C,{style:{"line-height":"0px"},color:y(J),"font-size":24,name:y(H)},null,8,["color","name"])])),_:1})):h("v-if",!0)]),!0),g(a,{class:"flex flex-1",style:{width:"0px"}},{default:r((()=>[i(t.$slots,"title",{data:{isActive:y(E)}},(()=>[g(I,{_class:"",dark:w.dark,followDark:w.followDark,fontSize:w.titleSize,color:y(E)?w.activeColor:"",label:w.title},null,8,["dark","followDark","fontSize","color","label"])]),!0)])),_:3}),i(t.$slots,"rightLabel",{},void 0,!0),"right"==y(z)?(o(),n(a,{key:1,class:"pl-16 flex-center"},{default:r((()=>[g(C,{dark:w.dark,followDark:w.followDark,color:y(E)?w.activeColor:"grey-1",name:y(E)?y(K):y(N),"font-size":20},null,8,["dark","followDark","color","name"])])),_:1})):h("v-if",!0)])),_:3},8,["style"])])),_:3},8,["transprent","color","text","border","linear","linearDeep","dark","followDark","followTheme","margin","padding"]),g(a,{class:"flex overflow content col",style:v([j.value?{height:$.value}:{height:"0px",overflow:"hidden"}])},{default:r((()=>[g(a,{ref:"contentIds",id:"contentIds",class:"flex col flex-1 on"},{default:r((()=>[i(t.$slots,"default",{},void 0,!0)])),_:3},512)])),_:3},8,["style"])])),_:3},8,["class"])}}}),[["__scopeId","data-v-b35dacfd"]]),N=e({__name:"collapse",setup:e=>(e,t)=>{const l=s;return o(),n(w,null,{default:r((()=>[g(k,{margin:[0,32]},{default:r((()=>[g(I,{"font-size":24,_class:"font-weight-b",label:"可展开多个,不建议嵌套使用,尽管兼容,但影响性能."})])),_:1}),g(D,{defaultActiveKey:["2"]},{default:r((()=>[g(z,{title:"面板标题1",name:"1"},{default:r((()=>[g(l,{class:"pa-24"},{default:r((()=>[g(I,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1}),g(z,{title:"面板标题2",name:"2"},{default:r((()=>[g(l,{class:"pa-24"},{default:r((()=>[g(I,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1}),g(z,{"left-icon":"tmicon-check-circle-fill",title:"面板标题3，允许嵌套使用，展开嵌套面板",name:"3"},{default:r((()=>[g(l,{class:"pa-24"},{default:r((()=>[g(S,{width:300,height:200,src:"https://img1.baidu.com/it/u=275574909,2468810396&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=750"})])),_:1})])),_:1})])),_:1}),g(k,{margin:[0,32]},{default:r((()=>[g(I,{"font-size":24,_class:"font-weight-b",label:"只允许单个展开"})])),_:1}),g(D,{accordion:!0,defaultActiveKey:["1"]},{default:r((()=>[g(z,{title:"只能展开一个1",name:"1"},{default:r((()=>[g(l,{class:"pa-24"},{default:r((()=>[g(I,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1}),g(z,{color:"primary",linear:"right",activeColor:"white",title:"随便更改背景",name:"2"},{default:r((()=>[g(l,{class:"pa-24"},{default:r((()=>[g(I,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1}),g(z,{title:"只能展开一个3",name:"3"},{default:r((()=>[g(l,{class:"pa-24"},{default:r((()=>[g(I,{"font-size":28,_class:"font-weight-b",label:"这是折叠面板这是折叠面板这是折叠面板这是折叠面板这是折叠面板"})])),_:1})])),_:1})])),_:1})])),_:1})}});export{N as default};
